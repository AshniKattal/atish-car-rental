(this["webpackJsonp@minimal/minimal-kit-react"]=this["webpackJsonp@minimal/minimal-kit-react"]||[]).push([[61],{1557:function(e,a,n){"use strict";n.d(a,"a",(function(){return d}));var t=n(7),i=n(3),o=n.n(i);function d(e){return r.apply(this,arguments)}function r(){return(r=Object(t.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){e([{func:"View home section",viewAllSectionChk:a,name:"viewAllSectionChk",id:"home",title:"Home section",rowSpan:1,assignedCompanyId:[]},{func:"Upload Bank Statement",uploadBankStatementChk:a,name:"uploadBankStatementChk",id:"bankStatement",title:"Bank Statement section",rowSpan:1,assignedCompanyId:[]},{func:"Access to Report",accessReport:a,name:"accessReport",id:"report",title:"Report section ",rowSpan:2,assignedCompanyId:[]},{func:"View unpaid invoices only",viewUnpaidInvoiceOnly:a,name:"viewUnpaidInvoiceOnly",id:"report",title:"",rowSpan:2,assignedCompanyId:[]},{func:"Access to payment section",accessPayment:a,name:"accessPayment",id:"payment",title:"Payment section",rowSpan:3,assignedCompanyId:[]},{func:"Add full payment/ partial payment",addFullPartialPaymentChk:a,name:"addFullPartialPaymentChk",id:"payment",title:"Payment section",rowSpan:3,assignedCompanyId:[]},{func:"Delete full payment/ partial payment",deleteFullPartialPaymentChk:a,name:"deleteFullPartialPaymentChk",id:"payment",title:"Payment section",rowSpan:3,assignedCompanyId:[]},{func:"Access to expense section",accessExpense:a,name:"accessExpense",id:"expense",title:"Expense",rowSpan:3,assignedCompanyId:[]},{func:"Add expense",addExpense:a,name:"addExpense",id:"expense",title:"Expense",rowSpan:3,assignedCompanyId:[]},{func:"Delete expense",deleteExpense:a,name:"deleteExpense",id:"expense",title:"Expense",rowSpan:3,assignedCompanyId:[]},{func:"View quotation",viewQuotation:a,name:"viewQuotation",id:"quotation",title:"Quotation section",rowSpan:4,assignedCompanyId:[]},{func:"Create quotation",createQuotation:a,name:"createQuotation",id:"quotation",title:"Quotation section",rowSpan:4,assignedCompanyId:[]},{func:"Update quotation",updateQuotation:a,name:"updateQuotation",id:"quotation",title:"Quotation section",rowSpan:4,assignedCompanyId:[]},{func:"Delete quotation",deleteQuotation:a,name:"deleteQuotation",id:"quotation",title:"Quotation section",rowSpan:4,assignedCompanyId:[]},{func:"View Invoice",viewInvoice:a,name:"viewInvoice",id:"invoice",title:"Invoice section",rowSpan:4,assignedCompanyId:[]},{func:"Create Invoice",createInvoice:a,name:"createInvoice",id:"invoice",title:"Invoice section",rowSpan:4,assignedCompanyId:[]},{func:"Update Invoice",updateInvoice:a,name:"updateInvoice",id:"invoice",title:"Invoice section",rowSpan:4,assignedCompanyId:[]},{func:"Delete Invoice",deleteInvoice:a,name:"deleteInvoice",id:"invoice",title:"Invoice section",rowSpan:4,assignedCompanyId:[]},{func:"View VAT Invoice",viewVatInvoice:a,name:"viewVatInvoice",id:"vatInvoice",title:"VAT Invoice section",rowSpan:4,assignedCompanyId:[]},{func:"Create VAT Invoice",createVatInvoice:a,name:"createVatInvoice",id:"vatInvoice",title:"VAT Invoice section",rowSpan:4,assignedCompanyId:[]},{func:"Update VAT Invoice",updateVatInvoice:a,name:"updateVatInvoice",id:"vatInvoice",title:"VAT Invoice section",rowSpan:4,assignedCompanyId:[]},{func:"Delete VAT Invoice",deleteVatInvoice:a,name:"deleteVatInvoice",id:"vatInvoice",title:"VAT Invoice section",rowSpan:4,assignedCompanyId:[]},{func:"View Purchase order",viewPurchaseOrder:a,name:"viewPurchaseOrder",id:"purchaseOrder",title:"Purchase order section",rowSpan:4,assignedCompanyId:[]},{func:"Create Purchase order",createPurchaseOrder:a,name:"createPurchaseOrder",id:"purchaseOrder",title:"Purchase order section",rowSpan:4,assignedCompanyId:[]},{func:"Update Purchase order",updatePurchaseOrder:a,name:"updatePurchaseOrder",id:"purchaseOrder",title:"Purchase order section",rowSpan:4,assignedCompanyId:[]},{func:"Delete Purchase order",deletePurchaseOrder:a,name:"deletePurchaseOrder",id:"purchaseOrder",title:"Purchase order section",rowSpan:4,assignedCompanyId:[]},{func:"View Proforma",viewProforma:a,name:"viewProforma",id:"viewProforma",title:"Proforma section",rowSpan:4,assignedCompanyId:[]},{func:"Create Proforma",createProforma:a,name:"createProforma",id:"viewProforma",title:"Proforma section",rowSpan:4,assignedCompanyId:[]},{func:"Update Proforma",updateProforma:a,name:"updateProforma",id:"viewProforma",title:"Proforma section",rowSpan:4,assignedCompanyId:[]},{func:"Delete Proforma",deleteProforma:a,name:"deleteProforma",id:"viewProforma",title:"Proforma section",rowSpan:4,assignedCompanyId:[]},{func:"View Credit Note",viewCreditNote:a,name:"viewCreditNote",id:"creditNote",title:"Credit note section",rowSpan:4,assignedCompanyId:[]},{func:"Create Credit Note",createCreditNote:a,name:"createCreditNote",id:"creditNote",title:"Credit note section",rowSpan:4,assignedCompanyId:[]},{func:"Update Credit Note",updateCreditNote:a,name:"updateCreditNote",id:"creditNote",title:"Credit note section",rowSpan:4,assignedCompanyId:[]},{func:"Delete Credit Note",deleteCreditNote:a,name:"deleteCreditNote",id:"creditNote",title:"Credit note section",rowSpan:4,assignedCompanyId:[]},{func:"View Debit Note",viewDebitNote:a,name:"viewDebitNote",id:"debitNote",title:"Debit note section",rowSpan:4,assignedCompanyId:[]},{func:"Create Debit Note",createDebitNote:a,name:"createDebitNote",id:"debitNote",title:"Debit note section",rowSpan:4,assignedCompanyId:[]},{func:"Update Debit Note",updateDebitNote:a,name:"updateDebitNote",id:"debitNote",title:"Debit note section",rowSpan:4,assignedCompanyId:[]},{func:"Delete Debit Note",deleteDebitNote:a,name:"deleteDebitNote",id:"debitNote",title:"Debit note section",rowSpan:4,assignedCompanyId:[]},{func:"View Cash Transation",viewCashTransaction:a,name:"viewCashTransaction",id:"cashTransaction",title:"Cash transation section",rowSpan:4,assignedCompanyId:[]},{func:"Create Cash Transation",createCashTransaction:a,name:"createCashTransaction",id:"cashTransaction",title:"Cash transation section",rowSpan:4,assignedCompanyId:[]},{func:"Update Cash Transation",updateCashTransaction:a,name:"updateCashTransaction",id:"cashTransaction",title:"Cash transation section",rowSpan:4,assignedCompanyId:[]},{func:"Delete Cash Transation",deleteCashTransaction:a,name:"deleteCashTransaction",id:"cashTransaction",title:"Cash transation section",rowSpan:4,assignedCompanyId:[]},{func:"View Deleted documents",viewDeletedDocuments:a,name:"viewDeletedDocuments",id:"deletedDoc",title:"Deleted documents section",rowSpan:2,assignedCompanyId:[]},{func:"Undo deletion of a document",undoDeletion:a,name:"undoDeletion",id:"deletedDoc",title:"Deleted documents section",rowSpan:2,assignedCompanyId:[]},{func:"View converted proforma",viewConvertedProforma:a,name:"viewConvertedProforma",id:"convertedProforma",title:"Converted proforma",rowSpan:1,assignedCompanyId:[]},{func:"View calendar",viewCalendar:a,name:"viewCalendar",id:"calendar",title:"Calendar",rowSpan:4,assignedCompanyId:[]},{func:"Add calendar task",addCalendarTask:a,name:"addCalendarTask",id:"calendar",title:"Calendar",rowSpan:4,assignedCompanyId:[]},{func:"Update calendar task",updateCalendarTask:a,name:"updateCalendarTask",id:"calendar",title:"Calendar",rowSpan:4,assignedCompanyId:[]},{func:"Delete calendar task",deleteCalendarTask:a,name:"deleteCalendarTask",id:"calendar",title:"Calendar",rowSpan:4,assignedCompanyId:[]},{func:"View Employee",viewEmployee:a,name:"viewEmployee",id:"employee",title:"Employee",rowSpan:4,assignedCompanyId:[]},{func:"Add employee",addEmployee:a,name:"addEmployee",id:"employee",title:"Employee",rowSpan:4,assignedCompanyId:[]},{func:"Update employee",updateEmployee:a,name:"updateEmployee",id:"employee",title:"Employee",rowSpan:4,assignedCompanyId:[]},{func:"Delete employee",deleteEmployee:a,name:"deleteEmployee",id:"employee",title:"Employee",rowSpan:4,assignedCompanyId:[]},{func:"View Company details",viewCompChk:a,name:"viewCompChk",id:"company",title:"Company",rowSpan:4,assignedCompanyId:[]},{func:"Create Company",createCompChk:a,name:"createCompChk",id:"company",title:"Company",rowSpan:4,assignedCompanyId:[]},{func:"Update Company",updateCompChk:a,name:"updateCompChk",id:"company",title:"Company",rowSpan:4,assignedCompanyId:[]},{func:"Delete Company",deleteCompChk:a,name:"deleteCompChk",id:"company",title:"Company",rowSpan:4,assignedCompanyId:[]},{func:"View Client details",viewClientChk:a,name:"viewClientChk",id:"client",title:"Client",rowSpan:4,assignedCompanyId:[]},{func:"Create Client",createClientChk:a,name:"createClientChk",id:"client",title:"Client",rowSpan:4,assignedCompanyId:[]},{func:"Update Client",updateClientChk:a,name:"updateClientChk",id:"client",title:"Client",rowSpan:4,assignedCompanyId:[]},{func:"Delete Client",deleteClientChk:a,name:"deleteClientChk",id:"client",title:"Client",rowSpan:4,assignedCompanyId:[]},{func:"View Admin details",viewAdminChk:a,name:"viewAdminChk",id:"admin",title:"Admin",rowSpan:4,assignedCompanyId:[]},{func:"Create Admin",createAdminChk:a,name:"createAdminChk",id:"admin",title:"Admin",rowSpan:4,assignedCompanyId:[]},{func:"Update Admin",updateAdminChk:a,name:"updateAdminChk",id:"admin",title:"Admin",rowSpan:4,assignedCompanyId:[]},{func:"Delete Admin",deleteAdminChk:a,name:"deleteAdminChk",id:"admin",title:"Admin",rowSpan:4,assignedCompanyId:[]},{func:"View Super Admin details",viewSuperAdminChk:a,name:"viewSuperAdminChk",id:"super-admin",title:"Super Admin",rowSpan:4,assignedCompanyId:[]},{func:"Create Super Admin",createSuperAdminChk:a,name:"createSuperAdminChk",id:"super-admin",title:"Super Admin",rowSpan:4,assignedCompanyId:[]},{func:"Update Super Admin",updateSuperAdminChk:a,name:"updateSuperAdminChk",id:"super-admin",title:"Super Admin",rowSpan:4,assignedCompanyId:[]},{func:"Delete Super Admin",deleteSuperAdminChk:a,name:"deleteSuperAdminChk",id:"super-admin",title:"Super Admin",rowSpan:4,assignedCompanyId:[]},{func:"View client survey",viewAllClientSurveyChk:a,name:"viewAllClientSurveyChk",id:"bugsBeGone",title:"Bugs Be Gone Custom Settings",rowSpan:1,assignedCompanyId:[]}])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1831:function(e,a,n){"use strict";n.r(a);var t=n(9),i=n(7),o=n(18),d=n(3),r=n.n(d),s=n(4),c=n(1514),l=n(130),p=n(1497),m=n(147),u=n(52),C=n(227),f=n(77),v=n(48),w=n(72),y=n(120),b=n(1557),h=n(251),I=n(156),S=n(84),g=n(0),j=Object(s.lazy)((function(){return Promise.all([n.e(1),n.e(13),n.e(16)]).then(n.bind(null,1636))})),O=Object(s.lazy)((function(){return Promise.all([n.e(9),n.e(89)]).then(n.bind(null,1777))})),k=Object(s.lazy)((function(){return Promise.all([n.e(9),n.e(90)]).then(n.bind(null,1778))}));a.default=function(){var e=Object(S.a)().themeStretch,a=Object(u.b)(),n=Object(w.a)().user,d=Object(y.b)().enqueueSnackbar,N=Object(u.c)(I.c).companyList,P=Object(s.useRef)(),D=Object(s.useState)(null),x=Object(o.a)(D,2),A=x[0],V=x[1],E=Object(u.c)(C.b),T=Object(s.useState)([]),_=Object(o.a)(T,2),U=_[0],F=_[1],B=Object(s.useState)({id:"",firstName:"",lastName:"",a_dep:[],contactNumber:"",email:"",password:"",role:"admin",access:!0,sysFunc:[],a_comp:[]}),Q=Object(o.a)(B,2),L=Q[0],q=Q[1],R=Object(s.useState)(!1),z=Object(o.a)(R,2),G=z[0],H=z[1],J=Object(s.useState)(""),M=Object(o.a)(J,2),W=M[0],Y=M[1],K=Object(s.useRef)(),X=Object(s.useRef)(),Z=Object(s.useRef)(),$=Object(s.useState)(!1),ee=Object(o.a)($,2),ae=ee[0],ne=ee[1];Object(s.useEffect)((function(){Z.current()}),[A]),Z.current=function(){var e,a,t;A&&null!==A&&void 0!==A&&A.id&&(null!==n&&void 0!==n&&null!==(e=n.permissions)&&void 0!==e&&null!==(a=e.viewAdminChk)&&void 0!==a&&null!==(t=a.assignedCompanyId)&&void 0!==t&&t.includes(null===A||void 0===A?void 0:A.id)?ne(!0):(d("You do not have the permission to view admin for this company",{variant:"error"}),ne(!1)))},Object(s.useEffect)((function(){P.current()}),[N]),Object(s.useEffect)((function(){K.current()}),[A,ae]),Object(s.useEffect)((function(){X.current()}),[E]);var te=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N||0!==N.length){e.next=6;break}return a(Object(f.d)(!0)),e.next=4,Object(h.j)(null===n||void 0===n?void 0:n.id,null===n||void 0===n?void 0:n.a_comp,null===n||void 0===n?void 0:n.role);case 4:(t=e.sent).error?(d(t.msg||"",{variant:t.variant}),a(Object(f.d)(!1))):(a(Object(I.d)(t)),a(Object(f.d)(!1)));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function ie(){return oe.apply(this,arguments)}function oe(){return(oe=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===(null===n||void 0===n?void 0:n.id)||!A||!ae){e.next=6;break}return a(Object(f.d)(!0)),e.next=4,v.b.collection("users").where("role","!=","super-admin").get().then((function(e){var n,t=[];e.docs&&(null===(n=e.docs)||void 0===n?void 0:n.length)>0?(e.docs.forEach((function(e){var a,n,i,o=!1;(null!==e&&void 0!==e&&null!==(a=e.data())&&void 0!==a&&a.a_comp.find((function(e){return e.id===(null===A||void 0===A?void 0:A.id)}))&&(o=!0),o)&&(t.push({id:e.id,data:e.data(),firstName:(null===e||void 0===e||null===(n=e.data())||void 0===n?void 0:n.firstName)&&(null===e||void 0===e||null===(i=e.data())||void 0===i?void 0:i.firstName.toLowerCase())||""}),t.sort(Object(h.e)("firstName")))})),a(Object(C.d)(t)),a(Object(f.d)(!1))):(a(Object(C.d)([])),a(Object(f.d)(!1)))})).catch((function(e){d("Error occured while fetching administrators: ".concat(null===e||void 0===e?void 0:e.message),{variant:"error"}),a(Object(f.d)(!1))}));case 4:e.next=8;break;case 6:a(Object(C.d)([])),a(Object(f.d)(!1));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=Object(i.a)(r.a.mark((function e(){var a,n,t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E||!E.usersList||0===E.usersList.length){e.next=10;break}return a=[],n=[],e.next=5,Object(b.a)();case 5:t=e.sent,E.usersList.forEach((function(e){var i,o;a.push({id:e.id,data:e.data,firstName:e.data.firstName,lastName:e.data.lastName,a_dep:e.data.a_dep||[],contactNumber:e.data.contactNumber,email:e.data.email,password:e.data.password,role:e.data.role,access:e.data.access,sysFunc:e.data.sysFunc||t,a_comp:(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.a_comp)||[]}),n.push({id:e.id,data:e.data,firstName:e.data.firstName,lastName:e.data.lastName,a_dep:e.data.a_dep||[],contactNumber:e.data.contactNumber,email:e.data.email,role:e.data.role,a_comp:(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.a_comp)||[]})})),F(n),e.next=11;break;case 10:F([]);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}P.current=te,K.current=ie,X.current=function(){return de.apply(this,arguments)};var re=function(){var e=Object(i.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!1),e.next=3,Object(b.a)(!0);case 3:a=e.sent,q({id:"",firstName:"",lastName:"",a_dep:[],contactNumber:"",email:"",password:"",role:"",access:"",sysFunc:a,a_comp:[]});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(i.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y("add"),H(!0),e.next=4,Object(b.a)(!0);case 4:a=e.sent,q({id:"",firstName:"",lastName:"",a_dep:[],contactNumber:"",email:"",password:"",role:"",access:"",sysFunc:a,a_comp:[]});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)(c.a,{maxWidth:!e&&"xl",children:[Object(g.jsxs)(l.a,{container:!0,spacing:3,children:[Object(g.jsx)(l.a,{item:!0,xs:12,md:4,children:Object(g.jsx)(p.a,{ListboxProps:{style:{maxHeight:"70vh"}},size:"small",label:"Please select company",id:"client-drop-down",options:N||[],value:A||null,renderInput:function(e){return Object(g.jsx)(m.a,Object(t.a)(Object(t.a)({},e),{},{label:"Please select company"}))},onChange:function(e,a,n){"removeOption"!==n&&"clear"!==n&&a?V(a):"removeOption"!==n&&"clear"!==n||V(null)},getOptionLabel:function(e){return(null===e||void 0===e?void 0:e.name)||""},renderOption:function(e,a){return Object(s.createElement)("li",Object(t.a)(Object(t.a)({},e),{},{key:null===a||void 0===a?void 0:a.id}),Object(g.jsx)("span",{children:(null===a||void 0===a?void 0:a.name)||""}))}})}),A&&ae?Object(g.jsx)(l.a,{item:!0,xs:12,md:12,children:Object(g.jsx)(s.Suspense,{fallback:Object(g.jsx)("p",{}),children:Object(g.jsx)(j,{companyId:null===A||void 0===A?void 0:A.id,type:"admin",headers:[{id:"list",label:"List"},{id:"update",label:"Update"},{id:"delete",label:"Delete"},{id:"firstName",label:"First Name"},{id:"lastName",label:"Last Name"},{id:"contactNumber",label:"contactNumber"},{id:"email",label:"Email"},{id:"role",label:"Role"},{id:"a_comp",label:"assigned Companies"}],aCollection:U,addBtnDisplay:!0,addBtnLabel:"Create a User",addBtnFunc:se,openDialog:G,handleCloseDialog:re,emptyColMsg:"Sorry, not a User has been created yet. Please create a user.",updateBtnDisplay:!0,deleteBtnDisplay:!0,updateBtnFunc:function(e,a){Y("update"),H(!0),q({id:e,firstName:a.firstName,lastName:a.lastName,a_dep:a.a_dep,contactNumber:a.contactNumber,email:a.email,password:a.password,role:a.role,access:a.access,sysFunc:a.sysFunc||[],a_comp:(null===a||void 0===a?void 0:a.a_comp)||[]})},deleteBtnFunc:function(e){a(Object(f.d)(!0)),v.d.httpsCallable("deleteuserbyadminnew")({id:e}).then((function(e){var n;ie(),d(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.result,{variant:"success"}),a(Object(f.d)(!1))})).catch((function(e){var n="";n=e.message?e.message:e,d(n,{variant:"error"}),a(Object(f.d)(!1))}))}})})}):Object(g.jsx)(g.Fragment,{})]}),W&&"add"===W?Object(g.jsx)(s.Suspense,{fallback:Object(g.jsx)("p",{}),children:Object(g.jsx)(O,{openDialog:G,handleCloseDialog:re,adminDetails:L,setAdminDetails:q,init_admin_list:ie})}):Object(g.jsx)(s.Suspense,{fallback:Object(g.jsx)("p",{}),children:Object(g.jsx)(k,{openDialog:G,handleCloseDialog:re,adminDetails:L,setAdminDetails:q,init_admin_list:ie})})]})}}}]);
//# sourceMappingURL=61.53e69cd8.chunk.js.map