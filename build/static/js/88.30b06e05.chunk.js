(this["webpackJsonp@minimal/minimal-kit-react"]=this["webpackJsonp@minimal/minimal-kit-react"]||[]).push([[88],{1860:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return se}));var n=i(9),a=i(18),l=i(1514),c=i(130),o=i(1473),r=i(705),d=i(286),u=i(1497),s=i(147),v=i(4),j=i(287),b=i(84),p=i(28),h=i(7),m=i(3),O=i.n(m),g=i(120),y=i(52),x=i(472),f=i(77),S=i(48),P=i(1402),w=i(1410),k=i(1418),W=i(704),C=i(1419),q=i(5),T=i(1498),z=i(1865),A=i(1536),D=i(1537),N=i(1541),I=i(1539),U=i(1540),R=i(1538),F=i(1505),V=i(1882),E=i(50),H=i.n(E),B=i(1532),L=i.n(B),Q=i(68),M=i.n(Q),K=i(0);function Y(e){var t=e.state,i=e.setState,l=e.dialogType,u=Object(v.useRef)(),j=Object(v.useState)([]),b=Object(a.a)(j,2),h=b[0],m=b[1],O=Object(v.useState)({totalQty:0,totalUnitPrice:0,totalPrice:0}),g=Object(a.a)(O,2),y=g[0],x=g[1],f=Object(v.useState)({meanUnitPrice:0,meanPercentageConversion:0,meanShippingPercentage:0}),S=Object(a.a)(f,2),P=S[0],w=S[1];function k(e,t,i){var a,l=Object(p.a)(h||[]),c=Object(n.a)({},l[i]),o=Number("unitPrice"===t?e||0:(null===c||void 0===c?void 0:c.unitPrice)||0)*Number("qty"===t?e||0:(null===c||void 0===c?void 0:c.qty)||0)*Number("percentageConversion"===t?e||0:(null===c||void 0===c?void 0:c.percentageConversion)||0);l[i]=Object(n.a)(Object(n.a)({},l[i]),{},(a={},Object(q.a)(a,t,e),Object(q.a)(a,"totalPriceWithShipping",o||0),a)),m(l),W(l)}function W(e){var t=0,a=0,l=0;if(e&&(null===e||void 0===e?void 0:e.length)>0){var c=0;e.forEach((function(e){t+=Number((null===e||void 0===e?void 0:e.qty)||0),a+=Number((null===e||void 0===e?void 0:e.unitPrice)||0),l+=Number((null===e||void 0===e?void 0:e.totalPriceWithShipping)||0),c+=Number((null===e||void 0===e?void 0:e.qty)||0)*Number((null===e||void 0===e?void 0:e.percentageConversion)||0)}));var o=l/c,r=c/t;x({totalQty:t,totalUnitPrice:a,totalPrice:l}),w({meanUnitPrice:o||0,meanPercentageConversion:r||0}),i((function(i){return Object(n.a)(Object(n.a)({},i),{},{qty:t,stockHistory:{historyList:e,totalQty:t,totalUnitPrice:a,totalPrice:l,meanUnitPrice:o||0,meanPercentageConversion:r||0}})}))}else x({totalQty:0,totalUnitPrice:0,totalPrice:0}),w({meanUnitPrice:0,meanPercentageConversion:0,meanShippingPercentage:0}),i((function(e){return Object(n.a)(Object(n.a)({},e),{},{qty:t,stockHistory:{historyList:[],totalQty:0,totalUnitPrice:0,totalPrice:0,meanUnitPrice:0,meanPercentageConversion:0,meanShippingPercentage:0}})}))}return Object(v.useEffect)((function(){u.current()}),[]),u.current=function(){var e,i,a;if(null!==t&&void 0!==t&&t.stockHistory&&null!==t&&void 0!==t&&null!==(e=t.stockHistory)&&void 0!==e&&e.historyList&&(null===t||void 0===t||null===(i=t.stockHistory)||void 0===i||null===(a=i.historyList)||void 0===a?void 0:a.length)>0){var l,c,o,r,d,u,s,v=[];null===t||void 0===t||null===(l=t.stockHistory)||void 0===l||l.historyList.forEach((function(e){v.push(Object(n.a)(Object(n.a)({},e),{},{dateCreated:null!==e&&void 0!==e&&e.dateCreated?null===e||void 0===e?void 0:e.dateCreated.toDate():""}))})),m(Object(p.a)(v||[])),x({totalQty:(null===t||void 0===t||null===(c=t.stockHistory)||void 0===c?void 0:c.totalQty)||0,totalUnitPrice:(null===t||void 0===t||null===(o=t.stockHistory)||void 0===o?void 0:o.totalUnitPrice)||0,totalPrice:(null===t||void 0===t||null===(r=t.stockHistory)||void 0===r?void 0:r.totalPrice)||0}),w({meanUnitPrice:(null===t||void 0===t||null===(d=t.stockHistory)||void 0===d?void 0:d.meanUnitPrice)||0,meanPercentageConversion:(null===t||void 0===t||null===(u=t.stockHistory)||void 0===u?void 0:u.meanPercentageConversion)||0,meanShippingPercentage:(null===t||void 0===t||null===(s=t.stockHistory)||void 0===s?void 0:s.meanShippingPercentage)||0})}},Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(K.jsx)(d.a,{variant:"subtitle1",children:"Stock History - keep track of stock arrivals and calculate mean"})}),Object(K.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(K.jsxs)(o.a,{spacing:3,children:[Object(K.jsx)(r.a,{variant:"contained",color:"primary",onClick:function(){return function(){var e=Object(p.a)(h||[]);e.push({dateCreated:"",unitPrice:"",qty:"",shippingPercentage:"",percentageConversion:"",totalPriceWithShipping:""}),m(e)}()},sx:{width:"200px"},disabled:"view"===l,children:"Add stock row"}),Object(K.jsx)(A.a,{children:Object(K.jsxs)(D.a,{border:1,children:[Object(K.jsx)(N.a,{children:Object(K.jsxs)(I.a,{children:[Object(K.jsx)(U.a,{size:"small",align:"center",children:"Delete"}),Object(K.jsx)(U.a,{size:"small",align:"center",children:"Date Created"}),Object(K.jsx)(U.a,{size:"small",align:"center",children:"Unit Price"}),Object(K.jsx)(U.a,{size:"small",align:"center",children:"Quantity"}),Object(K.jsx)(U.a,{size:"small",align:"center",children:"% Shipping"}),Object(K.jsx)(U.a,{size:"small",align:"center",sx:{minWidth:"200px"},children:"Total"})]})}),Object(K.jsx)(R.a,{children:h&&(null===h||void 0===h?void 0:h.length)>0&&(null===h||void 0===h?void 0:h.map((function(e,t){return Object(K.jsxs)(I.a,{children:[Object(K.jsx)(U.a,{size:"small",align:"center",children:Object(K.jsx)(F.a,{color:"error",onClick:function(){return function(e){var t=Object(p.a)(h||[]);t.splice(e,1),m(t),W(t)}(t)},disabled:"view"===l,children:Object(K.jsx)(L.a,{})})}),Object(K.jsx)(U.a,{size:"small",align:"center",children:Object(K.jsx)(z.a,{value:null===e||void 0===e?void 0:e.dateCreated,onChange:function(e){k(e,"dateCreated",t)},renderInput:function(e){return Object(K.jsx)(s.a,Object(n.a)(Object(n.a)({},e),{},{size:"small",disabled:"view"===l}))},inputFormat:"dd/MM/yyyy",disabled:"view"===l})}),Object(K.jsx)(U.a,{size:"small",align:"center",children:Object(K.jsx)(s.a,{variant:"outlined",size:"small",fullWidth:!0,name:"unitPrice",label:"Unit Price",type:"text",id:"unitPrice",value:(null===e||void 0===e?void 0:e.unitPrice)||"",onChange:function(e){k(e.target.value,"unitPrice",t)},disabled:"view"===l})}),Object(K.jsx)(U.a,{size:"small",align:"center",children:Object(K.jsx)(s.a,{variant:"outlined",size:"small",fullWidth:!0,name:"qty",label:"Quantity",type:"text",id:"qty",value:(null===e||void 0===e?void 0:e.qty)||"",onChange:function(e){k(e.target.value,"qty",t)},disabled:"view"===l})}),Object(K.jsx)(U.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:Object(K.jsx)(o.a,{spacing:3,direction:"row",alignItems:"center",children:Object(K.jsx)(s.a,{variant:"outlined",size:"small",fullWidth:!0,name:"percentageConversion",label:"% Shipping",type:"text",id:"percentageConversion",value:(null===e||void 0===e?void 0:e.percentageConversion)||"",onChange:function(e){k(e.target.value,"percentageConversion",t)},disabled:"view"===l})})}),Object(K.jsx)(U.a,{size:"small",align:"right",children:Object(K.jsx)(H.a,{value:Number((null===e||void 0===e?void 0:e.totalPriceWithShipping)||0).toFixed(2),displayType:"text",thousandSeparator:!0})})]},t)})))}),Object(K.jsxs)(V.a,{children:[Object(K.jsxs)(I.a,{children:[Object(K.jsx)(U.a,{size:"small",align:"center",colSpan:2,children:Object(K.jsx)(d.a,{variant:"subtitle1",children:"TOTAL"})}),Object(K.jsx)(U.a,{size:"small",children:Object(K.jsx)(d.a,{variant:"subtitle1",children:Object(K.jsx)(H.a,{value:Number((null===y||void 0===y?void 0:y.totalUnitPrice)||0).toFixed(2),displayType:"text",thousandSeparator:!0})})}),Object(K.jsx)(U.a,{size:"small",children:Object(K.jsx)(d.a,{variant:"subtitle1",children:(null===y||void 0===y?void 0:y.totalQty)||0})}),Object(K.jsx)(U.a,{}),Object(K.jsx)(U.a,{size:"small",align:"right",children:Object(K.jsx)(d.a,{variant:"subtitle1",children:Object(K.jsx)(H.a,{value:Number((null===y||void 0===y?void 0:y.totalPrice)||0).toFixed(2),displayType:"text",thousandSeparator:!0})})})]}),Object(K.jsxs)(I.a,{children:[Object(K.jsx)(U.a,{size:"small",colSpan:2,align:"center",children:Object(K.jsx)(d.a,{variant:"subtitle1",children:"MEAN Calculation"})}),Object(K.jsx)(U.a,{size:"small",children:Object(K.jsx)(d.a,{variant:"subtitle1",children:Object(K.jsx)(H.a,{value:Number((null===P||void 0===P?void 0:P.meanUnitPrice)||0).toFixed(2),displayType:"text",thousandSeparator:!0})})}),Object(K.jsx)(U.a,{size:"small"}),Object(K.jsx)(U.a,{size:"small",children:Object(K.jsx)(d.a,{variant:"subtitle1",children:"".concat(Number((null===P||void 0===P?void 0:P.meanPercentageConversion)||0).toFixed(4)," (4 d.p)")})}),Object(K.jsx)(U.a,{size:"small"})]})]})]})})]})})]})}function J(e){var t=e.open,i=e.setOpen,n=e.allTransactions,l=Object(v.useRef)(),c=Object(v.useState)({totalWithoutVAT:0,totalWithVAT:0}),o=Object(a.a)(c,2),u=o[0],s=o[1];return Object(v.useEffect)((function(){l.current()}),[t,n]),l.current=function(){if(t&&(null===n||void 0===n?void 0:n.length)>0){var e=0,i=0;n.forEach((function(t){e=e+(null===t||void 0===t?void 0:t.rowDiscountedAmount)||0,i=i+(null===t||void 0===t?void 0:t.rowAmountWithVAT)||0})),s({totalWithoutVAT:e,totalWithVAT:i})}},Object(K.jsxs)(P.a,{open:t,maxWidth:"lg",fullWidth:!0,children:[Object(K.jsx)(w.a,{children:"All the sold transactions made for this item"}),Object(K.jsxs)(k.a,{children:[Object(K.jsx)(W.a,{}),Object(K.jsx)("br",{}),Object(K.jsx)(A.a,{children:Object(K.jsxs)(D.a,{border:1,children:[Object(K.jsx)(N.a,{children:Object(K.jsxs)(I.a,{children:[Object(K.jsx)(U.a,{size:"small",align:"center",children:"Document Type"}),Object(K.jsx)(U.a,{size:"small",align:"center",children:"Document Number"}),Object(K.jsx)(U.a,{size:"small",align:"center",children:"Date created"}),Object(K.jsx)(U.a,{size:"small",align:"center",children:"Unit Price"}),Object(K.jsx)(U.a,{size:"small",align:"center",children:"Qty Sold"}),Object(K.jsx)(U.a,{size:"small",align:"center",children:"Amount"}),Object(K.jsx)(U.a,{size:"small",align:"center",children:"Discount"}),Object(K.jsx)(U.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:"Amount (VAT excluded)"}),Object(K.jsx)(U.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:"Amount (VAT included)"})]})}),Object(K.jsx)(R.a,{children:n&&(null===n||void 0===n?void 0:n.length)>0&&(null===n||void 0===n?void 0:n.map((function(e){var t;return Object(K.jsxs)(I.a,{children:[Object(K.jsx)(U.a,{size:"small",align:"center",children:null!==e&&void 0!==e&&e.profomaConverted?"Proforma ".concat(null===e||void 0===e?void 0:e.previousProformaNumber," -> ").concat(null===e||void 0===e?void 0:e.docTitle):(null===e||void 0===e?void 0:e.docTitle)||""}),Object(K.jsx)(U.a,{size:"small",align:"center",children:(null===e||void 0===e?void 0:e.docString)||""}),Object(K.jsx)(U.a,{size:"small",align:"center",children:null!==e&&void 0!==e&&e.docDate?M()(null===e||void 0===e||null===(t=e.docDate)||void 0===t?void 0:t.toDate()).format("DD-MM-YYYY HH:mm:ss"):""}),Object(K.jsx)(U.a,{size:"small",align:"center",children:Object(K.jsx)(H.a,{value:Number((null===e||void 0===e?void 0:e.rowUnitPrice)||0).toFixed(2),displayType:"text",thousandSeparator:!0})}),Object(K.jsx)(U.a,{size:"small",align:"center",children:(null===e||void 0===e?void 0:e.itemQtySold)||""}),Object(K.jsx)(U.a,{size:"small",align:"center",children:Object(K.jsx)(H.a,{value:Number((null===e||void 0===e?void 0:e.rowAmount)||0).toFixed(2),displayType:"text",thousandSeparator:!0})}),Object(K.jsx)(U.a,{size:"small",align:"center",children:Object(K.jsx)(H.a,{value:Number((null===e||void 0===e?void 0:e.rowDiscountAmount)||0).toFixed(2),displayType:"text",thousandSeparator:!0})}),Object(K.jsx)(U.a,{size:"small",align:"center",children:Object(K.jsx)(H.a,{value:Number((null===e||void 0===e?void 0:e.rowDiscountedAmount)||0).toFixed(2),displayType:"text",thousandSeparator:!0})}),Object(K.jsx)(U.a,{size:"small",align:"center",children:Object(K.jsx)(H.a,{value:Number((null===e||void 0===e?void 0:e.rowAmountWithVAT)||0).toFixed(2),displayType:"text",thousandSeparator:!0})})]})})))}),Object(K.jsx)(V.a,{children:Object(K.jsxs)(I.a,{children:[Object(K.jsx)(U.a,{colSpan:7,align:"right",children:Object(K.jsx)(d.a,{variant:"h6",children:"TOTAL"})}),Object(K.jsx)(U.a,{size:"small",align:"center",children:Object(K.jsx)(d.a,{variant:"h6",children:Object(K.jsx)(H.a,{value:Number((null===u||void 0===u?void 0:u.totalWithoutVAT)||0).toFixed(2),displayType:"text",thousandSeparator:!0})})}),Object(K.jsx)(U.a,{size:"small",align:"center",children:Object(K.jsx)(d.a,{variant:"h6",children:Object(K.jsx)(H.a,{value:Number((null===u||void 0===u?void 0:u.totalWithVAT)||0).toFixed(2),displayType:"text",thousandSeparator:!0})})})]})})]})})]}),Object(K.jsx)(C.a,{children:Object(K.jsx)(r.a,{variant:"outlined",color:"error",onClick:function(){i(!1)},children:"Close"})})]})}var G=i(155);function Z(e){var t=e.data,i=e.setData,l=e.dialogType,d=e.fetchData,u=e.setState,j=Object(y.b)(),b=Object(g.b)().enqueueSnackbar,p=Object(v.useRef)(),m=Object(v.useState)([]),x=Object(a.a)(m,2),T=x[0],z=x[1],F=Object(v.useState)(""),V=Object(a.a)(F,2),E=V[0],H=V[1];function B(){return L.apply(this,arguments)}function L(){return(L=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t||!t.open){e.next=4;break}return j(Object(f.d)(!0)),e.next=4,S.b.collection("company").doc(null===t||void 0===t?void 0:t.companyId).collection("inventory").doc(null===t||void 0===t?void 0:t.inventoryId).collection(null===t||void 0===t?void 0:t.type).orderBy("timestamp","desc").get().then((function(e){var t;if((null===e||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.length)>0){var i=[];null===e||void 0===e||e.docs.forEach((function(e){i.push({id:null===e||void 0===e?void 0:e.id,data:Object(n.a)({},null===e||void 0===e?void 0:e.data())})})),z(i),j(Object(f.d)(!1))}else z([]),j(Object(f.d)(!1))})).catch((function(e){b("Error occured while retieving history list: ".concat(null===e||void 0===e?void 0:e.message),{variant:"error"}),j(Object(f.d)(!1))}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(Object(f.d)(!0)),e.next=3,S.b.collection("company").doc(null===t||void 0===t?void 0:t.companyId).collection("inventory").doc(null===t||void 0===t?void 0:t.inventoryId).collection(null===t||void 0===t?void 0:t.type).add({timestamp:G.a.firestore.Timestamp.fromDate(new Date),amount:E}).then(Object(h.a)(O.a.mark((function e(){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(q.a)({},null===t||void 0===t?void 0:t.type,E),e.next=3,S.b.collection("company").doc(null===t||void 0===t?void 0:t.companyId).collection("inventory").doc(null===t||void 0===t?void 0:t.inventoryId).set(Object(n.a)({},a),{merge:!0}).then((function(){u((function(e){return Object(n.a)(Object(n.a)({},e),{},Object(q.a)({},null===t||void 0===t?void 0:t.type,E))})),H(""),b("Changes recorded successfully"),d(),B(),j(Object(f.d)(!1)),i({open:!1})})).catch((function(e){b("Error occured while retieving : ".concat(null===e||void 0===e?void 0:e.message),{variant:"error"}),j(Object(f.d)(!1))}));case 3:case"end":return e.stop()}}),e)})))).catch((function(e){b("Error occured while retieving history list: ".concat(null===e||void 0===e?void 0:e.message),{variant:"error"}),j(Object(f.d)(!1))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(v.useEffect)((function(){p.current()}),[null===t||void 0===t?void 0:t.open]),p.current=B,Object(K.jsxs)(P.a,{open:null===t||void 0===t?void 0:t.open,maxWidth:"md",fullWidth:!0,children:[Object(K.jsx)(w.a,{children:"Amount Update History"}),Object(K.jsxs)(k.a,{children:[Object(K.jsx)(W.a,{}),Object(K.jsx)("br",{}),Object(K.jsxs)(c.a,{container:!0,spacing:3,children:["view"!==l?Object(K.jsx)(c.a,{item:!0,xs:12,md:5,children:Object(K.jsxs)(o.a,{spacing:2,direction:"row",alignItems:"center",sx:{whiteSpace:"nowrap"},children:[Object(K.jsx)(s.a,{variant:"outlined",size:"small",fullWidth:!0,name:"amount",label:null===t||void 0===t?void 0:t.typeLabel,type:"text",id:"amount",value:E,onChange:function(e){H(e.target.value)},disabled:"view"===l}),E?Object(K.jsx)(r.a,{variant:"contained",color:"primary",onClick:function(){return function(){return Q.apply(this,arguments)}()},children:"Submit"}):Object(K.jsx)(K.Fragment,{})]})}):Object(K.jsx)(K.Fragment,{}),Object(K.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(K.jsx)(A.a,{children:Object(K.jsxs)(D.a,{children:[Object(K.jsx)(N.a,{children:Object(K.jsxs)(I.a,{children:[Object(K.jsx)(U.a,{size:"small",align:"center",children:"Date - last manually modified"}),Object(K.jsx)(U.a,{size:"small",align:"center",children:"Amount"})]})}),Object(K.jsx)(R.a,{children:T&&(null===T||void 0===T?void 0:T.length)>0&&(null===T||void 0===T?void 0:T.map((function(e,t){var i,n,a;return Object(K.jsxs)(I.a,{children:[Object(K.jsx)(U.a,{size:"small",align:"center",children:null!==e&&void 0!==e&&null!==(i=e.data)&&void 0!==i&&i.timestamp?M()(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.timestamp.toDate()).format("DD-MM-YYYY HH:mm:ss"):""}),Object(K.jsx)(U.a,{size:"small",align:"center",children:null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.amount})]},t)})))})]})})})]})]}),Object(K.jsx)(C.a,{children:Object(K.jsx)(r.a,{variant:"outlined",color:"error",onClick:function(){return i({open:!1})},children:"Close"})})]})}var X=i(1588),$=i.n(X);function _(e){var t=e.state,i=e.setState,l=e.categoryList,d=e.companyId,j=e.dialogType,b=e.fetchData,p=Object(g.b)().enqueueSnackbar,m=Object(y.b)(),x=t.id,P=t.sku,w=t.model,k=(t.category,t.size,t.materials,t.color),C=t.stockHistory,z=t.allInventoryItemTransactions,A=t.qty,D=t.qtySold,N=(t.qtyRemaining,t.unitPriceWithoutShipping),I=t.unitPriceWithShipping,U=(t.totalPriceWithShipping,t.unitSellingPrice),R=(t.totalSellingPrice,t.companyName,t.percentageProfit,t.percentageShipping),F=Object(v.useState)(!1),V=Object(a.a)(F,2),E=V[0],H=V[1],B=[{label:"SKU",name:"sku",type:"text",required:!0},{type:"divider"},{label:"Model",name:"model",type:"text",required:!1},{label:"Category",name:"category",type:"autocomplete",required:!1},{label:"Size",name:"size",type:"text",required:!1},{label:"Materials",name:"materials",type:"text",required:!1},{label:"Color",name:"color",type:"text",required:!1},{label:"Company name",name:"companyName",type:"text",required:!1},{type:"divider"},{label:"Stock Quantity",name:"qty",type:"number",required:!1},{label:"Quantity sold",name:"qtySold",type:"number",required:!1},{label:"Quantity remaining",name:"qtyRemaining",type:"number",readOnly:!0},{type:"divider"},{label:"Total Amount Received (exclu. VAT)",name:"totalAmountReceivedWithoutVAT",type:"text",readOnly:!0},{label:"Total Amount Received (Inclu. VAT)",name:"totalAmountReceivedWithVAT",type:"text",readOnly:!0},{label:"View recent transactions",name:"recentTransactions",type:"text",readOnly:!0},{type:"divider"},{label:"Unit price without shipping",name:"unitPriceWithoutShipping",type:"text",readOnly:!0},{label:"Unit price with shipping",name:"unitPriceWithShipping",type:"text",readOnly:!0},{label:"Total price with shipping",name:"totalPriceWithShipping",type:"text",readOnly:!0},{type:"divider"},{label:"Unit selling price",name:"unitSellingPrice",type:"text",required:!1},{label:"Total selling price",name:"totalSellingPrice",type:"text",readOnly:!0},{type:"divider"},{label:"Percentage profit",name:"percentageProfit",type:"text",required:!1},{label:"Percentage shipping",name:"percentageShipping",type:"text",required:!1}],L=Object(v.useState)(!1),Q=Object(a.a)(L,2),M=Q[0],G=Q[1],X=Object(v.useRef)(),_=Object(v.useRef)(),ee=Object(v.useRef)(),te=Object(v.useRef)();function ie(){return ie=Object(h.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w&&k?(m(Object(f.d)(!0)),t=S.b.collection("company").doc(d).collection("inventory").doc("documentIndex"),S.b.runTransaction((function(e){return e.get(t).then((function(i){if(!i.exists)return e.update(t,{documentIndex:1}),1;var n=Number(i.data().documentIndex)+1;return e.update(t,{documentIndex:n}),n}))})).then(function(){var e=Object(h.a)(O.a.mark((function e(t){var a,l,c,o,r,d,u,s,v;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=k,l=w.split(" "),c=function(e){var t;return(null===(t=e.match(/[a-zA-Z]/))||void 0===t?void 0:t[0])||""},o="",r=0;r<l.length&&o.length<2;r++)(d=c(l[r]))&&(o+=d);u=a.slice(-1),s=Number(t).toString().padStart(3,"0"),v="".concat(o.toUpperCase()).concat(s).concat(u.toUpperCase()),i((function(e){return Object(n.a)(Object(n.a)({},e),{},{sku:v})})),m(Object(f.d)(!1));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){p("Error occured while generating sku code : ".concat(null===e||void 0===e?void 0:e.message),{variant:"error"}),m(Object(f.d)(!1))}))):p("Please fill in the fields Model and Color in order to generate the SKU Code.",{variant:"warning"});case 1:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}function ne(){return(ne=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(Object(f.d)(!0)),e.next=3,S.b.collection("company").doc(d).collection("inventory").where("sku","==",P).get().then((function(e){var t;(null===e||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.length)>0?(p("The SKU code you entered is already present in the database.",{variant:"error"}),m(Object(f.d)(!1))):(p("SKU code is valid and is not present in database."),m(Object(f.d)(!1)))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(v.useEffect)((function(){X.current()}),[A,D]),Object(v.useEffect)((function(){_.current()}),[N,R]),Object(v.useEffect)((function(){ee.current()}),[I,A]),Object(v.useEffect)((function(){te.current()}),[U,A]),X.current=function(){var e=Number(A||0)-Number(D||0);i((function(t){return Object(n.a)(Object(n.a)({},t),{},{qtyRemaining:e})}))},_.current=function(){var e=Number(R||0)*Number(N||0);i((function(t){return Object(n.a)(Object(n.a)({},t),{},{unitPriceWithShipping:e.toFixed(2)})}))},ee.current=function(){var e=Number(A||0)*Number(I||0);i((function(t){return Object(n.a)(Object(n.a)({},t),{},{totalPriceWithShipping:e.toFixed(2)})}))},te.current=function(){var e=Number(A||0)*Number(U||0);i((function(t){return Object(n.a)(Object(n.a)({},t),{},{totalSellingPrice:e.toFixed(2)})}))},Object(K.jsxs)(c.a,{container:!0,spacing:3,children:[B&&(null===B||void 0===B?void 0:B.map((function(e){return"divider"===(null===e||void 0===e?void 0:e.type)?Object(K.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(K.jsx)(W.a,{})}):Object(K.jsx)(c.a,{item:!0,xs:12,md:"sku"===(null===e||void 0===e?void 0:e.name)?5:4,children:"recentTransactions"===(null===e||void 0===e?void 0:e.name)?Object(K.jsx)(K.Fragment,{children:z&&(null===z||void 0===z?void 0:z.length)>0?Object(K.jsx)(T.a,{title:"View all transactions made for this item.",children:Object(K.jsx)(r.a,{variant:"contained",color:"info",onClick:function(){return G(!0)},fullWidth:!0,children:"View all recent transactions"})}):Object(K.jsx)(K.Fragment,{})}):"totalAmountReceivedWithoutVAT"===(null===e||void 0===e?void 0:e.name)||"totalAmountReceivedWithVAT"===(null===e||void 0===e?void 0:e.name)?Object(K.jsxs)(o.a,{spacing:2,direction:"row",alignItems:"center",sx:{whiteSpace:"nowrap"},children:[Object(K.jsx)(s.a,{variant:"outlined",size:"small",required:(null===e||void 0===e?void 0:e.required)||!1,fullWidth:!0,name:null===e||void 0===e?void 0:e.name,label:null===e||void 0===e?void 0:e.label,type:"text",id:null===e||void 0===e?void 0:e.name,value:t[null===e||void 0===e?void 0:e.name]||"0",onChange:function(t){i((function(i){return Object(n.a)(Object(n.a)({},i),{},Object(q.a)({},null===e||void 0===e?void 0:e.name,t.target.value))}))},readOnly:null===e||void 0===e?void 0:e.readOnly,disabled:"view"===j}),Object(K.jsx)(r.a,{variant:"contained",color:"warning",startIcon:Object(K.jsx)($.a,{}),onClick:function(){H({open:!0,type:null===e||void 0===e?void 0:e.name,typeLabel:null===e||void 0===e?void 0:e.label,companyId:d,inventoryId:x})},children:"view"===j?"View":"Set up"})]}):"qtySold"===(null===e||void 0===e?void 0:e.name)||"qty"===(null===e||void 0===e?void 0:e.name)||"qtyRemaining"===(null===e||void 0===e?void 0:e.name)?Object(K.jsx)(o.a,{spacing:2,direction:"row",alignItems:"center",sx:{whiteSpace:"nowrap"},children:Object(K.jsx)(s.a,{variant:"outlined",size:"small",required:(null===e||void 0===e?void 0:e.required)||!1,fullWidth:!0,name:null===e||void 0===e?void 0:e.name,label:null===e||void 0===e?void 0:e.label,type:"text",id:null===e||void 0===e?void 0:e.name,value:t[null===e||void 0===e?void 0:e.name]||"0",onChange:function(t){i((function(i){return Object(n.a)(Object(n.a)({},i),{},Object(q.a)({},null===e||void 0===e?void 0:e.name,t.target.value))}))},readOnly:null===e||void 0===e?void 0:e.readOnly,disabled:"view"===j})}):"sku"===(null===e||void 0===e?void 0:e.name)?Object(K.jsxs)(o.a,{spacing:2,direction:"row",alignItems:"center",sx:{whiteSpace:"nowrap"},children:[Object(K.jsx)(s.a,{variant:"outlined",size:"small",required:(null===e||void 0===e?void 0:e.required)||!1,fullWidth:!0,name:null===e||void 0===e?void 0:e.name,label:null===e||void 0===e?void 0:e.label,type:"text",id:null===e||void 0===e?void 0:e.name,value:t[null===e||void 0===e?void 0:e.name]||"",onChange:function(t){i((function(i){return Object(n.a)(Object(n.a)({},i),{},Object(q.a)({},null===e||void 0===e?void 0:e.name,t.target.value))}))},readOnly:null===e||void 0===e?void 0:e.readOnly,disabled:"view"===j}),Object(K.jsx)(T.a,{title:"Generate SKU code based on the model and colour you entered.",children:Object(K.jsx)(r.a,{variant:"contained",color:"primary",onClick:function(){return function(){return ie.apply(this,arguments)}()},sx:{width:"150px"},disabled:P||"view"===j,children:"Auto-SKU"})}),Object(K.jsx)(T.a,{title:"Check if the SKU code you entered is already present in the database.",children:Object(K.jsx)(r.a,{variant:"contained",color:"primary",onClick:function(){return function(){return ne.apply(this,arguments)}()},sx:{width:"150px"},disabled:!P||"view"===j,children:"Check-SKU"})})]}):"text"===(null===e||void 0===e?void 0:e.type)||"number"===(null===e||void 0===e?void 0:e.type)?Object(K.jsx)(s.a,{variant:"outlined",size:"small",required:(null===e||void 0===e?void 0:e.required)||!1,fullWidth:!0,name:null===e||void 0===e?void 0:e.name,label:null===e||void 0===e?void 0:e.label,type:"text",id:null===e||void 0===e?void 0:e.name,value:t[null===e||void 0===e?void 0:e.name]||"",onChange:function(t){if("unitSellingPrice"===(null===e||void 0===e?void 0:e.name)){var a=Number(t.target.value||0)/Number(I||0);i((function(e){return Object(n.a)(Object(n.a)({},e),{},{unitSellingPrice:t.target.value,percentageProfit:a.toFixed(2)})}))}else if("percentageProfit"===(null===e||void 0===e?void 0:e.name)){var l=Number(t.target.value||0)*Number(I||0);i((function(e){return Object(n.a)(Object(n.a)({},e),{},{percentageProfit:t.target.value,unitSellingPrice:l.toFixed(2)})}))}else i((function(i){return Object(n.a)(Object(n.a)({},i),{},Object(q.a)({},null===e||void 0===e?void 0:e.name,t.target.value))}))},readOnly:null===e||void 0===e?void 0:e.readOnly,disabled:"view"===j}):"autocomplete"===(null===e||void 0===e?void 0:e.type)?Object(K.jsx)(u.a,{size:"small",fullWidth:!0,value:t[null===e||void 0===e?void 0:e.name]||null,onChange:function(t,a,l){i("removeOption"!==l&&"clear"!==l&&a?function(t){return Object(n.a)(Object(n.a)({},t),{},Object(q.a)({},null===e||void 0===e?void 0:e.name,a))}:function(t){return Object(n.a)(Object(n.a)({},t),{},Object(q.a)({},null===e||void 0===e?void 0:e.name,null))})},options:l||[],renderInput:function(t){return Object(K.jsx)(s.a,Object(n.a)(Object(n.a)({},t),{},{variant:"outlined",label:null===e||void 0===e?void 0:e.label,fullWidth:!0,disabled:"view"===j}))},getOptionLabel:function(e){return null===e||void 0===e?void 0:e.title},disabled:"view"===j}):Object(K.jsx)(K.Fragment,{})})}))),Object(K.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(K.jsx)(W.a,{})}),Object(K.jsx)(Y,{stockHistory:C,state:t,setState:i,dialogType:j}),M?Object(K.jsx)(J,{open:M,setOpen:G,allTransactions:z}):Object(K.jsx)(K.Fragment,{}),E?Object(K.jsx)(Z,{data:E,setData:H,dialogType:j,fetchData:b,setState:i}):Object(K.jsx)(K.Fragment,{})]})}var ee=function(e){var t=e.dialogType,i=e.openDialog,l=e.handleCloseDialog,c=e.state,d=e.setState,u=e.fetchData,s=e.companyId,j=c.id,b=c.sku,p=c.model,m=c.category,x=c.size,q=c.materials,T=c.color,z=c.stockHistory,A=c.qty,D=c.qtySold,N=c.qtyRemaining,I=c.unitPriceWithoutShipping,U=c.unitPriceWithShipping,R=c.totalPriceWithShipping,F=c.unitSellingPrice,V=c.totalSellingPrice,E=c.companyName,H=c.percentageProfit,B=c.percentageShipping,L=Object(g.b)().enqueueSnackbar,Q=Object(y.b)(),M=Object(v.useState)([]),Y=Object(a.a)(M,2),J=Y[0],G=Y[1],Z=Object(v.useRef)();function X(){return(X=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=4;break}return Q(Object(f.d)(!0)),e.next=4,S.b.collection("company").doc(s).collection("category").orderBy("title").get().then((function(e){var t;if((null===e||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.length)>0){var i=e.docs.map((function(e){var t;return{id:e.id,data:Object(n.a)({},e.data()),title:(null===e||void 0===e||null===(t=e.data())||void 0===t?void 0:t.title)||""}}));G(i),Q(Object(f.d)(!1))}else G([]),Q(Object(f.d)(!1))})).catch((function(e){L("Error occured while fetching categories: ".concat(null===e||void 0===e?void 0:e.message),{variant:"error"}),Q(Object(f.d)(!1))}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(v.useEffect)((function(){Z.current()}),[]),Z.current=function(){return X.apply(this,arguments)};var $=function(e){e.preventDefault(),Q(Object(f.d)(!0)),b?"add"===t?function(){ee.apply(this,arguments)}():"update"===t&&function(){te.apply(this,arguments)}():(L("Please provide a SKU code",{variant:"error"}),Q(Object(f.d)(!1)))};function ee(){return(ee=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(Object(f.d)(!0)),e.next=3,S.b.collection("company").doc(s).collection("inventory").add({sku:b||"",category:m||null,model:p||"",size:x||"",materials:q||"",color:T||"",stockHistory:z||[],qty:A||"",qtySold:D||"",qtyRemaining:N||"",unitPriceWithoutShipping:I||"",unitPriceWithShipping:U||"",totalPriceWithShipping:R||"",unitSellingPrice:F||"",totalSellingPrice:V||"",companyName:E||"",percentageProfit:H||"",percentageShipping:B||""}).then(Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L("Category added successfully"),e.next=3,u();case 3:l(),Q(Object(f.d)(!1));case 5:case"end":return e.stop()}}),e)})))).catch((function(e){L("Error occured while adding category: ".concat(null===e||void 0===e?void 0:e.message),{variant:"error"}),Q(Object(f.d)(!1))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(Object(f.d)(!0)),e.next=3,S.b.collection("company").doc(s).collection("inventory").doc(j).set({id:j,sku:b||"",category:m||null,model:p||"",size:x||"",materials:q||"",color:T||"",stockHistory:z||[],qty:A||"",qtySold:D||"",qtyRemaining:N||"",unitPriceWithoutShipping:I||"",unitPriceWithShipping:U||"",totalPriceWithShipping:R||"",unitSellingPrice:F||"",totalSellingPrice:V||"",companyName:E||"",percentageProfit:H||"",percentageShipping:B||""},{merge:!0}).then(Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L("Category updated successfully"),e.next=3,u();case 3:l(),Q(Object(f.d)(!1));case 5:case"end":return e.stop()}}),e)})))).catch((function(e){L("Error occured while updating category: ".concat(null===e||void 0===e?void 0:e.message),{variant:"error"}),Q(Object(f.d)(!1))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(K.jsx)(K.Fragment,{children:Object(K.jsxs)(P.a,{open:i,maxWidth:"lg",fullWidth:!0,children:[Object(K.jsx)(w.a,{id:"alert-dialog-title",children:"view"===t?"View item":"add"===t?"Create item":"Update item"}),Object(K.jsxs)(k.a,{children:[Object(K.jsx)(W.a,{}),Object(K.jsx)("br",{}),Object(K.jsx)(_,{state:c,setState:d,categoryList:J,companyId:s,dialogType:t,fetchData:u})]}),Object(K.jsx)(C.a,{children:Object(K.jsxs)(o.a,{spacing:2,direction:"row",children:["view"!==t?Object(K.jsx)(r.a,{onClick:function(e){return $(e)},color:"primary",variant:"contained",children:t&&"add"===t?"Add":"Update"}):Object(K.jsx)(K.Fragment,{}),Object(K.jsx)(r.a,{onClick:function(){return l()},color:"error",variant:"outlined",children:"Cancel"})]})})]})})},te=Object(v.lazy)((function(){return Promise.all([i.e(1),i.e(15)]).then(i.bind(null,1547))}));function ie(){var e=Object(y.b)(),t=Object(g.b)().enqueueSnackbar,i=Object(y.c)(x.b).companyDetails,l=Object(v.useState)(!1),o=Object(a.a)(l,2),r=o[0],d=o[1],u=Object(v.useState)(""),s=Object(a.a)(u,2),j=s[0],b=s[1],p=Object(v.useState)({sku:"",model:"",category:null,size:"",materials:"",color:"",stockHistory:[],qty:"",qtySold:"",qtyRemaining:"",unitPriceWithoutShipping:"",unitPriceWithShipping:"",totalPriceWithShipping:"",unitSellingPrice:"",totalSellingPrice:"",companyName:"",percentageProfit:"",percentageShipping:"",allInventoryItemTransactions:[]}),m=Object(a.a)(p,2),P=m[0],w=m[1],k=Object(v.useState)([]),W=Object(a.a)(k,2),C=W[0],q=W[1],T=Object(v.useState)(null),z=Object(a.a)(T,2),A=(z[0],z[1]),D=Object(v.useState)(!0),N=Object(a.a)(D,2),I=(N[0],N[1]),U=Object(v.useRef)();Object(v.useEffect)((function(){U.current()}),[]);var R=function(){var a=Object(h.a)(O.a.mark((function a(){return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e(Object(f.d)(!0)),a.next=3,S.b.collection("company").doc(null===i||void 0===i?void 0:i.id).collection("inventory").orderBy("model").limit(50).get().then((function(t){var i;if((null===t||void 0===t||null===(i=t.docs)||void 0===i?void 0:i.length)>0){var a,l=null===t||void 0===t?void 0:t.docs[(null===t||void 0===t?void 0:t.docs.length)-1];A(l);var c=[];t.docs.forEach((function(e){var t,i,a,l,o,r,d,u,s,v,j,b,p,h,m,O,g,y,x,f,S;"documentIndex"!==(null===e||void 0===e?void 0:e.id)&&c.push({id:e.id,data:Object(n.a)({},e.data()),sku:(null===(t=e.data())||void 0===t?void 0:t.sku)||"",category:JSON.stringify((null===(i=e.data())||void 0===i?void 0:i.category)||null),model:(null===(a=e.data())||void 0===a?void 0:a.model)||"",size:(null===(l=e.data())||void 0===l?void 0:l.size)||"",materials:(null===(o=e.data())||void 0===o?void 0:o.materials)||"",color:(null===(r=e.data())||void 0===r?void 0:r.color)||"",stockHistory:(null===(d=e.data())||void 0===d?void 0:d.stockHistory)||[],qty:(null===(u=e.data())||void 0===u?void 0:u.qty)||"",qtySold:(null===(s=e.data())||void 0===s?void 0:s.qtySold)||"",qtyRemaining:(null===(v=e.data())||void 0===v?void 0:v.qtyRemaining)||"",unitPriceWithoutShipping:(null===(j=e.data())||void 0===j?void 0:j.unitPriceWithoutShipping)||"",unitPriceWithShipping:(null===(b=e.data())||void 0===b?void 0:b.unitPriceWithShipping)||"",totalPriceWithShipping:(null===(p=e.data())||void 0===p?void 0:p.totalPriceWithShipping)||"",unitSellingPrice:(null===(h=e.data())||void 0===h?void 0:h.unitSellingPrice)||"",totalSellingPrice:(null===(m=e.data())||void 0===m?void 0:m.totalSellingPrice)||"",companyName:(null===(O=e.data())||void 0===O?void 0:O.companyName)||"",percentageProfit:(null===(g=e.data())||void 0===g?void 0:g.percentageProfit)||"",percentageShipping:(null===(y=e.data())||void 0===y?void 0:y.percentageShipping)||"",allInventoryItemTransactions:(null===e||void 0===e||null===(x=e.data())||void 0===x?void 0:x.allInventoryItemTransactions)||[],totalAmountReceivedWithoutVAT:(null===(f=e.data())||void 0===f?void 0:f.totalAmountReceivedWithoutVAT)||"",totalAmountReceivedWithVAT:(null===(S=e.data())||void 0===S?void 0:S.totalAmountReceivedWithVAT)||""})})),q(c),50===(null===t||void 0===t||null===(a=t.docs)||void 0===a?void 0:a.length)&&I(!0),e(Object(f.d)(!1))}else I(!1),q([]),A(null),e(Object(f.d)(!1))})).catch((function(i){t("Error occured while fetching inventory items: ".concat(null===i||void 0===i?void 0:i.message),{variant:"error"}),e(Object(f.d)(!1))}));case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();U.current=R;var F=function(){var n=Object(h.a)(O.a.mark((function n(a){return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(Object(f.d)(!0)),n.next=3,S.b.collection("company").doc(null===i||void 0===i?void 0:i.id).collection("inventory").doc(a).delete().then(Object(h.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:R(),e(Object(f.d)(!1));case 2:case"end":return t.stop()}}),t)})))).catch((function(i){t("Error occured while deleting a item: ".concat(null===i||void 0===i?void 0:i.message),{variant:"error"}),e(Object(f.d)(!1))}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();function V(){w({id:"",sku:"",category:null,model:"",size:"",materials:"",color:"",stockHistory:[],qty:"",qtySold:"",qtyRemaining:"",unitPriceWithoutShipping:"",unitPriceWithShipping:"",totalPriceWithShipping:"",unitSellingPrice:"",totalSellingPrice:"",companyName:"",percentageProfit:"",percentageShipping:"",allInventoryItemTransactions:[],totalAmountReceivedWithoutVAT:"",totalAmountReceivedWithVAT:""}),d(!1),b("")}return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(c.a,{container:!0,spacing:3,children:Object(K.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(K.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(K.jsx)(v.Suspense,{fallback:Object(K.jsx)("p",{children:"Loading..."}),children:Object(K.jsx)(te,{companyId:null===i||void 0===i?void 0:i.id,type:"inventory",headers:[{id:"list",label:"List"},{id:"view",label:"View"},{id:"update",label:"Update"},{id:"delete",label:"Delete"},{id:"sku",label:"SKU"},{id:"category",label:"Category"},{id:"model",label:"Model"},{id:"size",label:"Size"},{id:"materials",label:"Material"},{id:"color",label:"Color"},{id:"qty",label:"Quantity"},{id:"qtySold",label:"Quantity Sold"},{id:"qtyRemaining",label:"Quantity Remaining"},{id:"unitPriceWithoutShipping",label:"Unit price without shipping"},{id:"unitPriceWithShipping",label:"Unit price with shipping"},{id:"totalPriceWithShipping",label:"Total price with shipping"},{id:"unitSellingPrice",label:"Unit selling price"},{id:"totalSellingPrice",label:"Total Selling price"},{id:"companyName",label:"Company"},{id:"percentageProfit",label:"% Profit"},{id:"percentageShipping",label:"% Shipping"}],aCollection:C,addBtnDisplay:!0,addBtnLabel:"Create an item",addBtnFunc:function(){b("add"),d(!0),w(Object(n.a)(Object(n.a)({},P),{},{id:"",sku:"",category:null,model:"",size:"",materials:"",color:"",stockHistory:[],qty:"",qtySold:"",qtyRemaining:"",unitPriceWithoutShipping:"",unitPriceWithShipping:"",totalPriceWithShipping:"",unitSellingPrice:"",totalSellingPrice:"",companyName:"",percentageProfit:"",percentageShipping:"",allInventoryItemTransactions:[],totalAmountReceivedWithoutVAT:"",totalAmountReceivedWithVAT:""}))},openDialog:r,handleCloseDialog:V,emptyColMsg:"Sorry, not a single inventory item has been created yet. Please create a inventory item.",viewOption:!0,viewBtnFunc:function(e,t){b("view"),d(!0),w(Object(n.a)(Object(n.a)({},t),{},{id:e}))},updateBtnDisplay:!0,deleteBtnDisplay:!0,updateBtnFunc:function(e,t){b("update"),d(!0),w({id:e,sku:(null===t||void 0===t?void 0:t.sku)||"",category:(null===t||void 0===t?void 0:t.category)||null,model:(null===t||void 0===t?void 0:t.model)||"",size:(null===t||void 0===t?void 0:t.size)||"",materials:(null===t||void 0===t?void 0:t.materials)||"",color:(null===t||void 0===t?void 0:t.color)||"",stockHistory:(null===t||void 0===t?void 0:t.stockHistory)||[],qty:(null===t||void 0===t?void 0:t.qty)||"",qtySold:(null===t||void 0===t?void 0:t.qtySold)||"",qtyRemaining:(null===t||void 0===t?void 0:t.qtyRemaining)||"",unitPriceWithoutShipping:(null===t||void 0===t?void 0:t.unitPriceWithoutShipping)||"",unitPriceWithShipping:(null===t||void 0===t?void 0:t.unitPriceWithShipping)||"",totalPriceWithShipping:(null===t||void 0===t?void 0:t.totalPriceWithShipping)||"",unitSellingPrice:(null===t||void 0===t?void 0:t.unitSellingPrice)||"",totalSellingPrice:(null===t||void 0===t?void 0:t.totalSellingPrice)||"",companyName:(null===t||void 0===t?void 0:t.companyName)||"",percentageProfit:(null===t||void 0===t?void 0:t.percentageProfit)||"",percentageShipping:(null===t||void 0===t?void 0:t.percentageShipping)||"",allInventoryItemTransactions:(null===t||void 0===t?void 0:t.allInventoryItemTransactions)||[],totalAmountReceivedWithoutVAT:(null===t||void 0===t?void 0:t.totalAmountReceivedWithoutVAT)||"",totalAmountReceivedWithVAT:(null===t||void 0===t?void 0:t.totalAmountReceivedWithVAT)||""})},deleteBtnFunc:F})})})})}),r?Object(K.jsx)(ee,{dialogType:j,openDialog:r,handleCloseDialog:V,state:P,setState:w,fetchData:R,companyId:null===i||void 0===i?void 0:i.id}):Object(K.jsx)(K.Fragment,{})]})}var ne=i(1533),ae=i.n(ne),le=i(49),ce=i(65);var oe=function(e){var t=e.dialogType,i=e.openDialog,a=e.handleCloseDialog,l=e.state,d=e.setState,u=e.fetchData,v=e.companyId,j=l.id,b=l.title,p=Object(g.b)().enqueueSnackbar,m=Object(y.b)(),x=function(e){e.preventDefault(),m(Object(f.d)(!0)),b?"add"===t?function(){q.apply(this,arguments)}():"update"===t&&function(){T.apply(this,arguments)}():(p("Please provide a title",{variant:"error"}),m(Object(f.d)(!1)))};function q(){return(q=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(Object(f.d)(!0)),e.next=3,S.b.collection("company").doc(v).collection("category").add({title:b}).then(Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p("Category added successfully"),e.next=3,u();case 3:a(),m(Object(f.d)(!1));case 5:case"end":return e.stop()}}),e)})))).catch((function(e){p("Error occured while adding category: ".concat(null===e||void 0===e?void 0:e.message),{variant:"error"}),m(Object(f.d)(!1))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(Object(f.d)(!0)),e.next=3,S.b.collection("company").doc(v).collection("category").doc(j).set({title:b},{merge:!0}).then(Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p("Category updated successfully"),e.next=3,u();case 3:a(),m(Object(f.d)(!1));case 5:case"end":return e.stop()}}),e)})))).catch((function(e){p("Error occured while updating category: ".concat(null===e||void 0===e?void 0:e.message),{variant:"error"}),m(Object(f.d)(!1))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(K.jsx)(K.Fragment,{children:Object(K.jsxs)(P.a,{open:i,onClose:a,maxWidth:"sm",fullWidth:!0,children:[Object(K.jsx)(w.a,{id:"alert-dialog-title",children:t&&"add"===t?"Create item":"Update item"}),Object(K.jsxs)(k.a,{children:[Object(K.jsx)(W.a,{}),Object(K.jsx)("br",{}),Object(K.jsx)(c.a,{container:!0,spacing:3,children:Object(K.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(K.jsx)(s.a,{variant:"outlined",size:"small",required:!0,fullWidth:!0,name:"title",label:"Title",type:"text",id:"title",value:b||"",onChange:function(e){d((function(t){return Object(n.a)(Object(n.a)({},t),{},{title:e.target.value})}))}})})})]}),Object(K.jsx)(C.a,{children:Object(K.jsxs)(o.a,{spacing:2,direction:"row",children:[Object(K.jsx)(r.a,{onClick:function(e){return x(e)},color:"primary",variant:"contained",children:t&&"add"===t?"Add":"Update"}),Object(K.jsx)(r.a,{onClick:function(){return a()},color:"error",variant:"outlined",children:"Cancel"})]})})]})})},re=Object(v.lazy)((function(){return Promise.all([i.e(1),i.e(15)]).then(i.bind(null,1547))}));function de(){var e=Object(y.b)(),t=Object(g.b)().enqueueSnackbar,i=Object(y.c)(x.b).companyDetails,l=Object(v.useState)(!1),o=Object(a.a)(l,2),r=o[0],d=o[1],u=Object(v.useState)(""),s=Object(a.a)(u,2),j=s[0],b=s[1],p=Object(v.useState)({title:""}),m=Object(a.a)(p,2),P=m[0],w=m[1],k=Object(v.useState)([]),W=Object(a.a)(k,2),C=W[0],q=W[1],T=Object(v.useRef)();Object(v.useEffect)((function(){T.current()}),[]);var z=function(){var a=Object(h.a)(O.a.mark((function a(){return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e(Object(f.d)(!0)),a.next=3,S.b.collection("company").doc(null===i||void 0===i?void 0:i.id).collection("category").orderBy("title").get().then((function(t){var i;if((null===t||void 0===t||null===(i=t.docs)||void 0===i?void 0:i.length)>0){var a=t.docs.map((function(e){var t;return{id:e.id,data:Object(n.a)({},e.data()),title:(null===e||void 0===e||null===(t=e.data())||void 0===t?void 0:t.title)||""}}));q(a),e(Object(f.d)(!1))}else q([]),e(Object(f.d)(!1))})).catch((function(i){t("Error occured while fetching categories: ".concat(null===i||void 0===i?void 0:i.message),{variant:"error"}),e(Object(f.d)(!1))}));case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();T.current=z;var A=function(){var n=Object(h.a)(O.a.mark((function n(a){return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(Object(f.d)(!0)),n.next=3,S.b.collection("company").doc(null===i||void 0===i?void 0:i.id).collection("category").doc(a).delete().then(Object(h.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:z(),e(Object(f.d)(!1));case 2:case"end":return t.stop()}}),t)})))).catch((function(i){t("Error occured while deleting a category: ".concat(null===i||void 0===i?void 0:i.message),{variant:"error"}),e(Object(f.d)(!1))}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();function D(){w({id:"",category:""}),d(!1),b("")}return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(c.a,{container:!0,spacing:3,children:Object(K.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(K.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(K.jsx)(v.Suspense,{fallback:Object(K.jsx)("p",{children:"Loading..."}),children:Object(K.jsx)(re,{companyId:null===i||void 0===i?void 0:i.id,type:"category",headers:[{id:"list",label:"List"},{id:"update",label:"Update"},{id:"delete",label:"Delete"},{id:"title",label:"Title"}],aCollection:C,addBtnDisplay:!0,addBtnLabel:"Create an category",addBtnFunc:function(){b("add"),d(!0),w(Object(n.a)(Object(n.a)({},P),{},{id:"",title:""}))},openDialog:r,handleCloseDialog:D,emptyColMsg:"Sorry, not a single category has been created yet. Please create a category.",updateBtnDisplay:!0,deleteBtnDisplay:!0,updateBtnFunc:function(e,t){b("update"),d(!0),w({id:e,title:(null===t||void 0===t?void 0:t.title)||""})},deleteBtnFunc:A})})})})}),r?Object(K.jsx)(oe,{dialogType:j,openDialog:r,handleCloseDialog:D,state:P,setState:w,fetchData:z,companyId:null===i||void 0===i?void 0:i.id}):Object(K.jsx)(K.Fragment,{})]})}var ue=Object(v.lazy)((function(){return i.e(3).then(i.bind(null,1555))}));function se(){var e=Object(b.a)().themeStretch,t=Object(le.g)(),i=Object(y.c)(x.b).companyDetails,p=Object(v.useState)(null),h=Object(a.a)(p,2),m=h[0],O=h[1];return Object(K.jsx)(K.Fragment,{children:Object(K.jsx)(j.a,{title:"Inventory",children:Object(K.jsx)(l.a,{maxWidth:!e&&"xl",children:Object(K.jsxs)(c.a,{container:!0,spacing:3,children:[Object(K.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(K.jsxs)(o.a,{spacing:3,direction:"row",alignItems:"center",children:[Object(K.jsx)(r.a,{startIcon:Object(K.jsx)(ae.a,{}),variant:"outlined",color:"primary",onClick:function(){return t(ce.b.general.app1)},children:"Back"}),Object(K.jsx)(d.a,{variant:"h3",children:"Inventory section"})]})}),Object(K.jsx)(v.Suspense,{fallback:Object(K.jsx)(K.Fragment,{}),children:Object(K.jsx)(ue,{type:"inventory"})}),Object(K.jsx)(c.a,{item:!0,xs:12,md:4,children:Object(K.jsx)(u.a,{size:"small",label:"Please select table",id:"table-drop-down",options:[{collectionName:"inventory",title:"Inventory"},{collectionName:"category",title:"Category"}],value:m||null,renderInput:function(e){return Object(K.jsx)(s.a,Object(n.a)(Object(n.a)({},e),{},{label:"Please select table"}))},onChange:function(e,t,i){"removeOption"!==i&&"clear"!==i&&t?O(t):"removeOption"!==i&&"clear"!==i||O(null)},getOptionLabel:function(e){return(null===e||void 0===e?void 0:e.title)||""},renderOption:function(e,t){return Object(v.createElement)("li",Object(n.a)(Object(n.a)({},e),{},{key:null===t||void 0===t?void 0:t.collectionName}),Object(K.jsx)("span",{children:(null===t||void 0===t?void 0:t.title)||""}))},disabled:!i})}),m&&"inventory"===(null===m||void 0===m?void 0:m.collectionName)?Object(K.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(K.jsx)(ie,{})}):m&&"category"===(null===m||void 0===m?void 0:m.collectionName)?Object(K.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(K.jsx)(de,{})}):Object(K.jsx)(K.Fragment,{})]})})})})}}}]);
//# sourceMappingURL=88.30b06e05.chunk.js.map