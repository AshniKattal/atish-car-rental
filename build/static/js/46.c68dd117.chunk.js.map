{"version":3,"sources":["pages/dashboard/client-survey/CreateOrUpdateClientSurveyDialog.js","../node_modules/react-signature-canvas/build/index.js","../node_modules/signature_pad/dist/signature_pad.mjs","../node_modules/trim-canvas/build/index.js"],"names":["ContractAgreementForm","lazy","SurveyServiceReportForm","CreateOrUpdateClientSurveyDialog","dialogType","openDialog","handleCloseDialog","surveyDetail","setSurveyDetail","fetchClientSurvey","companyId","documentType","clientList","logo","companyDetails","user","useAuth","dispatch","useDispatch","enqueueSnackbar","useSnackbar","useState","clientDocumentObjectSelected","setClientDocumentObjectSelected","confirmationToCancelDialog","setConfirmationToCancelDialog","sigCanvasInstance","setSigCanvasInstance","sigClientCanvasInstance","setSigClientCanvasInstance","isCanvasReady","setIsCanvasReady","isCanvasClientReady","setIsCanvasClientReady","temp_CanvasSigRef","useRef","temp_CanvasSigClientRef","useEffect","current","preparedBy","canvas","getCanvas","ctx","getContext","img","Image","crossOrigin","src","onload","scale","Math","min","width","height","imgWidth","imgHeight","x","y","drawImage","dataUrl","toDataURL","clear","fromDataURL","clientSig","a","setLoading","verifyFields","dataToAdd","clientId","id","createdByUserId","createdByUserEmail","email","preparedByURL","getTrimmedCanvas","clientURL","storageRefPreparedBy","storage","ref","child","moment","Date","format","customerName","now","storageRefClient","putString","then","console","log","getDownloadURL","downloadURL","downloadURLClient","collectionName","documentDocRef","db","collection","doc","runTransaction","transaction","get","sfDoc","exists","update","documentIndex","newDocumentNumber","Number","data","documentNumber","formatDocumentIdNumber","documentNumberDocString","set","status","dateCreated","firebase","firestore","Timestamp","fromDate","merge","title","catch","error","message","variant","err","dataToUpdate","updatedByUserId","updatedByUserEmail","address","fullWidth","maxWidth","open","sx","borderStyle","container","spacing","item","xs","md","ListboxProps","style","maxHeight","size","label","options","value","renderInput","params","InputLabelProps","required","onChange","e","reason","preventDefault","previous","getOptionLabel","option","fallback","signatureDate","seconds","toDate","newValue","inputFormat","preparedByName","alt","name","type","event","target","disabled","border","padding","borderRadius","penColor","canvasProps","className","onClick","margin","clientSigName","color","addSurvey","updateSurvey","t","n","r","module","exports","require","loaded","call","m","c","p","__esModule","default","indexOf","Object","prototype","hasOwnProperty","o","TypeError","i","ReferenceError","u","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","s","assign","arguments","length","key","l","d","h","g","this","Array","f","getPrototypeOf","apply","concat","_sigPad","_excludeOurProps","props","clearOnResize","_canvas","document","createElement","getSignaturePad","_checkClearOnResize","_resizeCanvas","max","window","devicePixelRatio","offsetWidth","offsetHeight","on","addEventListener","off","removeEventListener","isEmpty","fromData","toData","Component","propTypes","velocityFilterWeight","number","minWidth","minDistance","dotSize","oneOfType","func","string","throttle","onEnd","onBegin","object","bool","defaultProps","Point","time","getTime","Bezier","startPoint","control1","control2","endPoint","SignaturePad","self","opts","_strokeMoveUpdate","wait","context","args","result","timeout","later","leading","remaining","clearTimeout","trailing","setTimeout","_strokeUpdate","backgroundColor","_ctx","_handleMouseDown","which","_mouseButtonDown","_strokeBegin","_handleMouseMove","_handleMouseUp","_strokeEnd","_handleTouchStart","targetTouches","touch","changedTouches","_handleTouchMove","_handleTouchEnd","velocityFrom","start","distanceTo","sqrt","pow","equals","other","px","py","cx","_point","cy","xdiff","ydiff","c1","c2","end","fillStyle","clearRect","fillRect","_data","_reset","_isEmpty","_this","undefined","image","ratio","_toSVG","_len","_key","_handleMouseEvents","_handleTouchEvents","push","clientX","clientY","point","_createPoint","lastPointGroup","lastPoint","isLastPointTooClose","_addPoint","curve","widths","_drawCurve","canDrawCurve","points","_drawDot","msTouchAction","touchAction","_lastVelocity","_lastWidth","rect","getBoundingClientRect","left","top","unshift","_calculateCurveControlPoints","c3","_calculateCurveWidths","shift","s1","s2","s3","dx1","dy1","dx2","dy2","m1","m2","l1","l2","k","cm","tx","ty","velocity","newWidth","_strokeWidth","_drawPoint","moveTo","arc","PI","startWidth","endWidth","widthDelta","drawSteps","floor","beginPath","tt","ttt","uu","uuu","closePath","fill","_fromData","pointGroups","drawCurve","drawDot","group","j","rawPoint","_addPoint2","_this2","maxX","maxY","svg","createElementNS","setAttributeNS","path","isNaN","attr","toFixed","setAttribute","appendChild","circle","header","body","innerHTML","dummy","nodes","childNodes","cloneNode","btoa","_this3","getImageData","putImageData","red","green","blue","alpha"],"mappings":";odA0BMA,EAAwBC,gBAAK,kBAAM,yDACnCC,EAA0BD,gBAAK,kBAAM,mCAE5B,SAASE,EAAT,GAYX,IAAD,EAXDC,EAWC,EAXDA,WACAC,EAUC,EAVDA,WACAC,EASC,EATDA,kBACAC,EAQC,EARDA,aACAC,EAOC,EAPDA,gBACAC,EAMC,EANDA,kBACAC,EAKC,EALDA,UACAC,EAIC,EAJDA,aACAC,EAGC,EAHDA,WACAC,EAEC,EAFDA,KACAC,EACC,EADDA,eAEQC,EAASC,cAATD,KAEFE,EAAWC,cAETC,EAAoBC,cAApBD,gBAER,EACEE,mBAAS,MADX,mBAAOC,EAAP,KAAqCC,EAArC,KAGA,EACEF,oBAAS,GADX,mBAAOG,EAAP,KAAmCC,EAAnC,KAGA,GAAkDJ,mBAAS,MAA3D,qBAAOK,GAAP,MAA0BC,GAA1B,MAEA,GAA8DN,mBAAS,MAAvE,qBAAOO,GAAP,MAAgCC,GAAhC,MAEA,GAA0CR,oBAAS,GAAnD,qBAAOS,GAAP,MAAsBC,GAAtB,MAEA,GAAsDV,oBAAS,GAA/D,qBAAOW,GAAP,MAA4BC,GAA5B,MAEMC,GAAoBC,mBACpBC,GAA0BD,mBAEhCE,qBAAU,WACRH,GAAkBI,YACjB,CAAClC,EAAYsB,KAEhBW,qBAAU,WACRD,GAAwBE,YACvB,CAAClC,EAAYwB,KA4ChBM,GAAkBI,QA1ClB,WAEE,GAAIZ,KAAsBI,IAAgC,WAAf1B,GACzC,OAAIG,QAAJ,IAAIA,KAAcgC,WAAY,CAC5B,IAAMC,EAASd,GAAkBe,YAC3BC,EAAMF,EAAOG,WAAW,MAExBC,EAAM,IAAIC,MAChBD,EAAIE,YAAc,YAClBF,EAAIG,IAAJ,OAAUxC,QAAV,IAAUA,OAAV,EAAUA,EAAcgC,WACxBK,EAAII,OAAS,WAKX,IAAMC,EAAQC,KAAKC,IACjBX,EAAOY,MAAQR,EAAIQ,MACnBZ,EAAOa,OAAST,EAAIS,QAIhBC,EAAWV,EAAIQ,MAAQH,EACvBM,EAAYX,EAAIS,OAASJ,EAGzBO,EAAIhB,EAAOY,MAAQE,EACnBG,EAAIjB,EAAOa,OAASE,EAG1Bb,EAAIgB,UAAUd,EAAKY,EAAGC,EAAGH,EAAUC,GAEnC,IAAMI,EAAUnB,EAAOoB,YAGvBlC,GAAkBmC,QAClBnC,GAAkBoC,YAAYH,GAC9B5B,IAAiB,MAsDzBK,GAAwBE,QA9CxB,WAEE,GACEV,KACCI,IACc,WAAf5B,GAEA,OAAIG,QAAJ,IAAIA,KAAcwD,UAAW,CAC3B,IAAMvB,EAASZ,GAAwBa,YACjCC,EAAMF,EAAOG,WAAW,MAExBC,EAAM,IAAIC,MAChBD,EAAIE,YAAc,YAClBF,EAAIG,IAAJ,OAAUxC,QAAV,IAAUA,OAAV,EAAUA,EAAcwD,UACxBnB,EAAII,OAAS,WAKX,IAAMC,EAAQC,KAAKC,IACjBX,EAAOY,MAAQR,EAAIQ,MACnBZ,EAAOa,OAAST,EAAIS,QAIhBC,EAAWV,EAAIQ,MAAQH,EACvBM,EAAYX,EAAIS,OAASJ,EAGzBO,EAAIhB,EAAOY,MAAQE,EACnBG,EAAIjB,EAAOa,OAASE,EAG1Bb,EAAIgB,UAAUd,EAAKY,EAAGC,EAAGH,EAAUC,GAEnC,IAAMI,EAAUnB,EAAOoB,YAGvBhC,GAAwBiC,QACxBjC,GAAwBkC,YAAYH,GACpC1B,IAAuB,MApH9B,8CAwID,oCAAA+B,EAAA,sDACE/C,EAASgD,aAAW,IAEhBC,MACEC,EADc,aAEhBC,UAAsC,OAA5B9C,QAA4B,IAA5BA,OAAA,EAAAA,EAA8B+C,KAAM,GAC9CC,iBAAqB,OAAJvD,QAAI,IAAJA,OAAA,EAAAA,EAAMsD,KAAM,GAC7BE,oBAAwB,OAAJxD,QAAI,IAAJA,OAAA,EAAAA,EAAMyD,QAAS,IAChCjE,GAGDkE,EAAgB/C,GACjBgD,mBACAd,UAAU,aACTe,EAAY/C,GACb8C,mBACAd,UAAU,aAGPgB,EAAuBC,IAC1BC,MACAC,MAF0B,4BAGJC,IAAO,IAAIC,MAAQC,OACtC,cAJuB,YAKpBxE,EALoB,mBAMvBH,QANuB,IAMvBA,OANuB,EAMvBA,EAAc4E,aANS,kCAOCF,KAAKG,MAPN,SASvBC,EAAmBR,IACtBC,MACAC,MAFsB,4BAGAC,IAAO,IAAIC,MAAQC,OACtC,cAJmB,YAKhBxE,EALgB,mBAMnBH,QANmB,IAMnBA,OANmB,EAMnBA,EAAc4E,aANK,6BAOAF,KAAKG,MAPL,SAWzBR,EACGU,UAAUb,EAAe,YACzBc,MAAK,WACJC,QAAQC,IAAI,2CAGZb,EAAqBc,iBAAiBH,MAAK,SAACI,GAC1CxB,EAAS,2BAAQA,GAAR,IAAmB5B,WAAYoD,IAGxCN,EACGC,UAAUX,EAAW,YACrBY,MAAK,WACJC,QAAQC,IAAI,yCAGZJ,EACGK,iBACAH,KAFH,uCAEQ,WAAOK,GAAP,iBAAA5B,EAAA,sDACJG,EAAS,2BAAQA,GAAR,IAAmBJ,UAAW6B,IAEnCC,EAHA,OAGiBlF,QAHjB,IAGiBA,OAHjB,EAGiBA,EAAc0D,GAE/ByB,EAAiBC,IAClBC,WAAW,WACXC,IAAIvF,GACJsF,WAAWH,GACXI,IAAI,iBAEPF,IAAGG,gBAAe,SAACC,GACjB,OAAOA,EAAYC,IAAIN,GAAgBP,MAAK,SAACc,GAC3C,IAAKA,EAAMC,OAKT,OAHAH,EAAYI,OAAOT,EAAgB,CACjCU,cAAe,IAEV,EAGT,IAAIC,EACFC,OAAOL,EAAMM,OAAOH,eAAiB,EAIvC,OAHAL,EAAYI,OAAOT,EAAgB,CACjCU,cAAeC,IAEVA,QAGRlB,KAlBH,uCAkBQ,WAAOqB,GAAP,eAAA5C,EAAA,sEAEI6C,YAAuBD,GAF3B,YACAE,EADA,wCAKIf,IACHC,WAAW,WACXC,IAAIvF,GACJsF,WAAWH,GACXI,IAAIa,GACJC,IALG,2BAOG5C,GAPH,IAQA6C,OAAQ,UACRC,YACEC,IAASC,UAAUC,UAAUC,SAC3B,IAAIpC,QAGV,CAAEqC,OAAO,IAEV/B,MAAK,WACJpE,EAAgB,GAAD,cACVR,QADU,IACVA,OADU,EACVA,EAAc4G,MADJ,2BAIf9G,EAAkBC,EAAWmF,GAC7BvF,IACAW,EAASgD,aAAW,OAErBuD,OAAM,SAACC,GACNtG,EAAgB,8BAAD,cACiBR,QADjB,IACiBA,OADjB,EACiBA,EAAc4G,MAD/B,oBACyCE,QADzC,IACyCA,OADzC,EACyCA,EAAOC,SAC7D,CAAEC,QAAS,UAEb1G,EAASgD,aAAW,OAnCtB,2CAlBR,uDAyDGuD,OAAM,SAACI,GACNzG,EAAgB,4DAAD,cAC+CyG,QAD/C,IAC+CA,OAD/C,EAC+CA,EAAKF,SACjE,CAAEC,QAAS,UAEb1G,EAASgD,aAAW,OAzEpB,2CAFR,0DA+EDuD,OAAM,SAACC,GAENtG,EAAgB,sDAAD,cACyCsG,QADzC,IACyCA,OADzC,EACyCA,EAAOC,SAC7D,CAAEC,QAAS,UAEb1G,EAASgD,aAAW,aAI3BuD,OAAM,SAACC,GAENtG,EAAgB,2DAAD,cAC8CsG,QAD9C,IAC8CA,OAD9C,EAC8CA,EAAOC,SAClE,CAAEC,QAAS,UAEb1G,EAASgD,aAAW,SAGxB9C,EACE,iEACA,CAAEwG,QAAS,UAEb1G,EAASgD,aAAW,KA7JxB,2CAxIC,uEAySD,oCAAAD,EAAA,sDACE/C,EAASgD,aAAW,IAEhBC,MACE2D,EADc,aAEhBzD,UAAsC,OAA5B9C,QAA4B,IAA5BA,OAAA,EAAAA,EAA8B+C,KAAM,GAC9CyD,iBAAqB,OAAJ/G,QAAI,IAAJA,OAAA,EAAAA,EAAMsD,KAAM,GAC7B0D,oBAAwB,OAAJhH,QAAI,IAAJA,OAAA,EAAAA,EAAMyD,QAAS,IAChCjE,GAGDkE,EAAgB/C,GACjBgD,mBACAd,UAAU,aACTe,EAAY/C,GACb8C,mBACAd,UAAU,aAGPgB,EAAuBC,IAC1BC,MACAC,MAF0B,4BAGJC,IAAO,IAAIC,MAAQC,OACtC,cAJuB,YAKpBxE,EALoB,mBAMvBH,QANuB,IAMvBA,OANuB,EAMvBA,EAAc4E,aANS,kCAOCF,KAAKG,MAPN,SASvBC,EAAmBR,IACtBC,MACAC,MAFsB,4BAGAC,IAAO,IAAIC,MAAQC,OACtC,cAJmB,YAKhBxE,EALgB,mBAMnBH,QANmB,IAMnBA,OANmB,EAMnBA,EAAc4E,aANK,6BAOAF,KAAKG,MAPL,SAWzBR,EACGU,UAAUb,EAAe,YACzBc,MAAK,WACJC,QAAQC,IAAI,2CAGZb,EAAqBc,iBAAiBH,MAAK,SAACI,GAC1CkC,EAAY,2BAAQA,GAAR,IAAsBtF,WAAYoD,IAG9CN,EACGC,UAAUX,EAAW,YACrBY,MAAK,WACJC,QAAQC,IAAI,yCAGZJ,EACGK,iBACAH,KAFH,uCAEQ,WAAOK,GAAP,eAAA5B,EAAA,6DACJ6D,EAAY,2BACPA,GADO,IAEV9D,UAAW6B,IAGTC,EANA,OAMiBlF,QANjB,IAMiBA,OANjB,EAMiBA,EAAc0D,GAN/B,SAQE0B,IACHC,WAAW,WACXC,IAAIvF,GACJsF,WAAWH,GACXI,IAJG,OAIC1F,QAJD,IAICA,OAJD,EAICA,EAAc8D,IAClB0C,IALG,eAOGc,GAEL,CAAEP,OAAO,IAEV/B,MAAK,WACJpE,EAAgB,GAAD,cACVR,QADU,IACVA,OADU,EACVA,EAAc4G,MADJ,0BAGf9G,EAAkBC,EAAWmF,GAC7BvF,IACAW,EAASgD,aAAW,OAErBuD,OAAM,SAACC,GACNtG,EAAgB,gCAAD,cACmBR,QADnB,IACmBA,OADnB,EACmBA,EAAc4G,MADjC,oBAC2CE,QAD3C,IAC2CA,OAD3C,EAC2CA,EAAOC,SAC/D,CAAEC,QAAS,UAEb1G,EAASgD,aAAW,OAhCpB,2CAFR,0DAsCDuD,OAAM,SAACC,GAENtG,EAAgB,sDAAD,cACyCsG,QADzC,IACyCA,OADzC,EACyCA,EAAOC,SAC7D,CAAEC,QAAS,UAEb1G,EAASgD,aAAW,aAI3BuD,OAAM,SAACC,GAENtG,EAAgB,2DAAD,cAC8CsG,QAD9C,IAC8CA,OAD9C,EAC8CA,EAAOC,SAClE,CAAEC,QAAS,UAEb1G,EAASgD,aAAW,SAGxB9C,EACE,iEACA,CAAEwG,QAAS,UAEb1G,EAASgD,aAAW,KApHxB,2CAzSC,yBAiaD,SAASC,KACP,QAAI,OAAC3D,QAAD,IAACA,MAAc4E,cAAgB,OAAC5E,QAAD,IAACA,MAAcyH,SAKpD,OACE,qCACE,eAAC,IAAD,CAAQC,WAAS,EAACC,SAAS,KAAKC,KAAM9H,EAAtC,UACE,cAAC,IAAD,oBAAgC,WAAfD,EAA0B,SAAW,UAAtD,mBACEO,QADF,IACEA,OADF,EACEA,EAAc4G,SAEhB,eAAC,IAAD,WACE,cAAC,IAAD,CACEa,GAAI,CACFC,YAAa,YAGjB,uBACgB,WAAfjI,EACC,qCACE,cAAC,IAAD,CAAMkI,WAAS,EAACC,QAAS,EAAzB,SACE,cAAC,IAAD,CAAMC,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAvB,SACE,cAAC,IAAD,CACEC,aAAc,CAAEC,MAAO,CAAEC,UAAW,SACpCC,KAAK,QACLC,MAAM,gBACN1E,GAAG,mBACH2E,QAAS,CAAC,UAAW,YAAa,YAClCC,OAAmB,OAAZ1I,QAAY,IAAZA,OAAA,EAAAA,EAAcyG,SAAU,KAC/BoB,GAAI,CAAEhF,MAAO,KACb8F,YAAa,SAACC,GAAD,OACX,cAAC,IAAD,2BACMA,GADN,IAEEJ,MAAM,gBACNK,gBAAiB,CAAEC,UAAU,GAC7BP,KAAK,YAGTO,UAAQ,EACRC,SAAU,SAACC,EAAGN,EAAOO,GACnBD,EAAEE,iBAEW,iBAAXD,GACW,UAAXA,GACAP,EAEAzI,GAAgB,SAACkJ,GACf,OAAO,2BACFA,GADL,IAEE1C,OAAQiC,OAID,iBAAXO,GACW,UAAXA,GAEAhJ,GAAgB,SAACkJ,GACf,OAAO,2BACFA,GADL,IAEE1C,OAAQ,WAKhB2C,eAAgB,SAACC,GAAD,OAAYA,SAKlC,uBACA,cAAC,IAAD,CACExB,GAAI,CACFC,YAAa,YAGjB,0BAGF,6BAGuB,wBAAZ,OAAZ1H,QAAY,IAAZA,OAAA,EAAAA,EAAc4G,OACb,cAAC,WAAD,CAAUsC,SAAU,6BAApB,SACE,cAAC7J,EAAD,CACEY,WAAYA,EACZU,6BAA8BA,EAC9BC,gCACEA,EAEFb,UAAWA,EACXN,WAAYA,EACZG,aAAcA,EACdC,gBAAiBA,EACjBK,KAAMA,EACNC,eAAgBA,MAIpB,cAAC,WAAD,CAAU+I,SAAU,6BAApB,SACE,cAAC3J,EAAD,CACEU,WAAYA,EACZU,6BAA8BA,EAC9BC,gCACEA,EAEFf,gBAAiBA,EACjBD,aAAcA,EACdH,WAAYA,EACZO,aAAcA,MAKpB,uBACA,uBACA,cAAC,IAAD,CACEyH,GAAI,CACFC,YAAa,YAGjB,uBAEA,eAAC,IAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,UAC2B,wBAAZ,OAAZ5H,QAAY,IAAZA,OAAA,EAAAA,EAAc4G,OACb,cAAC,IAAD,CAAMiB,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAvB,SACE,cAAC,IAAD,CAAMJ,WAAS,EAACC,QAAS,EAAzB,SACE,cAAC,IAAD,CAAMC,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAvB,SACE,cAAC,IAAD,CACEK,MAAM,iBACNE,MACc,OAAZ1I,QAAY,IAAZA,GAAA,UAAAA,EAAcuJ,qBAAd,SAA6BC,QACzB,IAAI9E,KAAJ,OAAS1E,QAAT,IAASA,OAAT,EAASA,EAAcuJ,cAAcE,UACzB,OAAZzJ,QAAY,IAAZA,KAAcuJ,cAAd,OACAvJ,QADA,IACAA,OADA,EACAA,EAAcuJ,cACd,GAENR,SAAU,SAACW,GACTzJ,GAAgB,SAACkJ,GACf,OAAO,2BACFA,GADL,IAEEI,cAAeG,QAIrBf,YAAa,SAACC,GAAD,OACX,cAAC,IAAD,2BAAeA,GAAf,IAAuBL,KAAK,YAE9BoB,YAAY,qBAMpB,6BAGF,cAAC,IAAD,CAAM1B,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAvB,SACkB,SAAftI,EACC,eAAC,IAAD,CAAOmI,QAAS,EAAhB,UACE,cAAC,IAAD,kCAC+B,OAAZhI,QAAY,IAAZA,OAAA,EAAAA,EAAc4J,iBAAkB,MAGnD,8BACE,qBACEpH,KAAiB,OAAZxC,QAAY,IAAZA,OAAA,EAAAA,EAAcgC,aAAc,GACjC6H,IAAI,6BAKV,eAAC,IAAD,CAAO7B,QAAS,EAAhB,UACE,cAAC,IAAD,CACEZ,QAAQ,WACR0C,KAAK,iBACLtB,MAAM,cACN1E,GAAG,iBACHiG,KAAK,OACLrB,OAAmB,OAAZ1I,QAAY,IAAZA,OAAA,EAAAA,EAAc4J,iBAAkB,GACvCrB,KAAK,QACLb,WAAS,EACTqB,SAAU,SAACiB,GACT/J,GAAgB,SAACkJ,GACf,OAAO,2BACFA,GADL,IAEES,eAAgBI,EAAMC,OAAOvB,YAInCwB,SAAyB,SAAfrK,IAGZ,cAAC,IAAD,qCACA,cAAC,IAAD,CACEgI,GAAI,CACFsC,OAAQ,iBACRC,QAAS,OACTC,aAAc,OAJlB,SAOE,cAAC,IAAD,CACEC,SAAS,QACTC,YAAa,CACX1H,MAAO,IACPC,OAAQ,IACR0H,UAAW,aAGbjG,IAAK,SAACA,GACJnD,GAAqBmD,IAEvB2F,SAAyB,SAAfrK,MAUd,cAAC,IAAD,CACEuH,QAAQ,WACRqD,QApgBK,WAErBtJ,GAAkBmC,SAmgBFuE,GAAI,CAAE6C,OAAQ,QACdnC,KAAK,QAJP,kCAcN,cAAC,IAAD,CAAMN,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAvB,SACkB,SAAftI,EACC,eAAC,IAAD,CAAOmI,QAAS,EAAhB,UACE,cAAC,IAAD,6BACc,OAAZhI,QAAY,IAAZA,OAAA,EAAAA,EAAc2K,gBAAiB,MAEjC,8BACE,qBACEnI,KAAiB,OAAZxC,QAAY,IAAZA,OAAA,EAAAA,EAAcwD,YAAa,GAChCqG,IAAI,6BAKV,eAAC,IAAD,CAAO7B,QAAS,EAAhB,UACE,cAAC,IAAD,CACEZ,QAAQ,WACR0C,KAAK,gBACLtB,MAAM,cACN1E,GAAG,gBACHiG,KAAK,OACLrB,OAAmB,OAAZ1I,QAAY,IAAZA,OAAA,EAAAA,EAAc2K,gBAAiB,GACtCpC,KAAK,QACLb,WAAS,EACTqB,SAAU,SAACiB,GACT/J,GAAgB,SAACkJ,GACf,OAAO,2BACFA,GADL,IAEEwB,cAAeX,EAAMC,OAAOvB,YAIlCwB,SAAyB,SAAfrK,IAGZ,cAAC,IAAD,gCAEA,cAAC,IAAD,CACEgI,GAAI,CACFsC,OAAQ,iBACRC,QAAS,OACTC,aAAc,OAJlB,SAOE,cAAC,IAAD,CACEC,SAAS,QACTC,YAAa,CACX1H,MAAO,IACPC,OAAQ,IACR0H,UAAW,aAGbjG,IAAK,SAACA,GACJjD,GAA2BiD,IAE7B2F,SACiB,SAAfrK,MAMN,cAAC,IAAD,CACEuH,QAAQ,WACRqD,QA1kBW,WAE3BpJ,GAAwBiC,SAykBRuE,GAAI,CAAE6C,OAAQ,QACdnC,KAAK,QAJP,wCAiBV,eAAC,IAAD,WACkB,SAAf1I,EACC,cAAC,IAAD,CACEuH,QAAQ,YACRwD,MAAM,UACNH,QAAS,WACY,QAAf5K,EAluBjB,oCAmuBegL,GACwB,WAAfhL,GApuBxB,oCAquBeiL,IAPN,SAWkB,QAAfjL,EACG,iBACe,WAAfA,EACA,cACA,KAGN,6BAGF,cAAC,IAAD,CACEuH,QAAQ,YACRwD,MAAM,QACNH,QACE,kBACEvJ,GAA8B,IALpC,0BAaHD,EACC,eAAC,IAAD,CAAQ2G,KAAM3G,EAA4ByG,WAAS,EAACC,SAAS,KAA7D,UACE,cAAC,IAAD,2BACA,eAAC,IAAD,WACE,cAAC,IAAD,IACA,uBACA,cAAC,IAAD,+DAAoDvH,QAApD,IAAoDA,OAApD,EAAoDA,EAAc4G,MAAlE,UAEF,eAAC,IAAD,WACE,cAAC,IAAD,CACEI,QAAQ,YACRwD,MAAM,QACNH,QAAS,kBAAM1K,KAHjB,iBAOA,cAAC,IAAD,CACEqH,QAAQ,YACRwD,MAAM,UACNH,QAAS,kBAAMvJ,GAA8B,IAH/C,sBAUJ,kC,qBCn0Bse,IAAS8H,EAAE+B,EAAEC,EAAEC,EAA5bC,EAAOC,SAA+anC,EAAraoC,EAAQ,IAA+ZL,EAAjZK,EAAQ,GAA2YJ,EAAlYI,EAAQ,MAA4XH,EAA3WG,EAAQ,MAA6W,SAASpC,GAAG,SAAS+B,EAAEE,GAAG,GAAGD,EAAEC,GAAG,OAAOD,EAAEC,GAAGE,QAAQ,IAAI1H,EAAEuH,EAAEC,GAAG,CAACE,QAAQ,GAAGrH,GAAGmH,EAAEI,QAAO,GAAI,OAAOrC,EAAEiC,GAAGK,KAAK7H,EAAE0H,QAAQ1H,EAAEA,EAAE0H,QAAQJ,GAAGtH,EAAE4H,QAAO,EAAG5H,EAAE0H,QAAQ,IAAIH,EAAE,GAAG,OAAOD,EAAEQ,EAAEvC,EAAE+B,EAAES,EAAER,EAAED,EAAEU,EAAE,GAAGV,EAAE,GAAlM,CAAsM,CAAC,SAAS/B,EAAE+B,EAAEC,GAAG,aAAa,SAASC,EAAEjC,GAAG,OAAOA,GAAGA,EAAE0C,WAAW1C,EAAE,CAAC2C,QAAQ3C,GAAG,SAASvF,EAAEuF,EAAE+B,GAAG,IAAIC,EAAE,GAAG,IAAI,IAAIC,KAAKjC,EAAE+B,EAAEa,QAAQX,IAAI,GAAGY,OAAOC,UAAUC,eAAeT,KAAKtC,EAAEiC,KAAKD,EAAEC,GAAGjC,EAAEiC,IAAI,OAAOD,EAAE,SAASgB,EAAEhD,EAAE+B,GAAG,KAAK/B,aAAa+B,GAAG,MAAM,IAAIkB,UAAU,qCAAqC,SAASC,EAAElD,EAAE+B,GAAG,IAAI/B,EAAE,MAAM,IAAImD,eAAe,6DAA6D,OAAOpB,GAAG,iBAAiBA,GAAG,mBAAmBA,EAAE/B,EAAE+B,EAAE,SAASqB,EAAEpD,EAAE+B,GAAG,GAAG,mBAAmBA,GAAG,OAAOA,EAAE,MAAM,IAAIkB,UAAU,kEAAkElB,GAAG/B,EAAE8C,UAAUD,OAAOQ,OAAOtB,GAAGA,EAAEe,UAAU,CAACQ,YAAY,CAAC5D,MAAMM,EAAEuD,YAAW,EAAGC,UAAS,EAAGC,cAAa,KAAM1B,IAAIc,OAAOa,eAAeb,OAAOa,eAAe1D,EAAE+B,GAAG/B,EAAE2D,UAAU5B,GAAGc,OAAOe,eAAe7B,EAAE,aAAa,CAACrC,OAAM,IAAK,IAAImE,EAAEhB,OAAOiB,QAAQ,SAAS9D,GAAG,IAAI,IAAI+B,EAAE,EAAEA,EAAEgC,UAAUC,OAAOjC,IAAI,CAAC,IAAIC,EAAE+B,UAAUhC,GAAG,IAAI,IAAIE,KAAKD,EAAEa,OAAOC,UAAUC,eAAeT,KAAKN,EAAEC,KAAKjC,EAAEiC,GAAGD,EAAEC,IAAI,OAAOjC,GAAGwC,EAAE,WAAW,SAASxC,EAAEA,EAAE+B,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAED,EAAEiC,OAAOhC,IAAI,CAAC,IAAIC,EAAEF,EAAEC,GAAGC,EAAEsB,WAAWtB,EAAEsB,aAAY,EAAGtB,EAAEwB,cAAa,EAAG,UAAUxB,IAAIA,EAAEuB,UAAS,GAAIX,OAAOe,eAAe5D,EAAEiC,EAAEgC,IAAIhC,IAAI,OAAO,SAASF,EAAEC,EAAEC,GAAG,OAAOD,GAAGhC,EAAE+B,EAAEe,UAAUd,GAAGC,GAAGjC,EAAE+B,EAAEE,GAAGF,GAA7O,GAA0PU,EAAER,EAAPD,EAAE,IAAUkC,EAAElC,EAAE,GAAGmC,EAAElC,EAAEiC,GAAUE,EAAEnC,EAAPD,EAAE,IAAiBqC,EAAEpC,EAAPD,EAAE,IAAUO,EAAE,SAASvC,GAAG,SAAS+B,IAAI,IAAI/B,EAAEgC,EAAEC,EAAIe,EAAEsB,KAAKvC,GAAG,IAAI,IAAI8B,EAAEE,UAAUC,OAAOxB,EAAE+B,MAAMV,GAAGW,EAAE,EAAEA,EAAEX,EAAEW,IAAIhC,EAAEgC,GAAGT,UAAUS,GAAG,OAAOxC,EAAEC,EAAEiB,EAAEoB,MAAMtE,EAAE+B,EAAE4B,WAAWd,OAAO4B,eAAe1C,IAAIO,KAAKoC,MAAM1E,EAAE,CAACsE,MAAMK,OAAOnC,KAAKP,EAAE2C,QAAQ,KAAK3C,EAAE4C,iBAAiB,WAAW,IAAI7E,EAAEiC,EAAE6C,MAA6E,OAApE9E,EAAEuB,YAAYvB,EAAE+E,cAActK,EAAEuF,EAAE,CAAC,cAAc,mBAA6BiC,EAAE/I,UAAU,WAAW,OAAO+I,EAAE+C,SAAS/C,EAAE9G,iBAAiB,WAAW,IAAI6E,EAAEiF,SAASC,cAAc,UAAU,OAAOlF,EAAEnG,MAAMoI,EAAE+C,QAAQnL,MAAMmG,EAAElG,OAAOmI,EAAE+C,QAAQlL,OAAOkG,EAAE5G,WAAW,MAAMe,UAAU8H,EAAE+C,QAAQ,EAAE,IAAG,EAAGX,EAAE1B,SAAS3C,IAAIiC,EAAEkD,gBAAgB,WAAW,OAAOlD,EAAE2C,SAAS3C,EAAEmD,oBAAoB,WAAWnD,EAAE6C,MAAMC,eAAe9C,EAAEoD,iBAAiBpD,EAAEoD,cAAc,WAAW,IAAIrF,EAAEiC,EAAE6C,MAAMvD,aAAa,GAAGQ,EAAE/B,EAAEnG,MAAMmI,EAAEhC,EAAElG,OAAO,IAAIiI,IAAIC,EAAE,CAAC,IAAIvH,EAAEwH,EAAE+C,QAAQhC,EAAErJ,KAAK2L,IAAIC,OAAOC,kBAAkB,EAAE,GAAGzD,IAAItH,EAAEZ,MAAMY,EAAEgL,YAAYzC,GAAGhB,IAAIvH,EAAEX,OAAOW,EAAEiL,aAAa1C,GAAGvI,EAAErB,WAAW,MAAMM,MAAMsJ,EAAEA,GAAGf,EAAE3H,UAAU2H,EAAE0D,GAAG,WAAW,OAAOJ,OAAOK,iBAAiB,SAAS3D,EAAEmD,qBAAqBnD,EAAE2C,QAAQe,MAAM1D,EAAE4D,IAAI,WAAW,OAAON,OAAOO,oBAAoB,SAAS7D,EAAEmD,qBAAqBnD,EAAE2C,QAAQiB,OAAO5D,EAAE3H,MAAM,WAAW,OAAO2H,EAAE2C,QAAQtK,SAAS2H,EAAE8D,QAAQ,WAAW,OAAO9D,EAAE2C,QAAQmB,WAAW9D,EAAE1H,YAAY,SAASyF,EAAE+B,GAAG,OAAOE,EAAE2C,QAAQrK,YAAYyF,EAAE+B,IAAIE,EAAE5H,UAAU,SAAS2F,EAAE+B,GAAG,OAAOE,EAAE2C,QAAQvK,UAAU2F,EAAE+B,IAAIE,EAAE+D,SAAS,SAAShG,GAAG,OAAOiC,EAAE2C,QAAQoB,SAAShG,IAAIiC,EAAEgE,OAAO,WAAW,OAAOhE,EAAE2C,QAAQqB,UAAc/C,EAAEjB,EAAJD,GAAS,OAAOoB,EAAErB,EAAE/B,GAAGwC,EAAET,EAAE,CAAC,CAACkC,IAAI,oBAAoBvE,MAAM,WAAW4E,KAAKM,QAAQ,IAAIR,EAAEzB,QAAQ2B,KAAKU,QAAQV,KAAKO,oBAAoBP,KAAKe,gBAAgBf,KAAKqB,OAAO,CAAC1B,IAAI,uBAAuBvE,MAAM,WAAW4E,KAAKuB,QAAQ,CAAC5B,IAAI,qBAAqBvE,MAAM,WAAWmD,OAAOiB,OAAOQ,KAAKM,QAAQN,KAAKO,sBAAsB,CAACZ,IAAI,SAASvE,MAAM,WAAW,IAAIM,EAAEsE,KAAKvC,EAAEuC,KAAKQ,MAAMvD,YAAY,OAAO4C,EAAExB,QAAQuC,cAAc,SAASrB,EAAE,CAACtI,IAAI,SAASwG,GAAG/B,EAAEgF,QAAQjD,IAAIA,QAAQA,EAA14D,CAA64DmC,EAAEgC,WAAW3D,EAAE4D,UAAU,CAACC,qBAAqB3D,EAAEE,QAAQ0D,OAAOC,SAAS7D,EAAEE,QAAQ0D,OAAO1H,SAAS8D,EAAEE,QAAQ0D,OAAOE,YAAY9D,EAAEE,QAAQ0D,OAAOG,QAAQ/D,EAAEE,QAAQ8D,UAAU,CAAChE,EAAEE,QAAQ0D,OAAO5D,EAAEE,QAAQ+D,OAAOpF,SAASmB,EAAEE,QAAQgE,OAAOC,SAASnE,EAAEE,QAAQ0D,OAAOQ,MAAMpE,EAAEE,QAAQ+D,KAAKI,QAAQrE,EAAEE,QAAQ+D,KAAKnF,YAAYkB,EAAEE,QAAQoE,OAAOhC,cAActC,EAAEE,QAAQqE,MAAMzE,EAAE0E,aAAa,CAAClC,eAAc,GAAIhD,EAAEY,QAAQJ,GAAG,SAASR,EAAEC,GAAGD,EAAEI,QAAQnC,GAAG,SAASA,EAAEgC,GAAGhC,EAAEmC,QAAQJ,GAAG,SAAS/B,EAAE+B,GAAG/B,EAAEmC,QAAQH,GAAG,SAAShC,EAAE+B,GAAG/B,EAAEmC,QAAQF,O,kCCkB32I,SAASiF,EAAMjN,EAAGC,EAAGiN,GACnB7C,KAAKrK,EAAIA,EACTqK,KAAKpK,EAAIA,EACToK,KAAK6C,KAAOA,IAAQ,IAAIzL,MAAO0L,UAejC,SAASC,EAAOC,EAAYC,EAAUC,EAAUC,GAC9CnD,KAAKgD,WAAaA,EAClBhD,KAAKiD,SAAWA,EAChBjD,KAAKkD,SAAWA,EAChBlD,KAAKmD,SAAWA,EAkElB,SAASC,EAAazO,EAAQwG,GAC5B,IAAIkI,EAAOrD,KACPsD,EAAOnI,GAAW,GAEtB6E,KAAK8B,qBAAuBwB,EAAKxB,sBAAwB,GACzD9B,KAAKgC,SAAWsB,EAAKtB,UAAY,GACjChC,KAAK3F,SAAWiJ,EAAKjJ,UAAY,IACjC2F,KAAKsC,SAAW,aAAcgB,EAAOA,EAAKhB,SAAW,GACrDtC,KAAKiC,YAAc,gBAAiBqB,EAAOA,EAAKrB,YAAc,EAE1DjC,KAAKsC,SACPtC,KAAKuD,kBA3CT,SAAkBnB,EAAMoB,EAAMrI,GAC5B,IAAIsI,EAASC,EAAMC,EACfC,EAAU,KACV/H,EAAW,EACVV,IAASA,EAAU,IACxB,IAAI0I,EAAQ,WACVhI,GAA+B,IAApBV,EAAQ2I,QAAoB,EAAI1M,KAAKG,MAChDqM,EAAU,KACVD,EAASvB,EAAKhC,MAAMqD,EAASC,GACxBE,IAASH,EAAUC,EAAO,OAEjC,OAAO,WACL,IAAInM,EAAMH,KAAKG,MACVsE,IAAgC,IAApBV,EAAQ2I,UAAmBjI,EAAWtE,GACvD,IAAIwM,EAAYP,GAAQjM,EAAMsE,GAc9B,OAbA4H,EAAUzD,KACV0D,EAAOjE,UACHsE,GAAa,GAAKA,EAAYP,GAC5BI,IACFI,aAAaJ,GACbA,EAAU,MAEZ/H,EAAWtE,EACXoM,EAASvB,EAAKhC,MAAMqD,EAASC,GACxBE,IAASH,EAAUC,EAAO,OACrBE,IAAgC,IAArBzI,EAAQ8I,WAC7BL,EAAUM,WAAWL,EAAOE,IAEvBJ,GAekBrB,CAASc,EAAa5E,UAAU2F,cAAenE,KAAKsC,UAE7EtC,KAAKuD,kBAAoBH,EAAa5E,UAAU2F,cAGlDnE,KAAKkC,QAAUoB,EAAKpB,SAAW,WAC7B,OAAQlC,KAAKgC,SAAWhC,KAAK3F,UAAY,GAE3C2F,KAAKhD,SAAWsG,EAAKtG,UAAY,QACjCgD,KAAKoE,gBAAkBd,EAAKc,iBAAmB,gBAC/CpE,KAAKwC,QAAUc,EAAKd,QACpBxC,KAAKuC,MAAQe,EAAKf,MAElBvC,KAAKU,QAAU/L,EACfqL,KAAKqE,KAAO1P,EAAOG,WAAW,MAC9BkL,KAAKhK,QAILgK,KAAKsE,iBAAmB,SAAU5H,GACZ,IAAhBA,EAAM6H,QACRlB,EAAKmB,kBAAmB,EACxBnB,EAAKoB,aAAa/H,KAItBsD,KAAK0E,iBAAmB,SAAUhI,GAC5B2G,EAAKmB,kBACPnB,EAAKE,kBAAkB7G,IAI3BsD,KAAK2E,eAAiB,SAAUjI,GACV,IAAhBA,EAAM6H,OAAelB,EAAKmB,mBAC5BnB,EAAKmB,kBAAmB,EACxBnB,EAAKuB,WAAWlI,KAIpBsD,KAAK6E,kBAAoB,SAAUnI,GACjC,GAAmC,IAA/BA,EAAMoI,cAAcpF,OAAc,CACpC,IAAIqF,EAAQrI,EAAMsI,eAAe,GACjC3B,EAAKoB,aAAaM,KAItB/E,KAAKiF,iBAAmB,SAAUvI,GAEhCA,EAAMd,iBAEN,IAAImJ,EAAQrI,EAAMoI,cAAc,GAChCzB,EAAKE,kBAAkBwB,IAGzB/E,KAAKkF,gBAAkB,SAAUxI,GACRA,EAAMC,SAAW0G,EAAK3C,UAE3ChE,EAAMd,iBACNyH,EAAKuB,WAAWlI,KAKpBsD,KAAKqB,KApLP,OAwBAuB,EAAMpE,UAAU2G,aAAe,SAAUC,GACvC,OAAOpF,KAAK6C,OAASuC,EAAMvC,KAAO7C,KAAKqF,WAAWD,IAAUpF,KAAK6C,KAAOuC,EAAMvC,MAAQ,GAGxFD,EAAMpE,UAAU6G,WAAa,SAAUD,GACrC,OAAO/P,KAAKiQ,KAAKjQ,KAAKkQ,IAAIvF,KAAKrK,EAAIyP,EAAMzP,EAAG,GAAKN,KAAKkQ,IAAIvF,KAAKpK,EAAIwP,EAAMxP,EAAG,KAG9EgN,EAAMpE,UAAUgH,OAAS,SAAUC,GACjC,OAAOzF,KAAKrK,IAAM8P,EAAM9P,GAAKqK,KAAKpK,IAAM6P,EAAM7P,GAAKoK,KAAK6C,OAAS4C,EAAM5C,MAWzEE,EAAOvE,UAAUkB,OAAS,WAMxB,IALA,IACIA,EAAS,EACTgG,OAAK,EACLC,OAAK,EAEA/G,EAAI,EAAGA,GALJ,GAKgBA,GAAK,EAAG,CAClC,IAAInB,EAAImB,EANE,GAONgH,EAAK5F,KAAK6F,OAAOpI,EAAGuC,KAAKgD,WAAWrN,EAAGqK,KAAKiD,SAAStN,EAAGqK,KAAKkD,SAASvN,EAAGqK,KAAKmD,SAASxN,GACvFmQ,EAAK9F,KAAK6F,OAAOpI,EAAGuC,KAAKgD,WAAWpN,EAAGoK,KAAKiD,SAASrN,EAAGoK,KAAKkD,SAAStN,EAAGoK,KAAKmD,SAASvN,GAC3F,GAAIgJ,EAAI,EAAG,CACT,IAAImH,EAAQH,EAAKF,EACbM,EAAQF,EAAKH,EACjBjG,GAAUrK,KAAKiQ,KAAKS,EAAQA,EAAQC,EAAQA,GAE9CN,EAAKE,EACLD,EAAKG,EAGP,OAAOpG,GAITqD,EAAOvE,UAAUqH,OAAS,SAAUpI,EAAG2H,EAAOa,EAAIC,EAAIC,GACpD,OAAOf,GAAS,EAAM3H,IAAM,EAAMA,IAAM,EAAMA,GAAK,EAAMwI,GAAM,EAAMxI,IAAM,EAAMA,GAAKA,EAAI,EAAMyI,GAAM,EAAMzI,GAAKA,EAAIA,EAAI0I,EAAM1I,EAAIA,EAAIA,GAoHzI2F,EAAa5E,UAAUxI,MAAQ,WAC7B,IAAInB,EAAMmL,KAAKqE,KACX1P,EAASqL,KAAKU,QAElB7L,EAAIuR,UAAYpG,KAAKoE,gBACrBvP,EAAIwR,UAAU,EAAG,EAAG1R,EAAOY,MAAOZ,EAAOa,QACzCX,EAAIyR,SAAS,EAAG,EAAG3R,EAAOY,MAAOZ,EAAOa,QAExCwK,KAAKuG,MAAQ,GACbvG,KAAKwG,SACLxG,KAAKyG,UAAW,GAGlBrD,EAAa5E,UAAUvI,YAAc,SAAUH,GAC7C,IAAI4Q,EAAQ1G,KAER7E,EAAUsE,UAAUC,OAAS,QAAsBiH,IAAjBlH,UAAU,GAAmBA,UAAU,GAAK,GAE9EmH,EAAQ,IAAI5R,MACZ6R,EAAQ1L,EAAQ0L,OAAS5F,OAAOC,kBAAoB,EACpD3L,EAAQ4F,EAAQ5F,OAASyK,KAAKU,QAAQnL,MAAQsR,EAC9CrR,EAAS2F,EAAQ3F,QAAUwK,KAAKU,QAAQlL,OAASqR,EAErD7G,KAAKwG,SACLI,EAAM1R,IAAMY,EACZ8Q,EAAMzR,OAAS,WACbuR,EAAMrC,KAAKxO,UAAU+Q,EAAO,EAAG,EAAGrR,EAAOC,IAE3CwK,KAAKyG,UAAW,GAGlBrD,EAAa5E,UAAUzI,UAAY,SAAU0G,GAC3C,IAAIiE,EAEJ,GACO,kBADCjE,EAEJ,OAAOuD,KAAK8G,SAEZ,IAAK,IAAIC,EAAOtH,UAAUC,OAAQvE,EAAU8E,MAAM8G,EAAO,EAAIA,EAAO,EAAI,GAAIC,EAAO,EAAGA,EAAOD,EAAMC,IACjG7L,EAAQ6L,EAAO,GAAKvH,UAAUuH,GAGhC,OAAQtG,EAAUV,KAAKU,SAAS3K,UAAUqK,MAAMM,EAAS,CAACjE,GAAM4D,OAAOlF,KAI7EiI,EAAa5E,UAAU6C,GAAK,WAC1BrB,KAAKiH,qBACLjH,KAAKkH,sBAGP9D,EAAa5E,UAAU+C,IAAM,WAC3BvB,KAAKU,QAAQc,oBAAoB,YAAaxB,KAAKsE,kBACnDtE,KAAKU,QAAQc,oBAAoB,YAAaxB,KAAK0E,kBACnD/D,SAASa,oBAAoB,UAAWxB,KAAK2E,gBAE7C3E,KAAKU,QAAQc,oBAAoB,aAAcxB,KAAK6E,mBACpD7E,KAAKU,QAAQc,oBAAoB,YAAaxB,KAAKiF,kBACnDjF,KAAKU,QAAQc,oBAAoB,WAAYxB,KAAKkF,kBAGpD9B,EAAa5E,UAAUiD,QAAU,WAC/B,OAAOzB,KAAKyG,UAIdrD,EAAa5E,UAAUiG,aAAe,SAAU/H,GAC9CsD,KAAKuG,MAAMY,KAAK,IAChBnH,KAAKwG,SACLxG,KAAKmE,cAAczH,GAES,oBAAjBsD,KAAKwC,SACdxC,KAAKwC,QAAQ9F,IAIjB0G,EAAa5E,UAAU2F,cAAgB,SAAUzH,GAC/C,IAAI/G,EAAI+G,EAAM0K,QACVxR,EAAI8G,EAAM2K,QAEVC,EAAQtH,KAAKuH,aAAa5R,EAAGC,GAC7B4R,EAAiBxH,KAAKuG,MAAMvG,KAAKuG,MAAM7G,OAAS,GAChD+H,EAAYD,GAAkBA,EAAeA,EAAe9H,OAAS,GACrEgI,EAAsBD,GAAaH,EAAMjC,WAAWoC,GAAazH,KAAKiC,YAG1E,IAAMwF,IAAaC,EAAsB,CACvC,IAAIC,EAAY3H,KAAK2H,UAAUL,GAC3BM,EAAQD,EAAUC,MAClBC,EAASF,EAAUE,OAEnBD,GAASC,GACX7H,KAAK8H,WAAWF,EAAOC,EAAOzC,MAAOyC,EAAO1B,KAG9CnG,KAAKuG,MAAMvG,KAAKuG,MAAM7G,OAAS,GAAGyH,KAAK,CACrCxR,EAAG2R,EAAM3R,EACTC,EAAG0R,EAAM1R,EACTiN,KAAMyE,EAAMzE,KACZvF,MAAO0C,KAAKhD,aAKlBoG,EAAa5E,UAAUoG,WAAa,SAAUlI,GAC5C,IAAIqL,EAAe/H,KAAKgI,OAAOtI,OAAS,EACpC4H,EAAQtH,KAAKgI,OAAO,GAMxB,IAJKD,GAAgBT,GACnBtH,KAAKiI,SAASX,GAGZA,EAAO,CACT,IAAIE,EAAiBxH,KAAKuG,MAAMvG,KAAKuG,MAAM7G,OAAS,GAChD+H,EAAYD,EAAeA,EAAe9H,OAAS,GAIlD4H,EAAM9B,OAAOiC,IAChBD,EAAeL,KAAK,CAClBxR,EAAG2R,EAAM3R,EACTC,EAAG0R,EAAM1R,EACTiN,KAAMyE,EAAMzE,KACZvF,MAAO0C,KAAKhD,WAKQ,oBAAfgD,KAAKuC,OACdvC,KAAKuC,MAAM7F,IAIf0G,EAAa5E,UAAUyI,mBAAqB,WAC1CjH,KAAKwE,kBAAmB,EAExBxE,KAAKU,QAAQY,iBAAiB,YAAatB,KAAKsE,kBAChDtE,KAAKU,QAAQY,iBAAiB,YAAatB,KAAK0E,kBAChD/D,SAASW,iBAAiB,UAAWtB,KAAK2E,iBAG5CvB,EAAa5E,UAAU0I,mBAAqB,WAE1ClH,KAAKU,QAAQ3F,MAAMmN,cAAgB,OACnClI,KAAKU,QAAQ3F,MAAMoN,YAAc,OAEjCnI,KAAKU,QAAQY,iBAAiB,aAActB,KAAK6E,mBACjD7E,KAAKU,QAAQY,iBAAiB,YAAatB,KAAKiF,kBAChDjF,KAAKU,QAAQY,iBAAiB,WAAYtB,KAAKkF,kBAGjD9B,EAAa5E,UAAUgI,OAAS,WAC9BxG,KAAKgI,OAAS,GACdhI,KAAKoI,cAAgB,EACrBpI,KAAKqI,YAAcrI,KAAKgC,SAAWhC,KAAK3F,UAAY,EACpD2F,KAAKqE,KAAK+B,UAAYpG,KAAKhD,UAG7BoG,EAAa5E,UAAU+I,aAAe,SAAU5R,EAAGC,EAAGiN,GACpD,IAAIyF,EAAOtI,KAAKU,QAAQ6H,wBAExB,OAAO,IAAI3F,EAAMjN,EAAI2S,EAAKE,KAAM5S,EAAI0S,EAAKG,IAAK5F,IAAQ,IAAIzL,MAAO0L,YAGnEM,EAAa5E,UAAUmJ,UAAY,SAAUL,GAC3C,IAAIU,EAAShI,KAAKgI,OAKlB,GAFAA,EAAOb,KAAKG,GAERU,EAAOtI,OAAS,EAAG,CAGC,IAAlBsI,EAAOtI,QAAcsI,EAAOU,QAAQV,EAAO,IAG/C,IAAI9B,EADElG,KAAK2I,6BAA6BX,EAAO,GAAIA,EAAO,GAAIA,EAAO,IACxD9B,GAET0C,EADE5I,KAAK2I,6BAA6BX,EAAO,GAAIA,EAAO,GAAIA,EAAO,IACxD/B,GACT2B,EAAQ,IAAI7E,EAAOiF,EAAO,GAAI9B,EAAI0C,EAAIZ,EAAO,IAC7CH,EAAS7H,KAAK6I,sBAAsBjB,GAMxC,OAFAI,EAAOc,QAEA,CAAElB,MAAOA,EAAOC,OAAQA,GAGjC,MAAO,IAGTzE,EAAa5E,UAAUmK,6BAA+B,SAAUI,EAAIC,EAAIC,GACtE,IAAIC,EAAMH,EAAGpT,EAAIqT,EAAGrT,EAChBwT,EAAMJ,EAAGnT,EAAIoT,EAAGpT,EAChBwT,EAAMJ,EAAGrT,EAAIsT,EAAGtT,EAChB0T,EAAML,EAAGpT,EAAIqT,EAAGrT,EAEhB0T,GAAWP,EAAGpT,EAAIqT,EAAGrT,GAAK,EAA1B2T,GAAmCP,EAAGnT,EAAIoT,EAAGpT,GAAK,EAClD2T,GAAWP,EAAGrT,EAAIsT,EAAGtT,GAAK,EAA1B4T,GAAmCP,EAAGpT,EAAIqT,EAAGrT,GAAK,EAElD4T,EAAKnU,KAAKiQ,KAAK4D,EAAMA,EAAMC,EAAMA,GACjCM,EAAKpU,KAAKiQ,KAAK8D,EAAMA,EAAMC,EAAMA,GAKjCK,EAAID,GAAMD,EAAKC,GACfE,EAAUJ,GAJJD,EAAOC,GAIUG,EAAvBC,EAA6BJ,GAHvBD,EAAOC,GAG6BG,EAE1CE,EAAKZ,EAAGrT,EAAIgU,EACZE,EAAKb,EAAGpT,EAAI+T,EAEhB,MAAO,CACL1D,GAAI,IAAIrD,EAAM0G,EAAOM,EAAIN,EAAOO,GAChC3D,GAAI,IAAItD,EAAM2G,EAAOK,EAAIL,EAAOM,KAIpCzG,EAAa5E,UAAUqK,sBAAwB,SAAUjB,GACvD,IAAI5E,EAAa4E,EAAM5E,WACnBG,EAAWyE,EAAMzE,SACjB0E,EAAS,CAAEzC,MAAO,KAAMe,IAAK,MAE7B2D,EAAW9J,KAAK8B,qBAAuBqB,EAASgC,aAAanC,IAAe,EAAIhD,KAAK8B,sBAAwB9B,KAAKoI,cAElH2B,EAAW/J,KAAKgK,aAAaF,GAQjC,OANAjC,EAAOzC,MAAQpF,KAAKqI,WACpBR,EAAO1B,IAAM4D,EAEb/J,KAAKoI,cAAgB0B,EACrB9J,KAAKqI,WAAa0B,EAEXlC,GAGTzE,EAAa5E,UAAUwL,aAAe,SAAUF,GAC9C,OAAOzU,KAAK2L,IAAIhB,KAAK3F,UAAYyP,EAAW,GAAI9J,KAAKgC,WAGvDoB,EAAa5E,UAAUyL,WAAa,SAAUtU,EAAGC,EAAGqF,GAClD,IAAIpG,EAAMmL,KAAKqE,KAEfxP,EAAIqV,OAAOvU,EAAGC,GACdf,EAAIsV,IAAIxU,EAAGC,EAAGqF,EAAM,EAAG,EAAI5F,KAAK+U,IAAI,GACpCpK,KAAKyG,UAAW,GAGlBrD,EAAa5E,UAAUsJ,WAAa,SAAUF,EAAOyC,EAAYC,GAC/D,IAAIzV,EAAMmL,KAAKqE,KACXkG,EAAaD,EAAWD,EACxBG,EAAYnV,KAAKoV,MAAM7C,EAAMlI,UAEjC7K,EAAI6V,YAEJ,IAAK,IAAI9L,EAAI,EAAGA,EAAI4L,EAAW5L,GAAK,EAAG,CAErC,IAAInB,EAAImB,EAAI4L,EACRG,EAAKlN,EAAIA,EACTmN,EAAMD,EAAKlN,EACXqB,EAAI,EAAIrB,EACRoN,EAAK/L,EAAIA,EACTgM,EAAMD,EAAK/L,EAEXnJ,EAAImV,EAAMlD,EAAM5E,WAAWrN,EAC/BA,GAAK,EAAIkV,EAAKpN,EAAImK,EAAM3E,SAAStN,EACjCA,GAAK,EAAImJ,EAAI6L,EAAK/C,EAAM1E,SAASvN,EACjCA,GAAKiV,EAAMhD,EAAMzE,SAASxN,EAE1B,IAAIC,EAAIkV,EAAMlD,EAAM5E,WAAWpN,EAC/BA,GAAK,EAAIiV,EAAKpN,EAAImK,EAAM3E,SAASrN,EACjCA,GAAK,EAAIkJ,EAAI6L,EAAK/C,EAAM1E,SAAStN,EACjCA,GAAKgV,EAAMhD,EAAMzE,SAASvN,EAE1B,IAAIL,EAAQ8U,EAAaO,EAAML,EAC/BvK,KAAKiK,WAAWtU,EAAGC,EAAGL,GAGxBV,EAAIkW,YACJlW,EAAImW,QAGN5H,EAAa5E,UAAUyJ,SAAW,SAAUX,GAC1C,IAAIzS,EAAMmL,KAAKqE,KACX9O,EAAgC,oBAAjByK,KAAKkC,QAAyBlC,KAAKkC,UAAYlC,KAAKkC,QAEvErN,EAAI6V,YACJ1K,KAAKiK,WAAW3C,EAAM3R,EAAG2R,EAAM1R,EAAGL,GAClCV,EAAIkW,YACJlW,EAAImW,QAGN5H,EAAa5E,UAAUyM,UAAY,SAAUC,EAAaC,EAAWC,GACnE,IAAK,IAAIxM,EAAI,EAAGA,EAAIsM,EAAYxL,OAAQd,GAAK,EAAG,CAC9C,IAAIyM,EAAQH,EAAYtM,GAExB,GAAIyM,EAAM3L,OAAS,EACjB,IAAK,IAAI4L,EAAI,EAAGA,EAAID,EAAM3L,OAAQ4L,GAAK,EAAG,CACxC,IAAIC,EAAWF,EAAMC,GACjBhE,EAAQ,IAAI1E,EAAM2I,EAAS5V,EAAG4V,EAAS3V,EAAG2V,EAAS1I,MACnDvF,EAAQiO,EAASjO,MAErB,GAAU,IAANgO,EAKFtL,KAAKhD,SAAWM,EAChB0C,KAAKwG,SAELxG,KAAK2H,UAAUL,QACV,GAAIgE,IAAMD,EAAM3L,OAAS,EAAG,CAEjC,IAAI8L,EAAaxL,KAAK2H,UAAUL,GAC5BM,EAAQ4D,EAAW5D,MACnBC,EAAS2D,EAAW3D,OAEpBD,GAASC,GACXsD,EAAUvD,EAAOC,EAAQvK,SAO/B0C,KAAKwG,SAEL4E,EADgBC,EAAM,MAM5BjI,EAAa5E,UAAUsI,OAAS,WAC9B,IAAI2E,EAASzL,KAETkL,EAAclL,KAAKuG,MACnB5R,EAASqL,KAAKU,QACdmG,EAAQxR,KAAK2L,IAAIC,OAAOC,kBAAoB,EAAG,GAG/CwK,EAAO/W,EAAOY,MAAQsR,EACtB8E,EAAOhX,EAAOa,OAASqR,EACvB+E,EAAMjL,SAASkL,gBAAgB,6BAA8B,OAEjED,EAAIE,eAAe,KAAM,QAASnX,EAAOY,OACzCqW,EAAIE,eAAe,KAAM,SAAUnX,EAAOa,QAE1CwK,KAAKiL,UAAUC,GAAa,SAAUtD,EAAOC,EAAQvK,GACnD,IAAIyO,EAAOpL,SAASC,cAAc,QAKlC,IAAKoL,MAAMpE,EAAM3E,SAAStN,KAAOqW,MAAMpE,EAAM3E,SAASrN,KAAOoW,MAAMpE,EAAM1E,SAASvN,KAAOqW,MAAMpE,EAAM1E,SAAStN,GAAI,CAChH,IAAIqW,EAAO,KAAOrE,EAAM5E,WAAWrN,EAAEuW,QAAQ,GAAK,IAAMtE,EAAM5E,WAAWpN,EAAEsW,QAAQ,GAAxE,MAA2FtE,EAAM3E,SAAStN,EAAEuW,QAAQ,GAAK,IAAMtE,EAAM3E,SAASrN,EAAEsW,QAAQ,GAAK,IAAQtE,EAAM1E,SAASvN,EAAEuW,QAAQ,GAAK,IAAMtE,EAAM1E,SAAStN,EAAEsW,QAAQ,GAAK,IAAQtE,EAAMzE,SAASxN,EAAEuW,QAAQ,GAAK,IAAMtE,EAAMzE,SAASvN,EAAEsW,QAAQ,GAEvTH,EAAKI,aAAa,IAAKF,GACvBF,EAAKI,aAAa,gBAA8B,KAAbtE,EAAO1B,KAAY+F,QAAQ,IAC9DH,EAAKI,aAAa,SAAU7O,GAC5ByO,EAAKI,aAAa,OAAQ,QAC1BJ,EAAKI,aAAa,iBAAkB,SAEpCP,EAAIQ,YAAYL,OAEjB,SAAUR,GACX,IAAIc,EAAS1L,SAASC,cAAc,UAChCsB,EAAoC,oBAAnBuJ,EAAOvJ,QAAyBuJ,EAAOvJ,UAAYuJ,EAAOvJ,QAC/EmK,EAAOF,aAAa,IAAKjK,GACzBmK,EAAOF,aAAa,KAAMZ,EAAS5V,GACnC0W,EAAOF,aAAa,KAAMZ,EAAS3V,GACnCyW,EAAOF,aAAa,OAAQZ,EAASjO,OAErCsO,EAAIQ,YAAYC,MAGlB,IACIC,EAAS,mGAA2IZ,EAAO,IAAMC,EAAxJ,YAAoLD,EAApL,aAAiNC,EAAjN,KACTY,EAAOX,EAAIY,UAGf,QAAa7F,IAAT4F,EAAoB,CACtB,IAAIE,EAAQ9L,SAASC,cAAc,SAC/B8L,EAAQd,EAAIe,WAChBF,EAAMD,UAAY,GAElB,IAAK,IAAI5N,EAAI,EAAGA,EAAI8N,EAAMhN,OAAQd,GAAK,EACrC6N,EAAML,YAAYM,EAAM9N,GAAGgO,WAAU,IAGvCL,EAAOE,EAAMD,UAMf,MApBa,6BAoBGK,KAFLP,EAASC,EADP,WAMfnJ,EAAa5E,UAAUkD,SAAW,SAAUwJ,GAC1C,IAAI4B,EAAS9M,KAEbA,KAAKhK,QAELgK,KAAKiL,UAAUC,GAAa,SAAUtD,EAAOC,GAC3C,OAAOiF,EAAOhF,WAAWF,EAAOC,EAAOzC,MAAOyC,EAAO1B,QACpD,SAAUoF,GACX,OAAOuB,EAAO7E,SAASsD,MAGzBvL,KAAKuG,MAAQ2E,GAGf9H,EAAa5E,UAAUmD,OAAS,WAC9B,OAAO3B,KAAKuG,OAGCnD,a,qBCzlBkDxF,EAAOC,QAAwJ,SAASnC,GAAG,SAAS+B,EAAEC,GAAG,GAAGC,EAAED,GAAG,OAAOC,EAAED,GAAGG,QAAQ,IAAIa,EAAEf,EAAED,GAAG,CAACG,QAAQ,GAAGrH,GAAGkH,EAAEK,QAAO,GAAI,OAAOrC,EAAEgC,GAAGM,KAAKU,EAAEb,QAAQa,EAAEA,EAAEb,QAAQJ,GAAGiB,EAAEX,QAAO,EAAGW,EAAEb,QAAQ,IAAIF,EAAE,GAAG,OAAOF,EAAEQ,EAAEvC,EAAE+B,EAAES,EAAEP,EAAEF,EAAEU,EAAE,GAAGV,EAAE,GAAlM,CAAsM,CAAC,SAAS/B,EAAE+B,GAAG,aAAa,SAASE,EAAEjC,GAAG,IAAI+B,EAAE/B,EAAE5G,WAAW,MAAM6I,EAAEjC,EAAEnG,MAAMmI,EAAEhC,EAAElG,OAAOkJ,EAAEjB,EAAEsP,aAAa,EAAE,EAAEpP,EAAED,GAAG5E,KAAKoH,EAAE/J,GAAE,EAAGwH,EAAED,EAAEgB,GAAGE,EAAEzI,GAAE,EAAGwH,EAAED,EAAEgB,GAAGR,EAAEY,GAAE,EAAGnB,EAAED,EAAEgB,GAAiBP,EAAZW,GAAE,EAAGnB,EAAED,EAAEgB,GAAOR,EAAE,EAAE0B,EAAEhB,EAAEsB,EAAE,EAAEX,EAAE9B,EAAEsP,aAAa7O,EAAEgC,EAAE/B,EAAEyB,GAAG,OAAOlE,EAAEnG,MAAM4I,EAAEzC,EAAElG,OAAOoK,EAAEnC,EAAE4I,UAAU,EAAE,EAAElI,EAAEyB,GAAGnC,EAAEuP,aAAazN,EAAE,EAAE,GAAG7D,EAAE,SAASgC,EAAEhC,EAAE+B,EAAEE,EAAED,GAAG,MAAM,CAACuP,IAAIvP,EAAE,GAAGC,EAAEF,EAAE/B,IAAIwR,MAAMxP,EAAE,GAAGC,EAAEF,EAAE/B,GAAG,GAAGyR,KAAKzP,EAAE,GAAGC,EAAEF,EAAE/B,GAAG,GAAG0R,MAAM1P,EAAE,GAAGC,EAAEF,EAAE/B,GAAG,IAAI,SAASgD,EAAEhD,EAAE+B,EAAEE,EAAEe,GAAG,OAAOhB,EAAEhC,EAAE+B,EAAEE,EAAEe,GAAG0O,MAAM,SAASjX,EAAEuF,EAAE+B,EAAEE,EAAED,GAAG,IAAI,IAAIvH,EAAEuF,EAAE,GAAG,EAAYwE,EAARxE,EAAE,EAAEiC,EAAE,EAAMjC,EAAEwE,EAAEvC,EAAEuC,GAAG,EAAEA,GAAG/J,EAAE,IAAI,IAAIyI,EAAE,EAAEA,EAAEnB,EAAEmB,IAAI,GAAGF,EAAEE,EAAEsB,EAAEzC,EAAEC,GAAG,OAAOwC,EAAE,OAAO,KAAK,SAASpB,EAAEpD,EAAE+B,EAAEE,EAAED,GAAG,IAAI,IAAIvH,EAAEuF,EAAE,GAAG,EAAYwE,EAARxE,EAAE,EAAE+B,EAAE,EAAM/B,EAAEwE,EAAEzC,EAAEyC,GAAG,EAAEA,GAAG/J,EAAE,IAAI,IAAIyI,EAAE,EAAEA,EAAEjB,EAAEiB,IAAI,GAAGF,EAAEwB,EAAEtB,EAAEnB,EAAEC,GAAG,OAAOwC,EAAE,OAAO,KAAK3B,OAAOe,eAAe7B,EAAE,aAAa,CAACrC,OAAM,IAAKqC,EAAEY,QAAQV","file":"static/js/46.c68dd117.chunk.js","sourcesContent":["import {\n  Autocomplete,\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Divider,\n  Grid,\n  Stack,\n  TextField,\n  Typography,\n} from \"@mui/material\";\nimport { useSnackbar } from \"notistack\";\nimport { lazy, Suspense, useEffect, useRef, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport SignatureCanvas from \"react-signature-canvas\";\nimport { setLoading } from \"src/features/globalSlice\";\nimport firebase from \"firebase/compat\";\nimport db, { storage } from \"src/firebase\";\nimport moment from \"moment\";\nimport useAuth from \"src/hooks/useAuth\";\nimport { formatDocumentIdNumber } from \"src/components/core-functions/SelectionCoreFunctions\";\nimport { DatePicker } from \"@mui/lab\";\n\nconst ContractAgreementForm = lazy(() => import(\"./ContractAgreementForm\"));\nconst SurveyServiceReportForm = lazy(() => import(\"./SurveyServiceReportForm\"));\n\nexport default function CreateOrUpdateClientSurveyDialog({\n  dialogType,\n  openDialog,\n  handleCloseDialog,\n  surveyDetail,\n  setSurveyDetail,\n  fetchClientSurvey,\n  companyId,\n  documentType,\n  clientList,\n  logo,\n  companyDetails,\n}) {\n  const { user } = useAuth();\n\n  const dispatch = useDispatch();\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [clientDocumentObjectSelected, setClientDocumentObjectSelected] =\n    useState(null);\n\n  const [confirmationToCancelDialog, setConfirmationToCancelDialog] =\n    useState(false);\n\n  const [sigCanvasInstance, setSigCanvasInstance] = useState(null); // State to hold the SignatureCanvas instance\n\n  const [sigClientCanvasInstance, setSigClientCanvasInstance] = useState(null); // State to hold the SignatureCanvas instance\n\n  const [isCanvasReady, setIsCanvasReady] = useState(false); // Ensure canvas is ready\n\n  const [isCanvasClientReady, setIsCanvasClientReady] = useState(false); // Ensure canvas is ready\n\n  const temp_CanvasSigRef = useRef();\n  const temp_CanvasSigClientRef = useRef();\n\n  useEffect(() => {\n    temp_CanvasSigRef.current();\n  }, [dialogType, sigCanvasInstance]);\n\n  useEffect(() => {\n    temp_CanvasSigClientRef.current();\n  }, [dialogType, sigClientCanvasInstance]);\n\n  function canvasSig() {\n    // Ensure the canvas ref is populated after the component mounts\n    if (sigCanvasInstance && !isCanvasReady && dialogType === \"update\") {\n      if (surveyDetail?.preparedBy) {\n        const canvas = sigCanvasInstance.getCanvas();\n        const ctx = canvas.getContext(\"2d\");\n\n        const img = new Image();\n        img.crossOrigin = \"anonymous\";\n        img.src = surveyDetail?.preparedBy; // Ensure this image supports CORS\n        img.onload = () => {\n          /*  ctx.drawImage(img, 0, 0);\n          const dataUrl = canvas.toDataURL();\n          // Do something with dataUrl */\n          // Calculate the scale to make the image fit the canvas dimensions\n          const scale = Math.min(\n            canvas.width / img.width,\n            canvas.height / img.height\n          );\n\n          // Calculate the new width and height based on the scale\n          const imgWidth = img.width * scale;\n          const imgHeight = img.height * scale;\n\n          // Calculate the position to center the image\n          const x = canvas.width - imgWidth; /// 2;\n          const y = canvas.height - imgHeight; /// 2;\n\n          // Draw the image onto the canvas at the calculated position and size\n          ctx.drawImage(img, x, y, imgWidth, imgHeight);\n\n          const dataUrl = canvas.toDataURL();\n          // Do something with dataUrl\n\n          sigCanvasInstance.clear();\n          sigCanvasInstance.fromDataURL(dataUrl);\n          setIsCanvasReady(true);\n        };\n      }\n    }\n  }\n\n  temp_CanvasSigRef.current = canvasSig;\n\n  function canvasSigClient() {\n    // Ensure the canvas ref is populated after the component mounts\n    if (\n      sigClientCanvasInstance &&\n      !isCanvasClientReady &&\n      dialogType === \"update\"\n    ) {\n      if (surveyDetail?.clientSig) {\n        const canvas = sigClientCanvasInstance.getCanvas();\n        const ctx = canvas.getContext(\"2d\");\n\n        const img = new Image();\n        img.crossOrigin = \"anonymous\";\n        img.src = surveyDetail?.clientSig; // Ensure this image supports CORS\n        img.onload = () => {\n          /*  ctx.drawImage(img, 0, 0);\n          const dataUrl = canvas.toDataURL();\n          // Do something with dataUrl */\n          // Calculate the scale to make the image fit the canvas dimensions\n          const scale = Math.min(\n            canvas.width / img.width,\n            canvas.height / img.height\n          );\n\n          // Calculate the new width and height based on the scale\n          const imgWidth = img.width * scale;\n          const imgHeight = img.height * scale;\n\n          // Calculate the position to center the image\n          const x = canvas.width - imgWidth; /// 2;\n          const y = canvas.height - imgHeight; /// 2;\n\n          // Draw the image onto the canvas at the calculated position and size\n          ctx.drawImage(img, x, y, imgWidth, imgHeight);\n\n          const dataUrl = canvas.toDataURL();\n          // Do something with dataUrl\n\n          sigClientCanvasInstance.clear();\n          sigClientCanvasInstance.fromDataURL(dataUrl);\n          setIsCanvasClientReady(true);\n        };\n      }\n    }\n  }\n\n  temp_CanvasSigClientRef.current = canvasSigClient;\n\n  // Clear the signature pad\n  const clearSignature = () => {\n    //sigCanvas.current.clear();\n    sigCanvasInstance.clear();\n  };\n\n  // Clear the signature pad\n  const clearSignatureClient = () => {\n    //sigCanvasClient.current.clear();\n    sigClientCanvasInstance.clear();\n  };\n\n  async function addSurvey() {\n    dispatch(setLoading(true));\n\n    if (verifyFields()) {\n      let dataToAdd = {\n        clientId: clientDocumentObjectSelected?.id || \"\",\n        createdByUserId: user?.id || \"\",\n        createdByUserEmail: user?.email || \"\",\n        ...surveyDetail,\n      };\n\n      let preparedByURL = sigCanvasInstance\n        .getTrimmedCanvas()\n        .toDataURL(\"image/png\");\n      let clientURL = sigClientCanvasInstance\n        .getTrimmedCanvas()\n        .toDataURL(\"image/png\");\n\n      // Create a reference to the file in Firebase Storage\n      const storageRefPreparedBy = storage\n        .ref()\n        .child(\n          `survey/signatures/${moment(new Date()).format(\n            \"DD-MM-YYYY\"\n          )}/${companyId}/${\n            surveyDetail?.customerName\n          }/signature_prepared_by_${Date.now()}.png`\n        );\n      const storageRefClient = storage\n        .ref()\n        .child(\n          `survey/signatures/${moment(new Date()).format(\n            \"DD-MM-YYYY\"\n          )}/${companyId}/${\n            surveyDetail?.customerName\n          }/signature_client_${Date.now()}.png`\n        );\n\n      // Upload the Base64 dataURL string to Firebase\n      storageRefPreparedBy\n        .putString(preparedByURL, \"data_url\")\n        .then(() => {\n          console.log(\"Uploaded a prepared by data_url string!\");\n\n          // Get the download URL after upload is complete\n          storageRefPreparedBy.getDownloadURL().then((downloadURL) => {\n            dataToAdd = { ...dataToAdd, preparedBy: downloadURL };\n\n            // Upload the Base64 dataURL string to Firebase\n            storageRefClient\n              .putString(clientURL, \"data_url\")\n              .then(() => {\n                console.log(\"Uploaded a client by data_url string!\");\n\n                // Get the download URL after upload is complete\n                storageRefClient\n                  .getDownloadURL()\n                  .then(async (downloadURLClient) => {\n                    dataToAdd = { ...dataToAdd, clientSig: downloadURLClient };\n\n                    let collectionName = documentType?.id;\n\n                    var documentDocRef = db\n                      .collection(\"company\")\n                      .doc(companyId)\n                      .collection(collectionName)\n                      .doc(\"documentIndex\");\n\n                    db.runTransaction((transaction) => {\n                      return transaction.get(documentDocRef).then((sfDoc) => {\n                        if (!sfDoc.exists) {\n                          // throw \"Document does not exist!\";\n                          transaction.update(documentDocRef, {\n                            documentIndex: 1,\n                          });\n                          return 1;\n                        }\n\n                        var newDocumentNumber =\n                          Number(sfDoc.data().documentIndex) + 1;\n                        transaction.update(documentDocRef, {\n                          documentIndex: newDocumentNumber,\n                        });\n                        return newDocumentNumber;\n                      });\n                    })\n                      .then(async (documentNumber) => {\n                        let documentNumberDocString =\n                          await formatDocumentIdNumber(documentNumber);\n\n                        if (documentNumberDocString) {\n                          await db\n                            .collection(\"company\")\n                            .doc(companyId)\n                            .collection(collectionName)\n                            .doc(documentNumberDocString)\n                            .set(\n                              {\n                                ...dataToAdd,\n                                status: \"Pending\",\n                                dateCreated:\n                                  firebase.firestore.Timestamp.fromDate(\n                                    new Date()\n                                  ),\n                              },\n                              { merge: true }\n                            )\n                            .then(() => {\n                              enqueueSnackbar(\n                                `${documentType?.title} recorded successfully`\n                              );\n\n                              fetchClientSurvey(companyId, collectionName);\n                              handleCloseDialog();\n                              dispatch(setLoading(false));\n                            })\n                            .catch((error) => {\n                              enqueueSnackbar(\n                                `Error occured while saving ${documentType?.title}: ${error?.message}`,\n                                { variant: \"error\" }\n                              );\n                              dispatch(setLoading(false));\n                            });\n                        }\n                      })\n                      .catch((err) => {\n                        enqueueSnackbar(\n                          `Error occured while overall Invoice saving transactions: ${err?.message}`,\n                          { variant: \"error\" }\n                        );\n                        dispatch(setLoading(false));\n                      });\n                  });\n              })\n              .catch((error) => {\n                //console.error(\"Error uploading client signature: \", error);\n                enqueueSnackbar(\n                  `Error occured while uploading signature of client: ${error?.message}`,\n                  { variant: \"error\" }\n                );\n                dispatch(setLoading(false));\n              });\n          });\n        })\n        .catch((error) => {\n          //console.error(\"Error uploading prepared by signature: \", error);\n          enqueueSnackbar(\n            `Error occured while uploading signature of prepared by: ${error?.message}`,\n            { variant: \"error\" }\n          );\n          dispatch(setLoading(false));\n        });\n    } else {\n      enqueueSnackbar(\n        \"Please check if all required fields have been filled correctly\",\n        { variant: \"error\" }\n      );\n      dispatch(setLoading(false));\n    }\n  }\n\n  async function updateSurvey() {\n    dispatch(setLoading(true));\n\n    if (verifyFields()) {\n      let dataToUpdate = {\n        clientId: clientDocumentObjectSelected?.id || \"\",\n        updatedByUserId: user?.id || \"\",\n        updatedByUserEmail: user?.email || \"\",\n        ...surveyDetail,\n      };\n\n      let preparedByURL = sigCanvasInstance\n        .getTrimmedCanvas()\n        .toDataURL(\"image/png\");\n      let clientURL = sigClientCanvasInstance\n        .getTrimmedCanvas()\n        .toDataURL(\"image/png\");\n\n      // Create a reference to the file in Firebase Storage\n      const storageRefPreparedBy = storage\n        .ref()\n        .child(\n          `survey/signatures/${moment(new Date()).format(\n            \"DD-MM-YYYY\"\n          )}/${companyId}/${\n            surveyDetail?.customerName\n          }/signature_prepared_by_${Date.now()}.png`\n        );\n      const storageRefClient = storage\n        .ref()\n        .child(\n          `survey/signatures/${moment(new Date()).format(\n            \"DD-MM-YYYY\"\n          )}/${companyId}/${\n            surveyDetail?.customerName\n          }/signature_client_${Date.now()}.png`\n        );\n\n      // Upload the Base64 dataURL string to Firebase\n      storageRefPreparedBy\n        .putString(preparedByURL, \"data_url\")\n        .then(() => {\n          console.log(\"Uploaded a prepared by data_url string!\");\n\n          // Get the download URL after upload is complete\n          storageRefPreparedBy.getDownloadURL().then((downloadURL) => {\n            dataToUpdate = { ...dataToUpdate, preparedBy: downloadURL };\n\n            // Upload the Base64 dataURL string to Firebase\n            storageRefClient\n              .putString(clientURL, \"data_url\")\n              .then(() => {\n                console.log(\"Uploaded a client by data_url string!\");\n\n                // Get the download URL after upload is complete\n                storageRefClient\n                  .getDownloadURL()\n                  .then(async (downloadURLClient) => {\n                    dataToUpdate = {\n                      ...dataToUpdate,\n                      clientSig: downloadURLClient,\n                    };\n\n                    let collectionName = documentType?.id;\n\n                    await db\n                      .collection(\"company\")\n                      .doc(companyId)\n                      .collection(collectionName)\n                      .doc(surveyDetail?.id)\n                      .set(\n                        {\n                          ...dataToUpdate,\n                        },\n                        { merge: true }\n                      )\n                      .then(() => {\n                        enqueueSnackbar(\n                          `${documentType?.title} updated successfully`\n                        );\n                        fetchClientSurvey(companyId, collectionName);\n                        handleCloseDialog();\n                        dispatch(setLoading(false));\n                      })\n                      .catch((error) => {\n                        enqueueSnackbar(\n                          `Error occured while updating ${documentType?.title}: ${error?.message}`,\n                          { variant: \"error\" }\n                        );\n                        dispatch(setLoading(false));\n                      });\n                  });\n              })\n              .catch((error) => {\n                //console.error(\"Error uploading client signature: \", error);\n                enqueueSnackbar(\n                  `Error occured while uploading signature of client: ${error?.message}`,\n                  { variant: \"error\" }\n                );\n                dispatch(setLoading(false));\n              });\n          });\n        })\n        .catch((error) => {\n          //console.error(\"Error uploading prepared by signature: \", error);\n          enqueueSnackbar(\n            `Error occured while uploading signature of prepared by: ${error?.message}`,\n            { variant: \"error\" }\n          );\n          dispatch(setLoading(false));\n        });\n    } else {\n      enqueueSnackbar(\n        \"Please check if all required fields have been filled correctly\",\n        { variant: \"error\" }\n      );\n      dispatch(setLoading(false));\n    }\n  }\n\n  function verifyFields() {\n    if (!surveyDetail?.customerName || !surveyDetail?.address) {\n      return false;\n    } else return true;\n  }\n\n  return (\n    <>\n      <Dialog fullWidth maxWidth=\"lg\" open={openDialog}>\n        <DialogTitle>{`${dialogType === \"update\" ? \"Update\" : \"Add new\"} ${\n          documentType?.title\n        }`}</DialogTitle>\n        <DialogContent>\n          <Divider\n            sx={{\n              borderStyle: \"dotted\",\n            }}\n          />\n          <br />\n          {dialogType === \"update\" ? (\n            <>\n              <Grid container spacing={3}>\n                <Grid item xs={12} md={4}>\n                  <Autocomplete\n                    ListboxProps={{ style: { maxHeight: \"70vh\" } }}\n                    size=\"small\"\n                    label=\"Update status\"\n                    id=\"status-drop-down\"\n                    options={[\"Pending\", \"Confirmed\", \"Rejected\"]}\n                    value={surveyDetail?.status || null}\n                    sx={{ width: 300 }}\n                    renderInput={(params) => (\n                      <TextField\n                        {...params}\n                        label=\"Update status\"\n                        InputLabelProps={{ required: true }}\n                        size=\"large\"\n                      />\n                    )}\n                    required\n                    onChange={(e, value, reason) => {\n                      e.preventDefault();\n                      if (\n                        reason !== \"removeOption\" &&\n                        reason !== \"clear\" &&\n                        value\n                      ) {\n                        setSurveyDetail((previous) => {\n                          return {\n                            ...previous,\n                            status: value,\n                          };\n                        });\n                      } else if (\n                        reason === \"removeOption\" ||\n                        reason === \"clear\"\n                      ) {\n                        setSurveyDetail((previous) => {\n                          return {\n                            ...previous,\n                            status: null,\n                          };\n                        });\n                      }\n                    }}\n                    getOptionLabel={(option) => option}\n                  />\n                </Grid>\n              </Grid>\n\n              <br />\n              <Divider\n                sx={{\n                  borderStyle: \"dotted\",\n                }}\n              />\n              <br />\n            </>\n          ) : (\n            <></>\n          )}\n\n          {documentType?.title === \"Contract Agreement\" ? (\n            <Suspense fallback={<></>}>\n              <ContractAgreementForm\n                clientList={clientList}\n                clientDocumentObjectSelected={clientDocumentObjectSelected}\n                setClientDocumentObjectSelected={\n                  setClientDocumentObjectSelected\n                }\n                companyId={companyId}\n                dialogType={dialogType}\n                surveyDetail={surveyDetail}\n                setSurveyDetail={setSurveyDetail}\n                logo={logo}\n                companyDetails={companyDetails}\n              />\n            </Suspense>\n          ) : (\n            <Suspense fallback={<></>}>\n              <SurveyServiceReportForm\n                clientList={clientList}\n                clientDocumentObjectSelected={clientDocumentObjectSelected}\n                setClientDocumentObjectSelected={\n                  setClientDocumentObjectSelected\n                }\n                setSurveyDetail={setSurveyDetail}\n                surveyDetail={surveyDetail}\n                dialogType={dialogType}\n                documentType={documentType}\n              />\n            </Suspense>\n          )}\n\n          <br />\n          <br />\n          <Divider\n            sx={{\n              borderStyle: \"dotted\",\n            }}\n          />\n          <br />\n\n          <Grid container spacing={3}>\n            {documentType?.title === \"Contract Agreement\" ? (\n              <Grid item xs={12} md={12}>\n                <Grid container spacing={3}>\n                  <Grid item xs={12} md={4}>\n                    <DatePicker\n                      label=\"Signature date\"\n                      value={\n                        surveyDetail?.signatureDate?.seconds\n                          ? new Date(surveyDetail?.signatureDate.toDate())\n                          : surveyDetail?.signatureDate\n                          ? surveyDetail?.signatureDate\n                          : \"\"\n                      }\n                      onChange={(newValue) => {\n                        setSurveyDetail((previous) => {\n                          return {\n                            ...previous,\n                            signatureDate: newValue,\n                          };\n                        });\n                      }}\n                      renderInput={(params) => (\n                        <TextField {...params} size=\"large\" />\n                      )}\n                      inputFormat=\"dd/MM/yyyy\"\n                    />\n                  </Grid>\n                </Grid>\n              </Grid>\n            ) : (\n              <></>\n            )}\n\n            <Grid item xs={12} md={6}>\n              {dialogType === \"view\" /* || dialogType === \"update\"  */ ? (\n                <Stack spacing={3}>\n                  <Typography>\n                    {`PREPARED BY: ${surveyDetail?.preparedByName || \"\"}`}\n                  </Typography>\n\n                  <div>\n                    <img\n                      src={surveyDetail?.preparedBy || \"\"}\n                      alt=\"signaturePreparedBy\"\n                    />\n                  </div>\n                </Stack>\n              ) : (\n                <Stack spacing={3}>\n                  <TextField\n                    variant=\"outlined\"\n                    name=\"preparedByName\"\n                    label=\"PREPARED BY\"\n                    id=\"preparedByName\"\n                    type=\"text\"\n                    value={surveyDetail?.preparedByName || \"\"}\n                    size=\"large\"\n                    fullWidth\n                    onChange={(event) => {\n                      setSurveyDetail((previous) => {\n                        return {\n                          ...previous,\n                          preparedByName: event.target.value,\n                        };\n                      });\n                    }}\n                    disabled={dialogType === \"view\"}\n                  />\n\n                  <Typography>PREPARED BY SIGNATURE:</Typography>\n                  <Box\n                    sx={{\n                      border: \"2px solid gray\",\n                      padding: \"10px\",\n                      borderRadius: \"8px\",\n                    }}\n                  >\n                    <SignatureCanvas\n                      penColor=\"black\"\n                      canvasProps={{\n                        width: 500,\n                        height: 200,\n                        className: \"sigCanvas\",\n                      }}\n                      // ref={sigCanvas}\n                      ref={(ref) => {\n                        setSigCanvasInstance(ref);\n                      }} // Callback ref\n                      disabled={dialogType === \"view\"}\n                    />\n                    {/*  <SignatureCanvas\n                      ref={(ref) => {\n                        setSigCanvasInstance(ref);\n                      }}\n                    /> */}\n                  </Box>\n\n                  {/*   {dialogType === \"add\" ? ( */}\n                  <Button\n                    variant=\"outlined\"\n                    onClick={clearSignature}\n                    sx={{ margin: \"10px\" }}\n                    size=\"large\"\n                  >\n                    Clear signature\n                  </Button>\n                  {/*  ) : (\n                    <></>\n                  )} */}\n                </Stack>\n              )}\n            </Grid>\n            <Grid item xs={12} md={6}>\n              {dialogType === \"view\" /*  || dialogType === \"update\"  */ ? (\n                <Stack spacing={3}>\n                  <Typography>{`CLIENT: ${\n                    surveyDetail?.clientSigName || \"\"\n                  }`}</Typography>\n                  <div>\n                    <img\n                      src={surveyDetail?.clientSig || \"\"}\n                      alt=\"signaturePreparedBy\"\n                    />\n                  </div>\n                </Stack>\n              ) : (\n                <Stack spacing={3}>\n                  <TextField\n                    variant=\"outlined\"\n                    name=\"clientSigName\"\n                    label=\"CLIENT NAME\"\n                    id=\"clientSigName\"\n                    type=\"text\"\n                    value={surveyDetail?.clientSigName || \"\"}\n                    size=\"large\"\n                    fullWidth\n                    onChange={(event) => {\n                      setSurveyDetail((previous) => {\n                        return {\n                          ...previous,\n                          clientSigName: event.target.value,\n                        };\n                      });\n                    }}\n                    disabled={dialogType === \"view\"}\n                  />\n\n                  <Typography>CLIENT SIGNATURE:</Typography>\n\n                  <Box\n                    sx={{\n                      border: \"2px solid gray\",\n                      padding: \"10px\",\n                      borderRadius: \"8px\",\n                    }}\n                  >\n                    <SignatureCanvas\n                      penColor=\"black\"\n                      canvasProps={{\n                        width: 500,\n                        height: 200,\n                        className: \"sigCanvas\",\n                      }}\n                      /* ref={sigCanvasClient} */\n                      ref={(ref) => {\n                        setSigClientCanvasInstance(ref);\n                      }} // Callback ref\n                      disabled={\n                        dialogType === \"view\" /* || dialogType === \"update\" */\n                      }\n                    />\n                  </Box>\n\n                  {/*   {dialogType === \"add\" ? ( */}\n                  <Button\n                    variant=\"outlined\"\n                    onClick={clearSignatureClient}\n                    sx={{ margin: \"10px\" }}\n                    size=\"large\"\n                  >\n                    Clear signature\n                  </Button>\n                  {/* ) : (\n                    <></>\n                  )} */}\n                </Stack>\n              )}\n            </Grid>\n          </Grid>\n        </DialogContent>\n\n        <DialogActions>\n          {dialogType !== \"view\" ? (\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => {\n                if (dialogType === \"add\") {\n                  addSurvey();\n                } else if (dialogType === \"update\") {\n                  updateSurvey();\n                }\n              }}\n            >\n              {dialogType === \"add\"\n                ? \"Submit changes\"\n                : dialogType === \"update\"\n                ? \"Update form\"\n                : \"\"}\n            </Button>\n          ) : (\n            <></>\n          )}\n\n          <Button\n            variant=\"contained\"\n            color=\"error\"\n            onClick={\n              () =>\n                setConfirmationToCancelDialog(true) /* handleCloseDialog() */\n            }\n          >\n            Cancel\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {confirmationToCancelDialog ? (\n        <Dialog open={confirmationToCancelDialog} fullWidth maxWidth=\"sm\">\n          <DialogTitle>Confirmation</DialogTitle>\n          <DialogContent>\n            <Divider />\n            <br />\n            <Typography>{`Are you sure you want to cancel the ${documentType?.title}?`}</Typography>\n          </DialogContent>\n          <DialogActions>\n            <Button\n              variant=\"contained\"\n              color=\"error\"\n              onClick={() => handleCloseDialog()}\n            >\n              Yes\n            </Button>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => setConfirmationToCancelDialog(false)}\n            >\n              No\n            </Button>\n          </DialogActions>\n        </Dialog>\n      ) : (\n        <></>\n      )}\n    </>\n  );\n}\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t(require(\"prop-types\"),require(\"react\"),require(\"signature_pad\"),require(\"trim-canvas\")):\"function\"==typeof define&&define.amd?define([\"prop-types\",\"react\",\"signature_pad\",\"trim-canvas\"],t):\"object\"==typeof exports?exports.SignatureCanvas=t(require(\"prop-types\"),require(\"react\"),require(\"signature_pad\"),require(\"trim-canvas\")):e.SignatureCanvas=t(e[\"prop-types\"],e.react,e.signature_pad,e[\"trim-canvas\"])}(this,function(e,t,n,r){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p=\"\",t(0)}([function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function u(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=r(f),l=n(2),d=r(l),v=n(3),h=r(v),_=n(4),g=r(_),m=function(e){function t(){var e,n,r,u;o(this,t);for(var s=arguments.length,c=Array(s),f=0;f<s;f++)c[f]=arguments[f];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r._sigPad=null,r._excludeOurProps=function(){var e=r.props,t=(e.canvasProps,e.clearOnResize,a(e,[\"canvasProps\",\"clearOnResize\"]));return t},r.getCanvas=function(){return r._canvas},r.getTrimmedCanvas=function(){var e=document.createElement(\"canvas\");return e.width=r._canvas.width,e.height=r._canvas.height,e.getContext(\"2d\").drawImage(r._canvas,0,0),(0,g.default)(e)},r.getSignaturePad=function(){return r._sigPad},r._checkClearOnResize=function(){r.props.clearOnResize&&r._resizeCanvas()},r._resizeCanvas=function(){var e=r.props.canvasProps||{},t=e.width,n=e.height;if(!t||!n){var a=r._canvas,o=Math.max(window.devicePixelRatio||1,1);t||(a.width=a.offsetWidth*o),n||(a.height=a.offsetHeight*o),a.getContext(\"2d\").scale(o,o),r.clear()}},r.on=function(){return window.addEventListener(\"resize\",r._checkClearOnResize),r._sigPad.on()},r.off=function(){return window.removeEventListener(\"resize\",r._checkClearOnResize),r._sigPad.off()},r.clear=function(){return r._sigPad.clear()},r.isEmpty=function(){return r._sigPad.isEmpty()},r.fromDataURL=function(e,t){return r._sigPad.fromDataURL(e,t)},r.toDataURL=function(e,t){return r._sigPad.toDataURL(e,t)},r.fromData=function(e){return r._sigPad.fromData(e)},r.toData=function(){return r._sigPad.toData()},u=n,i(r,u)}return u(t,e),c(t,[{key:\"componentDidMount\",value:function(){this._sigPad=new h.default(this._canvas,this._excludeOurProps()),this._resizeCanvas(),this.on()}},{key:\"componentWillUnmount\",value:function(){this.off()}},{key:\"componentDidUpdate\",value:function(){Object.assign(this._sigPad,this._excludeOurProps())}},{key:\"render\",value:function(){var e=this,t=this.props.canvasProps;return d.default.createElement(\"canvas\",s({ref:function(t){e._canvas=t}},t))}}]),t}(l.Component);m.propTypes={velocityFilterWeight:p.default.number,minWidth:p.default.number,maxWidth:p.default.number,minDistance:p.default.number,dotSize:p.default.oneOfType([p.default.number,p.default.func]),penColor:p.default.string,throttle:p.default.number,onEnd:p.default.func,onBegin:p.default.func,canvasProps:p.default.object,clearOnResize:p.default.bool},m.defaultProps={clearOnResize:!0},t.default=m},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r}])});","/*!\n * Signature Pad v2.3.2\n * https://github.com/szimek/signature_pad\n *\n * Copyright 2017 Szymon Nowak\n * Released under the MIT license\n *\n * The main idea and some parts of the code (e.g. drawing variable width Bzier curve) are taken from:\n * http://corner.squareup.com/2012/07/smoother-signatures.html\n *\n * Implementation of interpolation using cubic Bzier curves is taken from:\n * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript\n *\n * Algorithm for approximated length of a Bzier curve is taken from:\n * http://www.lemoda.net/maths/bezier-length/index.html\n *\n */\n\nfunction Point(x, y, time) {\n  this.x = x;\n  this.y = y;\n  this.time = time || new Date().getTime();\n}\n\nPoint.prototype.velocityFrom = function (start) {\n  return this.time !== start.time ? this.distanceTo(start) / (this.time - start.time) : 1;\n};\n\nPoint.prototype.distanceTo = function (start) {\n  return Math.sqrt(Math.pow(this.x - start.x, 2) + Math.pow(this.y - start.y, 2));\n};\n\nPoint.prototype.equals = function (other) {\n  return this.x === other.x && this.y === other.y && this.time === other.time;\n};\n\nfunction Bezier(startPoint, control1, control2, endPoint) {\n  this.startPoint = startPoint;\n  this.control1 = control1;\n  this.control2 = control2;\n  this.endPoint = endPoint;\n}\n\n// Returns approximated length.\nBezier.prototype.length = function () {\n  var steps = 10;\n  var length = 0;\n  var px = void 0;\n  var py = void 0;\n\n  for (var i = 0; i <= steps; i += 1) {\n    var t = i / steps;\n    var cx = this._point(t, this.startPoint.x, this.control1.x, this.control2.x, this.endPoint.x);\n    var cy = this._point(t, this.startPoint.y, this.control1.y, this.control2.y, this.endPoint.y);\n    if (i > 0) {\n      var xdiff = cx - px;\n      var ydiff = cy - py;\n      length += Math.sqrt(xdiff * xdiff + ydiff * ydiff);\n    }\n    px = cx;\n    py = cy;\n  }\n\n  return length;\n};\n\n/* eslint-disable no-multi-spaces, space-in-parens */\nBezier.prototype._point = function (t, start, c1, c2, end) {\n  return start * (1.0 - t) * (1.0 - t) * (1.0 - t) + 3.0 * c1 * (1.0 - t) * (1.0 - t) * t + 3.0 * c2 * (1.0 - t) * t * t + end * t * t * t;\n};\n\n/* eslint-disable */\n\n// http://stackoverflow.com/a/27078401/815507\nfunction throttle(func, wait, options) {\n  var context, args, result;\n  var timeout = null;\n  var previous = 0;\n  if (!options) options = {};\n  var later = function later() {\n    previous = options.leading === false ? 0 : Date.now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n  return function () {\n    var now = Date.now();\n    if (!previous && options.leading === false) previous = now;\n    var remaining = wait - (now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n}\n\nfunction SignaturePad(canvas, options) {\n  var self = this;\n  var opts = options || {};\n\n  this.velocityFilterWeight = opts.velocityFilterWeight || 0.7;\n  this.minWidth = opts.minWidth || 0.5;\n  this.maxWidth = opts.maxWidth || 2.5;\n  this.throttle = 'throttle' in opts ? opts.throttle : 16; // in miliseconds\n  this.minDistance = 'minDistance' in opts ? opts.minDistance : 5;\n\n  if (this.throttle) {\n    this._strokeMoveUpdate = throttle(SignaturePad.prototype._strokeUpdate, this.throttle);\n  } else {\n    this._strokeMoveUpdate = SignaturePad.prototype._strokeUpdate;\n  }\n\n  this.dotSize = opts.dotSize || function () {\n    return (this.minWidth + this.maxWidth) / 2;\n  };\n  this.penColor = opts.penColor || 'black';\n  this.backgroundColor = opts.backgroundColor || 'rgba(0,0,0,0)';\n  this.onBegin = opts.onBegin;\n  this.onEnd = opts.onEnd;\n\n  this._canvas = canvas;\n  this._ctx = canvas.getContext('2d');\n  this.clear();\n\n  // We need add these inline so they are available to unbind while still having\n  // access to 'self' we could use _.bind but it's not worth adding a dependency.\n  this._handleMouseDown = function (event) {\n    if (event.which === 1) {\n      self._mouseButtonDown = true;\n      self._strokeBegin(event);\n    }\n  };\n\n  this._handleMouseMove = function (event) {\n    if (self._mouseButtonDown) {\n      self._strokeMoveUpdate(event);\n    }\n  };\n\n  this._handleMouseUp = function (event) {\n    if (event.which === 1 && self._mouseButtonDown) {\n      self._mouseButtonDown = false;\n      self._strokeEnd(event);\n    }\n  };\n\n  this._handleTouchStart = function (event) {\n    if (event.targetTouches.length === 1) {\n      var touch = event.changedTouches[0];\n      self._strokeBegin(touch);\n    }\n  };\n\n  this._handleTouchMove = function (event) {\n    // Prevent scrolling.\n    event.preventDefault();\n\n    var touch = event.targetTouches[0];\n    self._strokeMoveUpdate(touch);\n  };\n\n  this._handleTouchEnd = function (event) {\n    var wasCanvasTouched = event.target === self._canvas;\n    if (wasCanvasTouched) {\n      event.preventDefault();\n      self._strokeEnd(event);\n    }\n  };\n\n  // Enable mouse and touch event handlers\n  this.on();\n}\n\n// Public methods\nSignaturePad.prototype.clear = function () {\n  var ctx = this._ctx;\n  var canvas = this._canvas;\n\n  ctx.fillStyle = this.backgroundColor;\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n  this._data = [];\n  this._reset();\n  this._isEmpty = true;\n};\n\nSignaturePad.prototype.fromDataURL = function (dataUrl) {\n  var _this = this;\n\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var image = new Image();\n  var ratio = options.ratio || window.devicePixelRatio || 1;\n  var width = options.width || this._canvas.width / ratio;\n  var height = options.height || this._canvas.height / ratio;\n\n  this._reset();\n  image.src = dataUrl;\n  image.onload = function () {\n    _this._ctx.drawImage(image, 0, 0, width, height);\n  };\n  this._isEmpty = false;\n};\n\nSignaturePad.prototype.toDataURL = function (type) {\n  var _canvas;\n\n  switch (type) {\n    case 'image/svg+xml':\n      return this._toSVG();\n    default:\n      for (var _len = arguments.length, options = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        options[_key - 1] = arguments[_key];\n      }\n\n      return (_canvas = this._canvas).toDataURL.apply(_canvas, [type].concat(options));\n  }\n};\n\nSignaturePad.prototype.on = function () {\n  this._handleMouseEvents();\n  this._handleTouchEvents();\n};\n\nSignaturePad.prototype.off = function () {\n  this._canvas.removeEventListener('mousedown', this._handleMouseDown);\n  this._canvas.removeEventListener('mousemove', this._handleMouseMove);\n  document.removeEventListener('mouseup', this._handleMouseUp);\n\n  this._canvas.removeEventListener('touchstart', this._handleTouchStart);\n  this._canvas.removeEventListener('touchmove', this._handleTouchMove);\n  this._canvas.removeEventListener('touchend', this._handleTouchEnd);\n};\n\nSignaturePad.prototype.isEmpty = function () {\n  return this._isEmpty;\n};\n\n// Private methods\nSignaturePad.prototype._strokeBegin = function (event) {\n  this._data.push([]);\n  this._reset();\n  this._strokeUpdate(event);\n\n  if (typeof this.onBegin === 'function') {\n    this.onBegin(event);\n  }\n};\n\nSignaturePad.prototype._strokeUpdate = function (event) {\n  var x = event.clientX;\n  var y = event.clientY;\n\n  var point = this._createPoint(x, y);\n  var lastPointGroup = this._data[this._data.length - 1];\n  var lastPoint = lastPointGroup && lastPointGroup[lastPointGroup.length - 1];\n  var isLastPointTooClose = lastPoint && point.distanceTo(lastPoint) < this.minDistance;\n\n  // Skip this point if it's too close to the previous one\n  if (!(lastPoint && isLastPointTooClose)) {\n    var _addPoint = this._addPoint(point),\n        curve = _addPoint.curve,\n        widths = _addPoint.widths;\n\n    if (curve && widths) {\n      this._drawCurve(curve, widths.start, widths.end);\n    }\n\n    this._data[this._data.length - 1].push({\n      x: point.x,\n      y: point.y,\n      time: point.time,\n      color: this.penColor\n    });\n  }\n};\n\nSignaturePad.prototype._strokeEnd = function (event) {\n  var canDrawCurve = this.points.length > 2;\n  var point = this.points[0]; // Point instance\n\n  if (!canDrawCurve && point) {\n    this._drawDot(point);\n  }\n\n  if (point) {\n    var lastPointGroup = this._data[this._data.length - 1];\n    var lastPoint = lastPointGroup[lastPointGroup.length - 1]; // plain object\n\n    // When drawing a dot, there's only one point in a group, so without this check\n    // such group would end up with exactly the same 2 points.\n    if (!point.equals(lastPoint)) {\n      lastPointGroup.push({\n        x: point.x,\n        y: point.y,\n        time: point.time,\n        color: this.penColor\n      });\n    }\n  }\n\n  if (typeof this.onEnd === 'function') {\n    this.onEnd(event);\n  }\n};\n\nSignaturePad.prototype._handleMouseEvents = function () {\n  this._mouseButtonDown = false;\n\n  this._canvas.addEventListener('mousedown', this._handleMouseDown);\n  this._canvas.addEventListener('mousemove', this._handleMouseMove);\n  document.addEventListener('mouseup', this._handleMouseUp);\n};\n\nSignaturePad.prototype._handleTouchEvents = function () {\n  // Pass touch events to canvas element on mobile IE11 and Edge.\n  this._canvas.style.msTouchAction = 'none';\n  this._canvas.style.touchAction = 'none';\n\n  this._canvas.addEventListener('touchstart', this._handleTouchStart);\n  this._canvas.addEventListener('touchmove', this._handleTouchMove);\n  this._canvas.addEventListener('touchend', this._handleTouchEnd);\n};\n\nSignaturePad.prototype._reset = function () {\n  this.points = [];\n  this._lastVelocity = 0;\n  this._lastWidth = (this.minWidth + this.maxWidth) / 2;\n  this._ctx.fillStyle = this.penColor;\n};\n\nSignaturePad.prototype._createPoint = function (x, y, time) {\n  var rect = this._canvas.getBoundingClientRect();\n\n  return new Point(x - rect.left, y - rect.top, time || new Date().getTime());\n};\n\nSignaturePad.prototype._addPoint = function (point) {\n  var points = this.points;\n  var tmp = void 0;\n\n  points.push(point);\n\n  if (points.length > 2) {\n    // To reduce the initial lag make it work with 3 points\n    // by copying the first point to the beginning.\n    if (points.length === 3) points.unshift(points[0]);\n\n    tmp = this._calculateCurveControlPoints(points[0], points[1], points[2]);\n    var c2 = tmp.c2;\n    tmp = this._calculateCurveControlPoints(points[1], points[2], points[3]);\n    var c3 = tmp.c1;\n    var curve = new Bezier(points[1], c2, c3, points[2]);\n    var widths = this._calculateCurveWidths(curve);\n\n    // Remove the first element from the list,\n    // so that we always have no more than 4 points in points array.\n    points.shift();\n\n    return { curve: curve, widths: widths };\n  }\n\n  return {};\n};\n\nSignaturePad.prototype._calculateCurveControlPoints = function (s1, s2, s3) {\n  var dx1 = s1.x - s2.x;\n  var dy1 = s1.y - s2.y;\n  var dx2 = s2.x - s3.x;\n  var dy2 = s2.y - s3.y;\n\n  var m1 = { x: (s1.x + s2.x) / 2.0, y: (s1.y + s2.y) / 2.0 };\n  var m2 = { x: (s2.x + s3.x) / 2.0, y: (s2.y + s3.y) / 2.0 };\n\n  var l1 = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n  var l2 = Math.sqrt(dx2 * dx2 + dy2 * dy2);\n\n  var dxm = m1.x - m2.x;\n  var dym = m1.y - m2.y;\n\n  var k = l2 / (l1 + l2);\n  var cm = { x: m2.x + dxm * k, y: m2.y + dym * k };\n\n  var tx = s2.x - cm.x;\n  var ty = s2.y - cm.y;\n\n  return {\n    c1: new Point(m1.x + tx, m1.y + ty),\n    c2: new Point(m2.x + tx, m2.y + ty)\n  };\n};\n\nSignaturePad.prototype._calculateCurveWidths = function (curve) {\n  var startPoint = curve.startPoint;\n  var endPoint = curve.endPoint;\n  var widths = { start: null, end: null };\n\n  var velocity = this.velocityFilterWeight * endPoint.velocityFrom(startPoint) + (1 - this.velocityFilterWeight) * this._lastVelocity;\n\n  var newWidth = this._strokeWidth(velocity);\n\n  widths.start = this._lastWidth;\n  widths.end = newWidth;\n\n  this._lastVelocity = velocity;\n  this._lastWidth = newWidth;\n\n  return widths;\n};\n\nSignaturePad.prototype._strokeWidth = function (velocity) {\n  return Math.max(this.maxWidth / (velocity + 1), this.minWidth);\n};\n\nSignaturePad.prototype._drawPoint = function (x, y, size) {\n  var ctx = this._ctx;\n\n  ctx.moveTo(x, y);\n  ctx.arc(x, y, size, 0, 2 * Math.PI, false);\n  this._isEmpty = false;\n};\n\nSignaturePad.prototype._drawCurve = function (curve, startWidth, endWidth) {\n  var ctx = this._ctx;\n  var widthDelta = endWidth - startWidth;\n  var drawSteps = Math.floor(curve.length());\n\n  ctx.beginPath();\n\n  for (var i = 0; i < drawSteps; i += 1) {\n    // Calculate the Bezier (x, y) coordinate for this step.\n    var t = i / drawSteps;\n    var tt = t * t;\n    var ttt = tt * t;\n    var u = 1 - t;\n    var uu = u * u;\n    var uuu = uu * u;\n\n    var x = uuu * curve.startPoint.x;\n    x += 3 * uu * t * curve.control1.x;\n    x += 3 * u * tt * curve.control2.x;\n    x += ttt * curve.endPoint.x;\n\n    var y = uuu * curve.startPoint.y;\n    y += 3 * uu * t * curve.control1.y;\n    y += 3 * u * tt * curve.control2.y;\n    y += ttt * curve.endPoint.y;\n\n    var width = startWidth + ttt * widthDelta;\n    this._drawPoint(x, y, width);\n  }\n\n  ctx.closePath();\n  ctx.fill();\n};\n\nSignaturePad.prototype._drawDot = function (point) {\n  var ctx = this._ctx;\n  var width = typeof this.dotSize === 'function' ? this.dotSize() : this.dotSize;\n\n  ctx.beginPath();\n  this._drawPoint(point.x, point.y, width);\n  ctx.closePath();\n  ctx.fill();\n};\n\nSignaturePad.prototype._fromData = function (pointGroups, drawCurve, drawDot) {\n  for (var i = 0; i < pointGroups.length; i += 1) {\n    var group = pointGroups[i];\n\n    if (group.length > 1) {\n      for (var j = 0; j < group.length; j += 1) {\n        var rawPoint = group[j];\n        var point = new Point(rawPoint.x, rawPoint.y, rawPoint.time);\n        var color = rawPoint.color;\n\n        if (j === 0) {\n          // First point in a group. Nothing to draw yet.\n\n          // All points in the group have the same color, so it's enough to set\n          // penColor just at the beginning.\n          this.penColor = color;\n          this._reset();\n\n          this._addPoint(point);\n        } else if (j !== group.length - 1) {\n          // Middle point in a group.\n          var _addPoint2 = this._addPoint(point),\n              curve = _addPoint2.curve,\n              widths = _addPoint2.widths;\n\n          if (curve && widths) {\n            drawCurve(curve, widths, color);\n          }\n        } else {\n          // Last point in a group. Do nothing.\n        }\n      }\n    } else {\n      this._reset();\n      var _rawPoint = group[0];\n      drawDot(_rawPoint);\n    }\n  }\n};\n\nSignaturePad.prototype._toSVG = function () {\n  var _this2 = this;\n\n  var pointGroups = this._data;\n  var canvas = this._canvas;\n  var ratio = Math.max(window.devicePixelRatio || 1, 1);\n  var minX = 0;\n  var minY = 0;\n  var maxX = canvas.width / ratio;\n  var maxY = canvas.height / ratio;\n  var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\n  svg.setAttributeNS(null, 'width', canvas.width);\n  svg.setAttributeNS(null, 'height', canvas.height);\n\n  this._fromData(pointGroups, function (curve, widths, color) {\n    var path = document.createElement('path');\n\n    // Need to check curve for NaN values, these pop up when drawing\n    // lines on the canvas that are not continuous. E.g. Sharp corners\n    // or stopping mid-stroke and than continuing without lifting mouse.\n    if (!isNaN(curve.control1.x) && !isNaN(curve.control1.y) && !isNaN(curve.control2.x) && !isNaN(curve.control2.y)) {\n      var attr = 'M ' + curve.startPoint.x.toFixed(3) + ',' + curve.startPoint.y.toFixed(3) + ' ' + ('C ' + curve.control1.x.toFixed(3) + ',' + curve.control1.y.toFixed(3) + ' ') + (curve.control2.x.toFixed(3) + ',' + curve.control2.y.toFixed(3) + ' ') + (curve.endPoint.x.toFixed(3) + ',' + curve.endPoint.y.toFixed(3));\n\n      path.setAttribute('d', attr);\n      path.setAttribute('stroke-width', (widths.end * 2.25).toFixed(3));\n      path.setAttribute('stroke', color);\n      path.setAttribute('fill', 'none');\n      path.setAttribute('stroke-linecap', 'round');\n\n      svg.appendChild(path);\n    }\n  }, function (rawPoint) {\n    var circle = document.createElement('circle');\n    var dotSize = typeof _this2.dotSize === 'function' ? _this2.dotSize() : _this2.dotSize;\n    circle.setAttribute('r', dotSize);\n    circle.setAttribute('cx', rawPoint.x);\n    circle.setAttribute('cy', rawPoint.y);\n    circle.setAttribute('fill', rawPoint.color);\n\n    svg.appendChild(circle);\n  });\n\n  var prefix = 'data:image/svg+xml;base64,';\n  var header = '<svg' + ' xmlns=\"http://www.w3.org/2000/svg\"' + ' xmlns:xlink=\"http://www.w3.org/1999/xlink\"' + (' viewBox=\"' + minX + ' ' + minY + ' ' + maxX + ' ' + maxY + '\"') + (' width=\"' + maxX + '\"') + (' height=\"' + maxY + '\"') + '>';\n  var body = svg.innerHTML;\n\n  // IE hack for missing innerHTML property on SVGElement\n  if (body === undefined) {\n    var dummy = document.createElement('dummy');\n    var nodes = svg.childNodes;\n    dummy.innerHTML = '';\n\n    for (var i = 0; i < nodes.length; i += 1) {\n      dummy.appendChild(nodes[i].cloneNode(true));\n    }\n\n    body = dummy.innerHTML;\n  }\n\n  var footer = '</svg>';\n  var data = header + body + footer;\n\n  return prefix + btoa(data);\n};\n\nSignaturePad.prototype.fromData = function (pointGroups) {\n  var _this3 = this;\n\n  this.clear();\n\n  this._fromData(pointGroups, function (curve, widths) {\n    return _this3._drawCurve(curve, widths.start, widths.end);\n  }, function (rawPoint) {\n    return _this3._drawDot(rawPoint);\n  });\n\n  this._data = pointGroups;\n};\n\nSignaturePad.prototype.toData = function () {\n  return this._data;\n};\n\nexport default SignaturePad;\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.trimCanvas=t():e.trimCanvas=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p=\"\",t(0)}([function(e,t){\"use strict\";function r(e){var t=e.getContext(\"2d\"),r=e.width,n=e.height,o=t.getImageData(0,0,r,n).data,f=a(!0,r,n,o),i=a(!1,r,n,o),c=u(!0,r,n,o),d=u(!1,r,n,o),p=d-c+1,l=i-f+1,s=t.getImageData(c,f,p,l);return e.width=p,e.height=l,t.clearRect(0,0,p,l),t.putImageData(s,0,0),e}function n(e,t,r,n){return{red:n[4*(r*t+e)],green:n[4*(r*t+e)+1],blue:n[4*(r*t+e)+2],alpha:n[4*(r*t+e)+3]}}function o(e,t,r,o){return n(e,t,r,o).alpha}function a(e,t,r,n){for(var a=e?1:-1,u=e?0:r-1,f=u;e?f<r:f>-1;f+=a)for(var i=0;i<t;i++)if(o(i,f,t,n))return f;return null}function u(e,t,r,n){for(var a=e?1:-1,u=e?0:t-1,f=u;e?f<t:f>-1;f+=a)for(var i=0;i<r;i++)if(o(f,i,t,n))return f;return null}Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=r}])});"],"sourceRoot":""}