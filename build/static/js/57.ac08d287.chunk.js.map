{"version":3,"sources":["utils/formatTime.js","redux/slices/calendar.js","sections/@dashboard/calendar/CalendarStyle.js","sections/@dashboard/calendar/CalendarToolbar.js","pages/dashboard/calendar/CustomEvent.js","pages/dashboard/calendar/CalendarIndex.js"],"names":["fDate","date","format","Date","slice","createSlice","name","initialState","isLoading","error","events","isOpenModal","selectedEventId","selectedRange","reducers","startLoading","state","hasError","action","payload","getEventsSuccess","createEventSuccess","newEvent","updateEventSuccess","event","updateEvent","map","_event","id","deleteEventSuccess","eventId","deleteEvent","filter","selectEvent","selectRange","start","end","openModal","closeModal","actions","CalendarStyle","styled","theme","width","marginLeft","marginBottom","palette","divider","info","light","main","selected","background","default","neutral","hover","alpha","primary","display","color","text","boxShadow","borderColor","typography","subtitle2","padding","backgroundColor","borderRadius","common","white","transition","transitions","create","top","left","height","content","position","boxSizing","zIndex","opacity","border","fontSize","lineHeight","overflow","whiteSpace","textOverflow","fontWeight","fontWeightBold","customShadows","z20","shape","paper","spacing","grey","borderBottom","margin","disabled","body2","marginTop","marginRight","caption","secondary","VIEW_OPTIONS","value","label","icon","RootStyle","alignItems","flexDirection","breakpoints","up","justifyContent","CalendarToolbar","view","onToday","onNextDate","onPrevDate","onChangeView","isDesktop","useResponsive","Stack","direction","viewOption","Tooltip","title","ToggleButton","onChange","sx","Iconify","IconButton","onClick","Typography","variant","Button","size","CustomEvent","eventColor","extendedProps","className","style","CalendarForm","lazy","EventColorIndicator","CalendarIndex","user","useAuth","navigate","useNavigate","enqueueSnackbar","useSnackbar","dispatch","useDispatch","companyList","useSelector","selectCompanyList","useState","selectedCompany","set_selectedCompany","calendarRef","useRef","us_date_display","set_us_date_display","us_fromDate","set_us_fromDate","us_ToDate","set_us_ToDate","us_employees","set_us_employees","setView","setEvents","updatedEvent","set_updatedEvent","us_operationType","set_us_operationType","us_b_open_event_dlg","set_us_b_open_event_dlg","temp_fetch_employee_ref","temp_checkPermission_ref","viewPermissionGranted","setViewPermissionGranted","useEffect","current","permissions","viewCalendar","assignedCompanyId","includes","fetchEmployee","a","setLoading","db","collection","doc","get","then","result","docs","length","allEmployees","forEach","push","data","catch","err","message","fetchEventDateRange","companyId","calendarStartDate","calendarEndDate","startDateISOString","toISOString","startDateStringSplit","split","endDateISOString","endDateStringSplit","startDate","endDate","where","firebase","firestore","Timestamp","fromDate","allEvents","newTitle","newDesc","description","editedUser","titleField","descriptionField","employees","allDay","linkedDocumentType","handleEventInteraction","arg","o_event_selected","_def","o_event_dates","_instance","range","formattedDate","moment","startTimeFormatted","utc","endTimeFormatted","startTimeString","endTimeString","employeeNames","employee","eventTitle","eventDescription","set","email","firebaseDateTimestamp","merge","handleSelectChange","e","reason","preventDefault","Container","Grid","container","item","xs","md","startIcon","PATH_DASHBOARD","general","app1","Autocomplete","ListboxProps","maxHeight","options","renderInput","params","TextField","InputLabelProps","required","getOptionLabel","option","sm","DatePicker","newValue","inputFormat","Alert","severity","addCalendarTask","Card","calendarEl","calendarApi","getApi","next","getDate","prev","today","newView","changeView","timeZone","weekends","editable","droppable","selectable","eventContent","eventInfo","ref","rerenderDelay","initialDate","initialView","headerToolbar","eventClick","publicId","startTime","endTime","eventResize","eventDrop","plugins","listPlugin","dayGridPlugin","timelinePlugin","timeGridPlugin","interactionPlugin","eventTimeFormat","hour","minute","meridiem","datesSet","fallback","operationType","open","onCancel","employeesList"],"mappings":"kJAAA,+DAIO,SAASA,EAAMC,GACpB,OAAOC,YAAO,IAAIC,KAAKF,GAAO,kB,uTCY1BG,G,OAAQC,YAAY,CACxBC,KAAM,WACNC,aAXmB,CACnBC,WAAW,EACXC,MAAO,KACPC,OAAQ,GACRC,aAAa,EACbC,gBAAiB,KACjBC,cAAe,MAMfC,SAAU,CAERC,aAFQ,SAEKC,GACXA,EAAMR,WAAY,GAIpBS,SAPQ,SAOCD,EAAOE,GACdF,EAAMR,WAAY,EAClBQ,EAAMP,MAAQS,EAAOC,SAIvBC,iBAbQ,SAaSJ,EAAOE,GACtBF,EAAMR,WAAY,EAClBQ,EAAMN,OAASQ,EAAOC,SAIxBE,mBAnBQ,SAmBWL,EAAOE,GACxB,IAAMI,EAAWJ,EAAOC,QACxBH,EAAMR,WAAY,EAClBQ,EAAMN,OAAN,sBAAmBM,EAAMN,QAAzB,CAAiCY,KAInCC,mBA1BQ,SA0BWP,EAAOE,GACxB,IAAMM,EAAQN,EAAOC,QACfM,EAAcT,EAAMN,OAAOgB,KAAI,SAACC,GACpC,OAAIA,EAAOC,KAAOJ,EAAMI,GACfJ,EAEFG,KAGTX,EAAMR,WAAY,EAClBQ,EAAMN,OAASe,GAIjBI,mBAxCQ,SAwCWb,EAAOE,GACxB,IAAQY,EAAYZ,EAAOC,QAAnBW,QACFC,EAAcf,EAAMN,OAAOsB,QAAO,SAACR,GAAD,OAAWA,EAAMI,KAAOE,KAChEd,EAAMN,OAASqB,GAIjBE,YA/CQ,SA+CIjB,EAAOE,GACjB,IAAMY,EAAUZ,EAAOC,QACvBH,EAAML,aAAc,EACpBK,EAAMJ,gBAAkBkB,GAI1BI,YAtDQ,SAsDIlB,EAAOE,GACjB,MAAuBA,EAAOC,QAAtBgB,EAAR,EAAQA,MAAOC,EAAf,EAAeA,IACfpB,EAAML,aAAc,EACpBK,EAAMH,cAAgB,CAAEsB,QAAOC,QAIjCC,UA7DQ,SA6DErB,GACRA,EAAML,aAAc,GAItB2B,WAlEQ,SAkEGtB,GACTA,EAAML,aAAc,EACpBK,EAAMJ,gBAAkB,KACxBI,EAAMH,cAAgB,UASrB,GAHQT,EAAf,QAGsDA,EAAMmC,SAArD,EAAQF,UAAR,EAAmBC,WAAnB,EAA+BL,Y,uDC6DvBO,EA3JOC,YAAO,MAAPA,EAAc,gBAAGC,EAAH,EAAGA,MAAH,MAAgB,CAClDC,MAAO,mBACPC,YAAa,EACbC,cAAe,EACf,QAAS,CACP,4BAA6B,MAC7B,oBAAqBH,EAAMI,QAAQC,QACnC,0BAA2BL,EAAMI,QAAQE,KAAKC,MAC9C,2BAA4BP,EAAMI,QAAQrC,MAAMyC,KAChD,sBAAuBR,EAAMI,QAAQ5B,OAAOiC,SAC5C,qBAAsBT,EAAMI,QAAQM,WAAWC,QAC/C,wBAAyBX,EAAMI,QAAQM,WAAWE,QAClD,iCAAkCZ,EAAMI,QAAQ5B,OAAOqC,MACvD,uBAAwBC,YAAMd,EAAMI,QAAQW,QAAQP,KAAM,MAG5D,4BAA6B,CAAEQ,QAAS,QACxC,UAAW,CAAEC,MAAOjB,EAAMI,QAAQc,KAAKH,SAGvC,wBAAyB,CACvBI,UAAU,kBAAD,OAAoBnB,EAAMI,QAAQC,SAC3C,OAAQ,CAAEe,YAAa,eACvB,gCAAgC,2BAC3BpB,EAAMqB,WAAWC,WADtB,IAEEC,QAAS,YAKb,kBAAmB,CACjBH,YAAa,cACbI,gBAAiB,eAEnB,iCAAkC,CAChCD,QAAS,UACTE,aAAc,EACdD,gBAAiBxB,EAAMI,QAAQsB,OAAOC,MACtCC,WAAY5B,EAAM6B,YAAYC,OAAO,UACrC,UAAW,CAAExC,OAAQ,oBACrB,mBAAoB,CAClByC,IAAK,EACLC,KAAM,EACN/B,MAAO,OACPgC,OAAQ,OACRC,QAAS,KACTT,aAAc,EACdU,SAAU,WACVC,UAAW,cAEb,WAAY,CACVC,OAAQ,EACRC,QAAS,IACTC,OAAQ,0BAEV,UAAW,CACTF,OAAQ,EACRC,QAAS,IACTd,gBAAiB,iBAGrB,uCAAwC,CACtCgB,SAAU,GACVC,WAAY,OACZnD,OAAQ,oBAEV,0CAA2C,CACzCoD,SAAU,SACVC,WAAY,SACZC,aAAc,YAEhB,iCAAkC,CAChCrB,QAAS,EACTmB,SAAU,QACVG,WAAY7C,EAAMqB,WAAWyB,gBAI/B,oBAAqB,CACnBP,OAAQ,EACRG,SAAU,SACVvB,UAAWnB,EAAM+C,cAAcC,IAC/BvB,aAAczB,EAAMiD,MAAMxB,aAC1BD,gBAAiBxB,EAAMI,QAAQM,WAAWwC,OAE5C,2BAA2B,2BACtBlD,EAAMqB,WAAWC,WADtB,IAEEC,QAASvB,EAAMmD,QAAQ,GACvB3B,gBAAiBxB,EAAMI,QAAQgD,KAAK,OACpCC,aAAa,aAAD,OAAerD,EAAMI,QAAQC,WAE3C,0BAA2B,CACzBiC,QAAS,IACTV,WAAY5B,EAAM6B,YAAYC,OAAO,WACrC,UAAW,CAAEQ,QAAS,IAExB,0CAA2C,CACzCf,QAASvB,EAAMmD,QAAQ,MAEzB,yBAA0B,CACxB,uEAAwE,CACtEG,OAAQ,UAKZ,0CAA2C,CACzChB,QAAS,EACT,2BAA4B,CAC1BrB,MAAOjB,EAAMI,QAAQc,KAAKqC,WAG9B,+BAA+B,2BAC1BvD,EAAMqB,WAAWmC,OADtB,IAEEjC,QAASvB,EAAMmD,QAAQ,EAAG,EAAG,KAE/B,0BAA2B,CACzBM,UAAW,GAEb,+EAAgF,CAC9EvD,WAAY,EACZwD,YAAa,GAEf,8BAA8B,2BACzB1D,EAAMqB,WAAWsC,SADtB,IAEE1C,MAAOjB,EAAMI,QAAQc,KAAK0C,YAI5B,kCAAkC,2BAC7B5D,EAAMqB,WAAWmC,OADtB,IAEEvC,MAAOjB,EAAMI,QAAQc,KAAK0C,YAE5B,wCAAwC,eACnC5D,EAAMqB,WAAWmC,OAItB,iKAAiK,eAE1JxD,EAAMqB,WAAWC,WAExB,uBAAuB,2BAClBtB,EAAMqB,WAAWmC,OADtB,IAEE,wBAAyB,CACvBvC,MAAOjB,EAAMI,QAAQc,KAAK0C,aAG9B,uBAAwB,CACtB,WAAY,CACVxC,YAAa,oB,oCCtIbyC,EAAe,CACnB,CAAEC,MAAO,eAAgBC,MAAO,QAASC,KAAM,wBAC/C,CAAEF,MAAO,eAAgBC,MAAO,OAAQC,KAAM,sBAC9C,CAAEF,MAAO,cAAeC,MAAO,MAAOC,KAAM,qBAC5C,CAAEF,MAAO,WAAYC,MAAO,SAAUC,KAAM,yBAGxCC,EAAYlE,YAAO,MAAPA,EAAc,gBAAGC,EAAH,EAAGA,MAAH,oBAC9BgB,QAAS,OACTkD,WAAY,SACZC,cAAe,SACf5C,QAASvB,EAAMmD,QAAQ,MACtBnD,EAAMoE,YAAYC,GAAG,MAAQ,CAC5BF,cAAe,MACfG,eAAgB,qBAoBL,SAASC,EAAT,GAOX,IANFhH,EAMC,EANDA,KACAiH,EAKC,EALDA,KACAC,EAIC,EAJDA,QACAC,EAGC,EAHDA,WACAC,EAEC,EAFDA,WACAC,EACC,EADDA,aAEMC,EAAYC,YAAc,KAAM,MAEtC,OACE,eAACb,EAAD,WACGY,GACC,cAACE,EAAA,EAAD,CAAOC,UAAU,MAAM7B,QAAS,GAAhC,SACGU,EAAa7E,KAAI,SAACiG,GAAD,OAChB,cAACC,EAAA,EAAD,CAAgCC,MAAOF,EAAWlB,MAAlD,SACE,cAACqB,EAAA,EAAD,CACEtB,MAAOU,EACP/D,SAAUwE,EAAWnB,QAAUU,EAC/Ba,SAAU,kBAAMT,EAAaK,EAAWnB,QACxCwB,GAAI,CAAErF,MAAO,GAAIgC,OAAQ,GAAIV,QAAS,EAAGgB,OAAQ,GAJnD,SAME,cAACgD,EAAA,EAAD,CAASvB,KAAMiB,EAAWjB,KAAM/D,MAAO,GAAIgC,OAAQ,QAPzCgD,EAAWnB,YAc/B,eAACiB,EAAA,EAAD,CAAOC,UAAU,MAAMd,WAAW,SAASf,QAAS,EAApD,UACE,cAACqC,EAAA,EAAD,CAAYC,QAASd,EAArB,SACE,cAACY,EAAA,EAAD,CAASvB,KAAK,0BAA0B/D,MAAO,GAAIgC,OAAQ,OAG7D,cAACyD,EAAA,EAAD,CAAYC,QAAQ,KAApB,SAA0BrI,YAAMC,KAEhC,cAACiI,EAAA,EAAD,CAAYC,QAASf,EAArB,SACE,cAACa,EAAA,EAAD,CAASvB,KAAK,6BAA6B/D,MAAO,GAAIgC,OAAQ,UAIjE4C,GACC,cAACe,EAAA,EAAD,CACEC,KAAK,QACL5E,MAAM,QACN0E,QAAQ,YACRF,QAAShB,EAJX,sB,yGCxEOqB,EAtBK,SAAC,GAAe,IAAbhH,EAAY,EAAZA,MAEfiH,EAAajH,EAAMkH,cAAcD,YAAc,UAErD,OACE,qBACEE,UAAU,WACVC,MAAO,CACL1E,gBAAiBuE,EACjB3E,YAAa2E,EACb9E,MAAO,OACPgB,OAAQ,OACRhC,MAAO,OACPyC,SAAU,SACVF,SAAU,QATd,SAYG1D,EAAMqG,S,gECkBPgB,GAAeC,gBAAK,kBAAM,mCAC1BC,GAAsBD,gBAAK,kBAAM,mCAqjBxBE,UAnjBf,WAA0B,IAAD,MACfC,EAASC,eAATD,KAEFE,EAAWC,cAETC,EAAoBC,cAApBD,gBAEFE,EAAWC,cAETC,EAAgBC,YAAYC,MAA5BF,YAER,EAA+CG,mBAAS,MAAxD,mBAAOC,EAAP,KAAwBC,EAAxB,KAEMC,EAAcC,iBAAO,MAErBzC,EAAYC,YAAc,KAAM,MAEtC,EAA+CoC,mBAAS,IAAIzJ,MAA5D,mBAAO8J,EAAP,KAAwBC,EAAxB,KAEA,EAAuCN,mBAAS,IAAIzJ,MAApD,mBAAOgK,GAAP,KAAoBC,GAApB,KAEA,GAAmCR,mBAAS,IAAIzJ,MAAhD,qBAAOkK,GAAP,MAAkBC,GAAlB,MAEA,GAAyCV,mBAAS,IAAlD,qBAAOW,GAAP,MAAqBC,GAArB,MAEA,GAAwBZ,mBAAS,eAAjC,qBAAO1C,GAAP,MAAauD,GAAb,MAEA,GAA4Bb,mBAAS,IAArC,qBAAOlJ,GAAP,MAAegK,GAAf,MAEA,GAAyCd,mBAAS,MAAlD,qBAAOe,GAAP,MAAqBC,GAArB,MAEA,GAAiDhB,mBAAS,IAA1D,qBAAOiB,GAAP,MAAyBC,GAAzB,MAEA,GAAuDlB,oBAAS,GAAhE,qBAAOmB,GAAP,MAA4BC,GAA5B,MAEMC,GAA0BjB,mBAE1BkB,GAA2BlB,mBAEjC,GAA0DJ,oBAAS,GAAnE,qBAAOuB,GAAP,MAA8BC,GAA9B,MAEAC,qBAAU,WACRH,GAAyBI,YACxB,CAACzB,IAEJwB,qBAAU,WACJxB,GAAmBsB,IACrBF,GAAwBK,YAEzB,CAACzB,EAAiBsB,KAqBrBD,GAAyBI,QAnBzB,WAC+C,IAAD,MAAxCzB,GAAe,OAAIA,QAAJ,IAAIA,KAAiBjI,KAEpC,OAACqH,QAAD,IAACA,GAAD,UAACA,EAAMsC,mBAAP,iBAAC,EAAmBC,oBAApB,iBAAC,EAAiCC,yBAAlC,OAAC,EAAoDC,SAApD,OACC7B,QADD,IACCA,OADD,EACCA,EAAiBjI,IAUnBwJ,IAAyB,IAPzB/B,EACE,mEACA,CAAEhB,QAAS,UAGb+C,IAAyB,MAS/B,IAAMO,GAAa,uCAAG,sBAAAC,EAAA,6DACpBrC,EAASsC,aAAW,IADA,SAGdC,IACHC,WAAW,WACXC,IAAInC,EAAgBjI,IACpBmK,WAAW,YACXE,MACAC,MAAK,SAACC,GAAY,IAAD,EAChB,GAAU,OAANA,QAAM,IAANA,KAAQC,OAAc,OAAND,QAAM,IAANA,GAAA,UAAAA,EAAQC,YAAR,eAAcC,QAAS,EAAG,CAC5C,IAAIC,EAAe,GACb,OAANH,QAAM,IAANA,KAAQC,KAAKG,SAAQ,SAACP,GACpBM,EAAaE,KAAb,kCACKR,QADL,IACKA,OADL,EACKA,EAAKS,QADV,IAEE7K,GAAIoK,EAAIpK,SAGZ4I,GAAiB8B,GACjB/C,EAASsC,aAAW,SAEpBrB,GAAiB,IACjBjB,EAASsC,aAAW,IAEtBtC,EAASsC,aAAW,OAErBa,OAAM,SAACC,GACNtD,EAAgB,2CAAD,cAC8BsD,QAD9B,IAC8BA,OAD9B,EAC8BA,EAAKC,SAChD,CAAEvE,QAAS,UAEbkB,EAASsC,aAAW,OA9BJ,2CAAH,qDAxEI,SA4GRgB,GA5GQ,qFA4GvB,WACEC,EACAC,EACAC,GAHF,yBAAApB,EAAA,6DAKQqB,EAAqBF,EAAkBG,cACvCC,EAAuBF,EAAmBG,MAAM,KAEhDC,EAAmBL,EAAgBE,cACnCI,EAAqBD,EAAiBD,MAAM,KAE5CG,EAAY,IAAIpN,KAAJ,UAAYgN,EAAqB,GAAjC,mBACZK,EAAU,IAAIrN,KAAJ,UAAYmN,EAAmB,GAA/B,mBAEhB/D,EAASsC,aAAW,IAdtB,SAgBQC,IACHC,WAAW,WACXC,IAAIc,GACJf,WAAW,YACX0B,MACC,wBACA,KACAC,KAASC,UAAUC,UAAUC,SAASN,IAEvCE,MACC,wBACA,KACAC,KAASC,UAAUC,UAAUC,SAASL,IAEvCvB,MACAC,MAAK,SAACC,GAAY,IAAD,EAChB,GAAU,OAANA,QAAM,IAANA,KAAQC,OAAc,OAAND,QAAM,IAANA,GAAA,UAAAA,EAAQC,YAAR,eAAcC,QAAS,EAAG,CAC5C,IAAIyB,EAAY,GACV,OAAN3B,QAAM,IAANA,KAAQC,KAAKG,SAAQ,SAACP,GAAS,IAAD,oBACxB+B,GAAc,OAAH/B,QAAG,IAAHA,GAAA,UAAAA,EAAKS,cAAL,eAAa5E,QAAS,GACjCmG,GAAU,UAAAhC,EAAIS,cAAJ,eAAYwB,cAAe,GAErCjC,EAAIS,OAAOyB,aACbH,GACU,6BAAyB/B,EAAIS,OAAOyB,YAC9CF,GAAiB,6BAAyBhC,EAAIS,OAAOyB,aAGvDJ,EAAUtB,KAAK,CACb1K,QAASkK,EAAIpK,GACbiG,MAAOkG,EACPI,WAAU,UAAEnC,EAAIS,cAAN,aAAE,EAAY0B,WACxBhM,MAAK,UAAE6J,EAAIS,cAAN,aAAE,EAAYtK,MACnBC,IAAG,UAAE4J,EAAIS,cAAN,aAAE,EAAYrK,IACjB6L,YAAaD,EACbI,iBAAgB,UAAEpC,EAAIS,cAAN,aAAE,EAAYwB,YAC9BI,UAAS,UAAErC,EAAIS,cAAN,aAAE,EAAY4B,UACvB5F,WAAU,UAAEuD,EAAIS,cAAN,aAAE,EAAYhE,WACxB6F,OAAM,UAAEtC,EAAIS,cAAN,aAAE,EAAY6B,OACpBC,mBAAkB,UAAEvC,EAAIS,cAAN,aAAE,EAAY8B,mBAChCL,WAAYlC,EAAIS,OAAOyB,gBAG3BxD,GAAUoD,GACVvE,EAASsC,aAAW,SAEpBnB,GAAU,IACVnB,EAASsC,aAAW,OAGvBa,OAAM,SAACC,GACNtD,EAAgB,wCAAD,cAC2BsD,QAD3B,IAC2BA,OAD3B,EAC2BA,EAAKC,SAC7C,CAAEvE,QAAS,UAEbkB,EAASsC,aAAW,OAvE1B,4CA5GuB,sBA0GvBZ,GAAwBK,QAAUK,GAoKlC,IAAM6C,GAAsB,uCAAG,WAAOC,GAAP,mDAAA7C,EAAA,6DAC7BrC,EAASsC,aAAW,IAEd6C,EAHuB,OAGJD,QAHI,IAGJA,GAHI,UAGJA,EAAKjN,aAHD,aAGJ,EAAYmN,KAC/BC,EAJuB,OAIPH,QAJO,IAIPA,GAJO,UAIPA,EAAKjN,aAJE,iBAIP,EAAYqN,iBAJL,aAIP,EAAuBC,MAEzCC,EAAgBC,IAAM,OAACJ,QAAD,IAACA,OAAD,EAACA,EAAezM,OAAOjC,OAAO,cAElD+O,GACU,OAAbL,QAAa,IAAbA,OAAA,EAAAA,EAAezM,QACd6M,IAAOA,IAAM,OAACJ,QAAD,IAACA,OAAD,EAACA,EAAezM,OAAO+M,OAAOA,MAAMhP,OAAO,UAC1D,QACIiP,GACU,OAAbP,QAAa,IAAbA,OAAA,EAAAA,EAAexM,MACd4M,IAAOA,IAAM,OAACJ,QAAD,IAACA,OAAD,EAACA,EAAexM,KAAK8M,OAAOA,MAAMhP,OAAO,UACxD,QAEEkP,EAjByB,UAiBJL,EAjBI,YAiBaE,EAjBb,QAkBzBI,EAlByB,UAkBNN,EAlBM,YAkBWI,EAlBX,QAoBzBG,EAAgB,GACJ,OAAhBZ,QAAgB,IAAhBA,GAAA,UAAAA,EAAkBhG,qBAAlB,SAAiC2F,UAAU9B,SAAQ,SAACgD,GAClDD,EAAgBA,GAAa,OAAGC,QAAH,IAAGA,OAAH,EAAGA,EAAUjP,MAAO,QAG/CkP,EAzByB,wBAyBFd,QAzBE,IAyBFA,GAzBE,UAyBFA,EAAkBhG,qBAzBhB,aAyBF,EAAiCyF,YAExDsB,EA3ByB,OA2BNf,QA3BM,IA2BNA,GA3BM,UA2BNA,EAAkBhG,qBA3BZ,aA2BN,EAAiC0F,iBAExD,OAAIM,QAAJ,IAAIA,GAAJ,UAAIA,EAAkBhG,qBAAtB,OAAI,EAAiCuF,cACnCuB,GACY,iCACSd,QADT,IACSA,GADT,UACSA,EAAkBhG,qBAD3B,aACS,EAAiCuF,cAGpDqB,IACFE,GAAuB,iCAA6BF,IAGtDE,GACY,yBACQP,EADR,wBAC0CE,GAzCzB,UA2CvBrD,IACHC,WAAW,WACXC,IAAInC,EAAgBjI,IACpBmK,WAAW,YACXC,IAJG,OAIC0C,QAJD,IAICA,GAJD,UAICA,EAAkBhG,qBAJnB,aAIC,EAAiC5G,SACrC4N,IACC,CACE7H,MAAO2H,EACPvB,YAAawB,EACbtN,MAAOiN,EACPhN,IAAKiN,EACLnB,WAAU,OAAEjF,QAAF,IAAEA,OAAF,EAAEA,EAAM0G,MAClBC,sBAAuBlC,KAASC,UAAUC,UAAUC,SAClD,IAAI1N,KAAK4O,KAGb,CAAEc,OAAO,IAEV3D,MAAK,WAEJW,GAAoBhD,EAAgBjI,GAAIuI,GAAaE,IACrDhB,EAAgB,iCAChBE,EAASsC,aAAW,OAErBa,OAAM,SAACC,GACNtD,EAAgB,uCAAD,cAAwCsD,QAAxC,IAAwCA,OAAxC,EAAwCA,EAAKC,SAAW,CACrEvE,QAAS,UAEXkB,EAASsC,aAAW,OAvEK,4CAAH,sDA2EtBiE,GAAkB,uCAAG,WAAOC,EAAGvJ,EAAOwJ,GAAjB,SAAApE,EAAA,sDACzBmE,EAAEE,iBACa,iBAAXD,GAAwC,UAAXA,GAAsBxJ,GACjD2D,IAAeE,IACjBwC,GAAoBrG,EAAM5E,GAAIuI,GAAaE,IAE7CP,EAAoBtD,IACA,iBAAXwJ,GAAwC,UAAXA,IACtCtF,GAAU,IACVZ,EAAoB,OATG,2CAAH,0DAaxB,OACE,eAACoG,EAAA,EAAD,WACE,eAACC,EAAA,EAAD,CAAMC,WAAS,EAACvK,QAAS,EAAzB,UACE,cAACsK,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAvB,SACE,eAAC9I,EAAA,EAAD,CAAO5B,QAAS,EAAG6B,UAAU,MAAMd,WAAY,SAA/C,UACE,cAAC0B,EAAA,EAAD,CACEkI,UAAW,cAAC,IAAD,IACXnI,QAAQ,YACR1E,MAAM,UACNwE,QAAS,kBAAMgB,EAASsH,IAAeC,QAAQC,OAJjD,kBAQA,cAACvI,EAAA,EAAD,CAAYC,QAAQ,KAApB,mCAIJ,cAAC8H,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAvB,SACE,cAACK,EAAA,EAAD,CACEC,aAAc,CAAEjI,MAAO,CAAEkI,UAAW,SACpCvI,KAAK,QACL9B,MAAM,0BACN7E,GAAG,oBACHmP,QAAStH,EACTjD,MAAOqD,GAAmB,KAC1B7B,GAAI,CAAErF,MAAO,KACbqO,YAAa,SAACC,GAAD,OACX,cAACC,EAAA,EAAD,2BACMD,GADN,IAEExK,MAAM,0BACN0K,gBAAiB,CAAEC,UAAU,OAGjCA,UAAQ,EACRrJ,SAAU,SAACgI,EAAGvJ,EAAOwJ,GAAX,OACRF,GAAmBC,EAAGvJ,EAAOwJ,EAAQ,YAEvCqB,eAAgB,SAACC,GAAD,OAAYA,EAAOhR,UAItCuJ,GAAmBsB,GAClB,qCACE,eAACgF,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAvB,UACE,cAACnI,EAAA,EAAD,6BAEA,uBACA,eAAC+H,EAAA,EAAD,CAAMC,WAAS,EAACvK,QAAS,EAAGe,WAAY,WAAxC,UACE,cAACuJ,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIiB,GAAI,EAAGhB,GAAI,EAA9B,SACE,cAACiB,EAAA,EAAD,CACE/K,MAAM,OACND,MAAO2D,IAAe,GACtBpC,SAAU,SAAC0J,GACTrH,GAAgBqH,IAElBT,YAAa,SAACC,GAAD,OACX,cAACC,EAAA,EAAD,2BAAeD,GAAf,IAAuB1I,KAAK,YAE9BmJ,YAAY,iBAGhB,cAACvB,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIiB,GAAI,EAAGhB,GAAI,EAA9B,SACE,cAACiB,EAAA,EAAD,CACE/K,MAAM,KACND,MAAO6D,IAAa,GACpBtC,SAAU,SAAC0J,GACTnH,GAAcmH,IAEhBT,YAAa,SAACC,GAAD,OACX,cAACC,EAAA,EAAD,2BAAeD,GAAf,IAAuB1I,KAAK,YAE9BmJ,YAAY,iBAGhB,cAACvB,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIiB,GAAI,EAAGhB,GAAI,EAA9B,SACE,cAACjI,EAAA,EAAD,CACED,QAAQ,YACR1E,MAAM,UACNwE,QAAS,kBACP0E,GACEhD,EAAgBjI,GAChBuI,GACAE,KAPN,sBAcF,eAAC8F,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIiB,GAAI,EAAGhB,GAAI,EAA9B,UACG,IACA7P,KAAgB,OAANA,SAAM,IAANA,QAAA,EAAAA,GAAQ2L,QAAS,EAC1B,cAACsF,EAAA,EAAD,CACEC,SAAS,OACTrJ,KAAK,QAFP,0BAGK7H,SAHL,IAGKA,QAHL,EAGKA,GAAQ2L,OAHb,kCAKA,cAACsF,EAAA,EAAD,CACEC,SAAS,UACTrJ,KAAK,QAFP,+CAQN,uBACA,cAACD,EAAA,EAAD,CACED,QAAQ,YACR1E,MAAM,UACNwE,QAAS,WACP2C,GAAqB,UACrBE,IAAwB,IAE1BpC,MAAO,CAAEjG,MAAO,SAChBsD,WACE,OAACgD,QAAD,IAACA,GAAD,UAACA,EAAMsC,mBAAP,iBAAC,EAAmBsG,uBAApB,iBAAC,EAAoCpG,yBAArC,OAAC,EAAuDC,SAAvD,OACC7B,QADD,IACCA,OADD,EACCA,EAAiBjI,KAVvB,kCAiBF,eAACuO,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAvB,UACE,uBACA,uBACA,uBACA,cAACxH,GAAD,IACA,uBACA,cAAC+I,EAAA,EAAD,UACE,eAAC,EAAD,WACE,cAAC7K,EAAD,CACEhH,KAAMgK,EACN/C,KAAMA,GACNE,WApRU,WAC1B,IAAM2K,EAAahI,EAAYuB,QAC/B,GAAIyG,EAAY,CACd,IAAMC,EAAcD,EAAWE,SAC/BD,EAAYE,OACZhI,EAAoB8H,EAAYG,aAgRlB9K,WA9RU,WAC1B,IAAM0K,EAAahI,EAAYuB,QAC/B,GAAIyG,EAAY,CACd,IAAMC,EAAcD,EAAWE,SAC/BD,EAAYI,OACZlI,EAAoB8H,EAAYG,aA0RlBhL,QA7QO,WACvB,IAAM4K,EAAahI,EAAYuB,QAC/B,GAAIyG,EAAY,CACd,IAAMC,EAAcD,EAAWE,SAC/BD,EAAYK,QACZnI,EAAoB8H,EAAYG,aAyQlB7K,aA3SO,SAACgL,GACxB,IAAMP,EAAahI,EAAYuB,QAC/B,GAAIyG,EAAY,CACd,IAAMC,EAAcD,EAAWE,SAC/BD,EAAYO,WAAWD,GACvB7H,GAAQ6H,GAERpI,EAAoB8H,EAAYG,eAsSpB,cAAC,IAAD,CACEK,SAAS,MACTC,UAAQ,EACRC,UAAU,EACVC,WAAS,EACTC,YAAU,EACVlS,OAAQA,IAAU,GAClBmS,aAAc,SAACC,GAAD,OACZ,cAAC,EAAD,CAAatR,MAAOsR,EAAUtR,SAEhCuR,IAAKhJ,EACLiJ,cAAe,GACfC,YAAahJ,EACbiJ,YAAahM,GACbiM,eAAe,EAEfC,WAvRQ,SAAC3E,GAAS,IAAD,oBAC3BC,EAAgB,OAAGD,QAAH,IAAGA,GAAH,UAAGA,EAAKjN,aAAR,aAAG,EAAYmN,KAC/BC,EAAa,OAAGH,QAAH,IAAGA,GAAH,UAAGA,EAAKjN,aAAR,iBAAG,EAAYqN,iBAAf,aAAG,EAAuBC,MAEvCG,GACU,OAAbL,QAAa,IAAbA,OAAA,EAAAA,EAAezM,QACd6M,IAAOA,IAAM,OAACJ,QAAD,IAACA,OAAD,EAACA,EAAezM,OAAO+M,OAAOA,MAAMhP,OAAO,UAC1D,QACIiP,GACU,OAAbP,QAAa,IAAbA,OAAA,EAAAA,EAAexM,MACd4M,IAAOA,IAAM,OAACJ,QAAD,IAACA,OAAD,EAACA,EAAexM,KAAK8M,OAAOA,MAAMhP,OAAO,UACxD,QAEF0K,GAAiB,CACfyI,UAA0B,OAAhB3E,QAAgB,IAAhBA,GAAA,UAAAA,EAAkBhG,qBAAlB,eAAiC5G,UAAW,GACtD7B,MAAmB,OAAb2O,QAAa,IAAbA,OAAA,EAAAA,EAAezM,QAAS,IAAIhC,KAClCgO,YAA4B,OAAhBO,QAAgB,IAAhBA,GAAA,UAAAA,EAAkBhG,qBAAlB,eAAiCyF,aAAc,GAC3DF,aAA6B,OAAhBS,QAAgB,IAAhBA,GAAA,UAAAA,EAAkBhG,qBAAlB,eAAiC0F,mBAAoB,GAClEkF,UAAWrE,EACXsE,QAASpE,EACTd,WAA2B,OAAhBK,QAAgB,IAAhBA,GAAA,UAAAA,EAAkBhG,qBAAlB,eAAiC2F,YAAa,GACzD5F,YAA4B,OAAhBiG,QAAgB,IAAhBA,GAAA,UAAAA,EAAkBhG,qBAAlB,eAAiCD,aAAc,GAC3DyF,YAA4B,OAAhBQ,QAAgB,IAAhBA,GAAA,UAAAA,EAAkBhG,qBAAlB,eAAiCwF,aAAc,GAC3DK,oBACkB,OAAhBG,QAAgB,IAAhBA,GAAA,UAAAA,EAAkBhG,qBAAlB,eAAiC6F,qBAAsB,KAG3DzD,GAAqB,UAErBE,IAAwB,IA2PRwI,YAAahF,GACbiF,UAAWjF,GACX7J,OAAQ4C,EAAY,IAAM,OAC1BmM,QAAS,CACPC,IACAC,IACAC,IACAC,IACAC,KAEFC,gBAAiB,CACfC,KAAM,UACNC,OAAQ,UACRC,SAAU,SAEZC,SA1VK,SAAC3F,GACtB,GAAI5E,EAAiB,CAEnB,IAAM0D,EAAYkB,EAAItM,MAChBqL,EAAUiB,EAAIrM,IAEpBgI,GAAgBmD,GAChBjD,GAAckD,GAEdX,GAAoBhD,EAAgBjI,GAAI2L,EAAWC,kBAwV/C,gCAIHzC,GACC,cAAC,WAAD,CAAUsJ,SAAU,6BAApB,SACE,cAAC,GAAD,CACExK,gBAAiBA,EACjByK,cAAezJ,GACfF,aAAcA,IAAgB,KAC9BC,iBAAkBA,GAClB2J,KAAMxJ,GACNyJ,SA1RV,WACExJ,IAAwB,IA0RhB6B,oBAAqBA,GACrBlB,cAAeA,GACf8I,cAAelK,GACfJ,YAAaA,GACbE,UAAWA,OAIf","file":"static/js/57.ac08d287.chunk.js","sourcesContent":["import { format, getTime, formatDistanceToNow } from 'date-fns';\n\n// ----------------------------------------------------------------------\n\nexport function fDate(date) {\n  return format(new Date(date), 'dd MMMM yyyy');\n}\n\nexport function fDateTime(date) {\n  return format(new Date(date), 'dd MMM yyyy HH:mm');\n}\n\nexport function fTimestamp(date) {\n  return getTime(new Date(date));\n}\n\nexport function fDateTimeSuffix(date) {\n  return format(new Date(date), 'dd/MM/yyyy hh:mm p');\n}\n\nexport function fToNow(date) {\n  return formatDistanceToNow(new Date(date), {\n    addSuffix: true\n  });\n}\n","import { createSlice } from '@reduxjs/toolkit';\n// utils\nimport axios from '../../utils/axios';\n//\nimport { dispatch } from '../store';\n\n// ----------------------------------------------------------------------\n\nconst initialState = {\n  isLoading: false,\n  error: null,\n  events: [],\n  isOpenModal: false,\n  selectedEventId: null,\n  selectedRange: null,\n};\n\nconst slice = createSlice({\n  name: 'calendar',\n  initialState,\n  reducers: {\n    // START LOADING\n    startLoading(state) {\n      state.isLoading = true;\n    },\n\n    // HAS ERROR\n    hasError(state, action) {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n\n    // GET EVENTS\n    getEventsSuccess(state, action) {\n      state.isLoading = false;\n      state.events = action.payload;\n    },\n\n    // CREATE EVENT\n    createEventSuccess(state, action) {\n      const newEvent = action.payload;\n      state.isLoading = false;\n      state.events = [...state.events, newEvent];\n    },\n\n    // UPDATE EVENT\n    updateEventSuccess(state, action) {\n      const event = action.payload;\n      const updateEvent = state.events.map((_event) => {\n        if (_event.id === event.id) {\n          return event;\n        }\n        return _event;\n      });\n\n      state.isLoading = false;\n      state.events = updateEvent;\n    },\n\n    // DELETE EVENT\n    deleteEventSuccess(state, action) {\n      const { eventId } = action.payload;\n      const deleteEvent = state.events.filter((event) => event.id !== eventId);\n      state.events = deleteEvent;\n    },\n\n    // SELECT EVENT\n    selectEvent(state, action) {\n      const eventId = action.payload;\n      state.isOpenModal = true;\n      state.selectedEventId = eventId;\n    },\n\n    // SELECT RANGE\n    selectRange(state, action) {\n      const { start, end } = action.payload;\n      state.isOpenModal = true;\n      state.selectedRange = { start, end };\n    },\n\n    // OPEN MODAL\n    openModal(state) {\n      state.isOpenModal = true;\n    },\n\n    // CLOSE MODAL\n    closeModal(state) {\n      state.isOpenModal = false;\n      state.selectedEventId = null;\n      state.selectedRange = null;\n    },\n  },\n});\n\n// Reducer\nexport default slice.reducer;\n\n// Actions\nexport const { openModal, closeModal, selectEvent } = slice.actions;\n\n// ----------------------------------------------------------------------\n\nexport function getEvents() {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n    try {\n      const response = await axios.get('/api/calendar/events');\n      dispatch(slice.actions.getEventsSuccess(response.data.events));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}\n\n// ----------------------------------------------------------------------\n\nexport function createEvent(newEvent) {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n    try {\n      const response = await axios.post('/api/calendar/events/new', newEvent);\n      dispatch(slice.actions.createEventSuccess(response.data.event));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}\n\n// ----------------------------------------------------------------------\n\nexport function updateEvent(eventId, updateEvent) {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n    try {\n      const response = await axios.post('/api/calendar/events/update', {\n        eventId,\n        updateEvent,\n      });\n      dispatch(slice.actions.updateEventSuccess(response.data.event));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}\n\n// ----------------------------------------------------------------------\n\nexport function deleteEvent(eventId) {\n  return async () => {\n    dispatch(slice.actions.startLoading());\n    try {\n      await axios.post('/api/calendar/events/delete', { eventId });\n      dispatch(slice.actions.deleteEventSuccess({ eventId }));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}\n\n// ----------------------------------------------------------------------\n\nexport function selectRange(start, end) {\n  return async () => {\n    dispatch(\n      slice.actions.selectRange({\n        start: start.getTime(),\n        end: end.getTime(),\n      })\n    );\n  };\n}\n","import { styled, alpha } from '@mui/material/styles';\n\n// ----------------------------------------------------------------------\n\nconst CalendarStyle = styled('div')(({ theme }) => ({\n  width: 'calc(100% + 2px)',\n  marginLeft: -1,\n  marginBottom: -1,\n  '& .fc': {\n    '--fc-list-event-dot-width': '8px',\n    '--fc-border-color': theme.palette.divider,\n    '--fc-event-border-color': theme.palette.info.light,\n    '--fc-now-indicator-color': theme.palette.error.main,\n    '--fc-today-bg-color': theme.palette.action.selected,\n    '--fc-page-bg-color': theme.palette.background.default,\n    '--fc-neutral-bg-color': theme.palette.background.neutral,\n    '--fc-list-event-hover-bg-color': theme.palette.action.hover,\n    '--fc-highlight-color': alpha(theme.palette.primary.main, 0.08),\n  },\n\n  '& .fc .fc-license-message': { display: 'none' },\n  '& .fc a': { color: theme.palette.text.primary },\n\n  // Table Head\n  '& .fc .fc-col-header ': {\n    boxShadow: `inset 0 -1px 0 ${theme.palette.divider}`,\n    '& th': { borderColor: 'transparent' },\n    '& .fc-col-header-cell-cushion': {\n      ...theme.typography.subtitle2,\n      padding: '13px 0',\n    },\n  },\n\n  // Event\n  '& .fc .fc-event': {\n    borderColor: 'transparent',\n    backgroundColor: 'transparent',\n  },\n  '& .fc .fc-event .fc-event-main': {\n    padding: '2px 4px',\n    borderRadius: 4,\n    backgroundColor: theme.palette.common.white,\n    transition: theme.transitions.create('filter'),\n    '&:hover': { filter: 'brightness(0.92)' },\n    '&:before,&:after': {\n      top: 0,\n      left: 0,\n      width: '100%',\n      height: '100%',\n      content: \"''\",\n      borderRadius: 4,\n      position: 'absolute',\n      boxSizing: 'border-box',\n    },\n    '&:before': {\n      zIndex: 8,\n      opacity: 0.32,\n      border: 'solid 1px currentColor',\n    },\n    '&:after': {\n      zIndex: 7,\n      opacity: 0.24,\n      backgroundColor: 'currentColor',\n    },\n  },\n  '& .fc .fc-event .fc-event-main-frame': {\n    fontSize: 13,\n    lineHeight: '20px',\n    filter: 'brightness(0.24)',\n  },\n  '& .fc .fc-daygrid-event .fc-event-title': {\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n    textOverflow: 'ellipsis',\n  },\n  '& .fc .fc-event .fc-event-time': {\n    padding: 0,\n    overflow: 'unset',\n    fontWeight: theme.typography.fontWeightBold,\n  },\n\n  // Popover\n  '& .fc .fc-popover': {\n    border: 0,\n    overflow: 'hidden',\n    boxShadow: theme.customShadows.z20,\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: theme.palette.background.paper,\n  },\n  '& .fc .fc-popover-header': {\n    ...theme.typography.subtitle2,\n    padding: theme.spacing(1),\n    backgroundColor: theme.palette.grey[500_12],\n    borderBottom: `solid 1px ${theme.palette.divider}`,\n  },\n  '& .fc .fc-popover-close': {\n    opacity: 0.48,\n    transition: theme.transitions.create('opacity'),\n    '&:hover': { opacity: 1 },\n  },\n  '& .fc .fc-more-popover .fc-popover-body': {\n    padding: theme.spacing(1.5),\n  },\n  '& .fc .fc-popover-body': {\n    '& .fc-daygrid-event.fc-event-start, & .fc-daygrid-event.fc-event-end': {\n      margin: '2px 0',\n    },\n  },\n\n  // Month View\n  '& .fc .fc-day-other .fc-daygrid-day-top': {\n    opacity: 1,\n    '& .fc-daygrid-day-number': {\n      color: theme.palette.text.disabled,\n    },\n  },\n  '& .fc .fc-daygrid-day-number': {\n    ...theme.typography.body2,\n    padding: theme.spacing(1, 1, 0),\n  },\n  '& .fc .fc-daygrid-event': {\n    marginTop: 4,\n  },\n  '& .fc .fc-daygrid-event.fc-event-start, & .fc .fc-daygrid-event.fc-event-end': {\n    marginLeft: 4,\n    marginRight: 4,\n  },\n  '& .fc .fc-daygrid-more-link': {\n    ...theme.typography.caption,\n    color: theme.palette.text.secondary,\n  },\n\n  // Week & Day View\n  '& .fc .fc-timegrid-axis-cushion': {\n    ...theme.typography.body2,\n    color: theme.palette.text.secondary,\n  },\n  '& .fc .fc-timegrid-slot-label-cushion': {\n    ...theme.typography.body2,\n  },\n\n  // Agenda View\n  '& .fc-direction-ltr .fc-list-day-text, .fc-direction-rtl .fc-list-day-side-text, .fc-direction-ltr .fc-list-day-side-text, .fc-direction-rtl .fc-list-day-text':\n    {\n      ...theme.typography.subtitle2,\n    },\n  '& .fc .fc-list-event': {\n    ...theme.typography.body2,\n    '& .fc-list-event-time': {\n      color: theme.palette.text.secondary,\n    },\n  },\n  '& .fc .fc-list-table': {\n    '& th, td': {\n      borderColor: 'transparent',\n    },\n  },\n}));\n\nexport default CalendarStyle;\n","import PropTypes from \"prop-types\";\n// @mui\nimport { styled } from \"@mui/material/styles\";\nimport {\n  Stack,\n  Button,\n  Tooltip,\n  Typography,\n  IconButton,\n  ToggleButton,\n} from \"@mui/material\";\n// utils\nimport { fDate } from \"../../../utils/formatTime\";\n// hooks\nimport useResponsive from \"../../../hooks/useResponsive\";\n// components\nimport Iconify from \"../../../components/Iconify\";\n\n// ----------------------------------------------------------------------\n\nconst VIEW_OPTIONS = [\n  { value: \"dayGridMonth\", label: \"Month\", icon: \"ic:round-view-module\" },\n  { value: \"timeGridWeek\", label: \"Week\", icon: \"ic:round-view-week\" },\n  { value: \"timeGridDay\", label: \"Day\", icon: \"ic:round-view-day\" },\n  { value: \"listWeek\", label: \"Agenda\", icon: \"ic:round-view-agenda\" },\n];\n\nconst RootStyle = styled(\"div\")(({ theme }) => ({\n  display: \"flex\",\n  alignItems: \"center\",\n  flexDirection: \"column\",\n  padding: theme.spacing(2.5),\n  [theme.breakpoints.up(\"sm\")]: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n  },\n}));\n\n// ----------------------------------------------------------------------\n\nCalendarToolbar.propTypes = {\n  date: PropTypes.instanceOf(Date).isRequired,\n  onToday: PropTypes.func,\n  onNextDate: PropTypes.func,\n  onPrevDate: PropTypes.func,\n  onChangeView: PropTypes.func,\n  view: PropTypes.oneOf([\n    \"dayGridMonth\",\n    \"timeGridWeek\",\n    \"timeGridDay\",\n    \"listWeek\",\n  ]),\n};\n\nexport default function CalendarToolbar({\n  date,\n  view,\n  onToday,\n  onNextDate,\n  onPrevDate,\n  onChangeView,\n}) {\n  const isDesktop = useResponsive(\"up\", \"sm\");\n\n  return (\n    <RootStyle>\n      {isDesktop && (\n        <Stack direction=\"row\" spacing={0.5}>\n          {VIEW_OPTIONS.map((viewOption) => (\n            <Tooltip key={viewOption.value} title={viewOption.label}>\n              <ToggleButton\n                value={view}\n                selected={viewOption.value === view}\n                onChange={() => onChangeView(viewOption.value)}\n                sx={{ width: 32, height: 32, padding: 0, border: 0 }}\n              >\n                <Iconify icon={viewOption.icon} width={20} height={20} />\n              </ToggleButton>\n            </Tooltip>\n          ))}\n        </Stack>\n      )}\n\n      <Stack direction=\"row\" alignItems=\"center\" spacing={2}>\n        <IconButton onClick={onPrevDate}>\n          <Iconify icon=\"eva:arrow-ios-back-fill\" width={20} height={20} />\n        </IconButton>\n\n        <Typography variant=\"h5\">{fDate(date)}</Typography>\n\n        <IconButton onClick={onNextDate}>\n          <Iconify icon=\"eva:arrow-ios-forward-fill\" width={20} height={20} />\n        </IconButton>\n      </Stack>\n\n      {isDesktop && (\n        <Button\n          size=\"small\"\n          color=\"error\"\n          variant=\"contained\"\n          onClick={onToday}\n        >\n          Today\n        </Button>\n      )}\n    </RootStyle>\n  );\n}\n","import React from \"react\";\n\nconst CustomEvent = ({ event }) => {\n  // Customize the color based on your event data\n  const eventColor = event.extendedProps.eventColor || \"#3788d8\"; // Default color\n\n  return (\n    <div\n      className=\"fc-event\"\n      style={{\n        backgroundColor: eventColor,\n        borderColor: eventColor,\n        color: \"#fff\", // Text color\n        height: \"100%\",\n        width: \"100%\",\n        overflow: \"hidden\",\n        fontSize: \"18px\",\n      }}\n    >\n      {event.title}\n    </div>\n  );\n};\n\nexport default CustomEvent;\n","import { DatePicker } from \"@mui/lab\";\nimport {\n  Alert,\n  Autocomplete,\n  Button,\n  Card,\n  Container,\n  Grid,\n  Stack,\n  TextField,\n  Typography,\n} from \"@mui/material\";\nimport { Suspense, useRef, useState, lazy, useEffect } from \"react\";\nimport {\n  CalendarStyle,\n  CalendarToolbar,\n} from \"../../../sections/@dashboard/calendar\";\nimport FullCalendar from \"@fullcalendar/react\"; // => request placed at the top\nimport listPlugin from \"@fullcalendar/list\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\nimport timelinePlugin from \"@fullcalendar/timeline\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport useResponsive from \"../../../hooks/useResponsive\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setLoading } from \"../../../features/globalSlice\";\nimport db from \"../../../firebase\";\nimport { useSnackbar } from \"notistack\";\nimport moment from \"moment\";\nimport CustomEvent from \"./CustomEvent\";\nimport KeyboardBackspaceIcon from \"@mui/icons-material/KeyboardBackspace\";\nimport { useNavigate } from \"react-router\";\nimport { PATH_DASHBOARD } from \"../../../routes/paths\";\nimport useAuth from \"../../../hooks/useAuth\";\nimport firebase from \"firebase/compat\";\nimport { selectCompanyList } from \"../../../features/companySlice\";\n\nconst CalendarForm = lazy(() => import(\"./CalendarForm\"));\nconst EventColorIndicator = lazy(() => import(\"./EventColorIndicator\"));\n\nfunction CalendarIndex() {\n  const { user } = useAuth();\n\n  const navigate = useNavigate();\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const dispatch = useDispatch();\n\n  const { companyList } = useSelector(selectCompanyList);\n\n  const [selectedCompany, set_selectedCompany] = useState(null);\n\n  const calendarRef = useRef(null);\n\n  const isDesktop = useResponsive(\"up\", \"sm\");\n\n  const [us_date_display, set_us_date_display] = useState(new Date());\n\n  const [us_fromDate, set_us_fromDate] = useState(new Date());\n\n  const [us_ToDate, set_us_ToDate] = useState(new Date());\n\n  const [us_employees, set_us_employees] = useState([]);\n\n  const [view, setView] = useState(\"timeGridDay\");\n\n  const [events, setEvents] = useState([]);\n\n  const [updatedEvent, set_updatedEvent] = useState(null);\n\n  const [us_operationType, set_us_operationType] = useState(\"\");\n\n  const [us_b_open_event_dlg, set_us_b_open_event_dlg] = useState(false);\n\n  const temp_fetch_employee_ref = useRef();\n\n  const temp_checkPermission_ref = useRef();\n\n  const [viewPermissionGranted, setViewPermissionGranted] = useState(false);\n\n  useEffect(() => {\n    temp_checkPermission_ref.current();\n  }, [selectedCompany]);\n\n  useEffect(() => {\n    if (selectedCompany && viewPermissionGranted) {\n      temp_fetch_employee_ref.current();\n    }\n  }, [selectedCompany, viewPermissionGranted]);\n\n  function checkPermission() {\n    if (selectedCompany && selectedCompany?.id) {\n      if (\n        !user?.permissions?.viewCalendar?.assignedCompanyId?.includes(\n          selectedCompany?.id\n        )\n      ) {\n        enqueueSnackbar(\n          \"You do not have the permission to view calendar for this company\",\n          { variant: \"error\" }\n        );\n\n        setViewPermissionGranted(false);\n      } else {\n        setViewPermissionGranted(true);\n      }\n    }\n  }\n\n  temp_checkPermission_ref.current = checkPermission;\n\n  const fetchEmployee = async () => {\n    dispatch(setLoading(true));\n\n    await db\n      .collection(\"company\")\n      .doc(selectedCompany.id)\n      .collection(\"employee\")\n      .get()\n      .then((result) => {\n        if (result?.docs && result?.docs?.length > 0) {\n          let allEmployees = [];\n          result?.docs.forEach((doc) => {\n            allEmployees.push({\n              ...doc?.data(),\n              id: doc.id,\n            });\n          });\n          set_us_employees(allEmployees);\n          dispatch(setLoading(false));\n        } else {\n          set_us_employees([]);\n          dispatch(setLoading(false));\n        }\n        dispatch(setLoading(false));\n      })\n      .catch((err) => {\n        enqueueSnackbar(\n          `Error occured while fetching employees: ${err?.message}`,\n          { variant: \"error\" }\n        );\n        dispatch(setLoading(false));\n      });\n  };\n\n  temp_fetch_employee_ref.current = fetchEmployee;\n\n  async function fetchEventDateRange(\n    companyId,\n    calendarStartDate,\n    calendarEndDate\n  ) {\n    const startDateISOString = calendarStartDate.toISOString();\n    const startDateStringSplit = startDateISOString.split(\"T\");\n\n    const endDateISOString = calendarEndDate.toISOString();\n    const endDateStringSplit = endDateISOString.split(\"T\");\n\n    const startDate = new Date(`${startDateStringSplit[0]}T00:00:00.000Z`); // The start date of the range\n    const endDate = new Date(`${endDateStringSplit[0]}T23:59:59.000Z`); // The end date of the range\n\n    dispatch(setLoading(true));\n\n    await db\n      .collection(\"company\")\n      .doc(companyId)\n      .collection(\"calendar\")\n      .where(\n        \"firebaseDateTimestamp\",\n        \">=\",\n        firebase.firestore.Timestamp.fromDate(startDate)\n      )\n      .where(\n        \"firebaseDateTimestamp\",\n        \"<=\",\n        firebase.firestore.Timestamp.fromDate(endDate)\n      )\n      .get()\n      .then((result) => {\n        if (result?.docs && result?.docs?.length > 0) {\n          let allEvents = [];\n          result?.docs.forEach((doc) => {\n            let newTitle = doc?.data()?.title || \"\";\n            let newDesc = doc.data()?.description || \"\";\n\n            if (doc.data().editedUser) {\n              newTitle =\n                newTitle + `, updated by user: ${doc.data().editedUser}`;\n              newDesc = newDesc + `, updated by user: ${doc.data().editedUser}`;\n            }\n\n            allEvents.push({\n              eventId: doc.id,\n              title: newTitle,\n              titleField: doc.data()?.titleField,\n              start: doc.data()?.start,\n              end: doc.data()?.end,\n              description: newDesc,\n              descriptionField: doc.data()?.description,\n              employees: doc.data()?.employees,\n              eventColor: doc.data()?.eventColor,\n              allDay: doc.data()?.allDay,\n              linkedDocumentType: doc.data()?.linkedDocumentType,\n              editedUser: doc.data().editedUser,\n            });\n          });\n          setEvents(allEvents);\n          dispatch(setLoading(false));\n        } else {\n          setEvents([]);\n          dispatch(setLoading(false));\n        }\n      })\n      .catch((err) => {\n        enqueueSnackbar(\n          `Error occured while fetching events: ${err?.message}`,\n          { variant: \"error\" }\n        );\n        dispatch(setLoading(false));\n      });\n  }\n\n  const handleDatesSet = (arg) => {\n    if (selectedCompany) {\n      // arg.start and arg.end represent the visible date range in the calendar\n      const startDate = arg.start;\n      const endDate = arg.end;\n\n      set_us_fromDate(startDate);\n      set_us_ToDate(endDate);\n\n      fetchEventDateRange(selectedCompany.id, startDate, endDate);\n    }\n  };\n\n  const handleChangeView = (newView) => {\n    const calendarEl = calendarRef.current;\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.changeView(newView);\n      setView(newView);\n\n      set_us_date_display(calendarApi.getDate());\n    }\n  };\n\n  const handleClickDatePrev = () => {\n    const calendarEl = calendarRef.current;\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.prev();\n      set_us_date_display(calendarApi.getDate());\n    }\n  };\n\n  const handleClickDateNext = () => {\n    const calendarEl = calendarRef.current;\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.next();\n      set_us_date_display(calendarApi.getDate());\n    }\n  };\n\n  const handleClickToday = () => {\n    const calendarEl = calendarRef.current;\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.today();\n      set_us_date_display(calendarApi.getDate());\n    }\n  };\n\n  const handleSelectEvent = (arg) => {\n    const o_event_selected = arg?.event?._def;\n    const o_event_dates = arg?.event?._instance?.range;\n\n    const startTimeFormatted =\n      (o_event_dates?.start &&\n        moment(moment(o_event_dates?.start).utc()).utc().format(\"HH:mm\")) ||\n      \"00:00\";\n    const endTimeFormatted =\n      (o_event_dates?.end &&\n        moment(moment(o_event_dates?.end).utc()).utc().format(\"HH:mm\")) ||\n      \"00:00\";\n\n    set_updatedEvent({\n      publicId: o_event_selected?.extendedProps?.eventId || \"\",\n      date: o_event_dates?.start || new Date(),\n      titleField: o_event_selected?.extendedProps?.titleField || \"\",\n      description: o_event_selected?.extendedProps?.descriptionField || \"\",\n      startTime: startTimeFormatted,\n      endTime: endTimeFormatted,\n      employees: o_event_selected?.extendedProps?.employees || [],\n      eventColor: o_event_selected?.extendedProps?.eventColor || \"\",\n      editedUser: o_event_selected?.extendedProps?.editedUser || \"\",\n      linkedDocumentType:\n        o_event_selected?.extendedProps?.linkedDocumentType || \"\",\n    });\n\n    set_us_operationType(\"update\");\n\n    set_us_b_open_event_dlg(true);\n  };\n\n  function handleClose() {\n    set_us_b_open_event_dlg(false);\n  }\n\n  const handleEventInteraction = async (arg) => {\n    dispatch(setLoading(true));\n\n    const o_event_selected = arg?.event?._def;\n    const o_event_dates = arg?.event?._instance?.range;\n\n    let formattedDate = moment(o_event_dates?.start).format(\"YYYY-MM-DD\");\n\n    const startTimeFormatted =\n      (o_event_dates?.start &&\n        moment(moment(o_event_dates?.start).utc()).utc().format(\"HH:mm\")) ||\n      \"00:00\";\n    const endTimeFormatted =\n      (o_event_dates?.end &&\n        moment(moment(o_event_dates?.end).utc()).utc().format(\"HH:mm\")) ||\n      \"00:00\";\n\n    let startTimeString = `${formattedDate}T${startTimeFormatted}:00Z`;\n    let endTimeString = `${formattedDate}T${endTimeFormatted}:00Z`;\n\n    let employeeNames = \"\";\n    o_event_selected?.extendedProps?.employees.forEach((employee) => {\n      employeeNames = employeeNames + employee?.name + \", \";\n    });\n\n    let eventTitle = `Title: ${o_event_selected?.extendedProps?.titleField}`;\n\n    let eventDescription = o_event_selected?.extendedProps?.descriptionField;\n\n    if (o_event_selected?.extendedProps?.description) {\n      eventTitle =\n        eventTitle +\n        ` - Description: ${o_event_selected?.extendedProps?.description}`;\n    }\n\n    if (employeeNames) {\n      eventTitle = eventTitle + ` - Assigned employees: ${employeeNames}`;\n    }\n\n    eventTitle =\n      eventTitle +\n      ` - Start time: ${startTimeFormatted} - End time: ${endTimeFormatted}`;\n\n    await db\n      .collection(\"company\")\n      .doc(selectedCompany.id)\n      .collection(\"calendar\")\n      .doc(o_event_selected?.extendedProps?.eventId)\n      .set(\n        {\n          title: eventTitle,\n          description: eventDescription,\n          start: startTimeString,\n          end: endTimeString,\n          editedUser: user?.email,\n          firebaseDateTimestamp: firebase.firestore.Timestamp.fromDate(\n            new Date(formattedDate)\n          ),\n        },\n        { merge: true }\n      )\n      .then(() => {\n        // fetchEvent();\n        fetchEventDateRange(selectedCompany.id, us_fromDate, us_ToDate);\n        enqueueSnackbar(\"Details recorded successfully\");\n        dispatch(setLoading(false));\n      })\n      .catch((err) => {\n        enqueueSnackbar(`Error occured while saving details: ${err?.message}`, {\n          variant: \"error\",\n        });\n        dispatch(setLoading(false));\n      });\n  };\n\n  const handleSelectChange = async (e, value, reason) => {\n    e.preventDefault();\n    if (reason !== \"removeOption\" && reason !== \"clear\" && value) {\n      if (us_fromDate && us_ToDate) {\n        fetchEventDateRange(value.id, us_fromDate, us_ToDate);\n      }\n      set_selectedCompany(value);\n    } else if (reason === \"removeOption\" || reason === \"clear\") {\n      setEvents([]);\n      set_selectedCompany(null);\n    }\n  };\n\n  return (\n    <Container>\n      <Grid container spacing={3}>\n        <Grid item xs={12} md={12}>\n          <Stack spacing={3} direction=\"row\" alignItems={\"center\"}>\n            <Button\n              startIcon={<KeyboardBackspaceIcon />}\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => navigate(PATH_DASHBOARD.general.app1)}\n            >\n              back\n            </Button>\n            <Typography variant=\"h3\">Calendar section</Typography>\n          </Stack>\n        </Grid>\n\n        <Grid item xs={12} md={12}>\n          <Autocomplete\n            ListboxProps={{ style: { maxHeight: \"70vh\" } }}\n            size=\"small\"\n            label=\"Please choose a company\"\n            id=\"company-drop-down\"\n            options={companyList}\n            value={selectedCompany || null}\n            sx={{ width: 300 }}\n            renderInput={(params) => (\n              <TextField\n                {...params}\n                label=\"Please choose a company\"\n                InputLabelProps={{ required: true }}\n              />\n            )}\n            required\n            onChange={(e, value, reason) =>\n              handleSelectChange(e, value, reason, \"company\")\n            }\n            getOptionLabel={(option) => option.name}\n          />\n        </Grid>\n\n        {selectedCompany && viewPermissionGranted ? (\n          <>\n            <Grid item xs={12} md={12}>\n              <Typography>Filter by date</Typography>\n\n              <br />\n              <Grid container spacing={3} alignItems={\"flex-end\"}>\n                <Grid item xs={12} sm={6} md={2}>\n                  <DatePicker\n                    label=\"From\"\n                    value={us_fromDate || \"\"}\n                    onChange={(newValue) => {\n                      set_us_fromDate(newValue);\n                    }}\n                    renderInput={(params) => (\n                      <TextField {...params} size=\"small\" />\n                    )}\n                    inputFormat=\"dd/MM/yyyy\"\n                  />\n                </Grid>\n                <Grid item xs={12} sm={6} md={2}>\n                  <DatePicker\n                    label=\"To\"\n                    value={us_ToDate || \"\"}\n                    onChange={(newValue) => {\n                      set_us_ToDate(newValue);\n                    }}\n                    renderInput={(params) => (\n                      <TextField {...params} size=\"small\" />\n                    )}\n                    inputFormat=\"dd/MM/yyyy\"\n                  />\n                </Grid>\n                <Grid item xs={12} sm={4} md={1}>\n                  <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={() =>\n                      fetchEventDateRange(\n                        selectedCompany.id,\n                        us_fromDate,\n                        us_ToDate\n                      )\n                    }\n                  >\n                    search\n                  </Button>\n                </Grid>\n                <Grid item xs={12} sm={6} md={4}>\n                  {\" \"}\n                  {events && events?.length > 0 ? (\n                    <Alert\n                      severity=\"info\"\n                      size=\"small\"\n                    >{`${events?.length} task(s) found for this date`}</Alert>\n                  ) : (\n                    <Alert\n                      severity=\"warning\"\n                      size=\"small\"\n                    >{`No task found for this date`}</Alert>\n                  )}\n                </Grid>\n              </Grid>\n\n              <br />\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                  set_us_operationType(\"create\");\n                  set_us_b_open_event_dlg(true);\n                }}\n                style={{ width: \"300px\" }}\n                disabled={\n                  !user?.permissions?.addCalendarTask?.assignedCompanyId?.includes(\n                    selectedCompany?.id\n                  )\n                }\n              >\n                Add employee task\n              </Button>\n            </Grid>\n            <Grid item xs={12} md={12}>\n              <br />\n              <hr />\n              <br />\n              <EventColorIndicator />\n              <br />\n              <Card>\n                <CalendarStyle>\n                  <CalendarToolbar\n                    date={us_date_display}\n                    view={view}\n                    onNextDate={handleClickDateNext}\n                    onPrevDate={handleClickDatePrev}\n                    onToday={handleClickToday}\n                    onChangeView={handleChangeView}\n                  />\n                  <FullCalendar\n                    timeZone=\"UTC\"\n                    weekends\n                    editable={true}\n                    droppable\n                    selectable\n                    events={events || []}\n                    eventContent={(eventInfo) => (\n                      <CustomEvent event={eventInfo.event} />\n                    )}\n                    ref={calendarRef}\n                    rerenderDelay={10}\n                    initialDate={us_date_display}\n                    initialView={view}\n                    headerToolbar={false}\n                    // allDayMaintainDuration\n                    eventClick={handleSelectEvent}\n                    eventResize={handleEventInteraction}\n                    eventDrop={handleEventInteraction}\n                    height={isDesktop ? 720 : \"auto\"}\n                    plugins={[\n                      listPlugin,\n                      dayGridPlugin,\n                      timelinePlugin,\n                      timeGridPlugin,\n                      interactionPlugin,\n                    ]}\n                    eventTimeFormat={{\n                      hour: \"2-digit\",\n                      minute: \"2-digit\",\n                      meridiem: \"short\",\n                    }}\n                    datesSet={handleDatesSet}\n                  />\n                </CalendarStyle>\n              </Card>\n            </Grid>\n          </>\n        ) : (\n          <></>\n        )}\n      </Grid>\n\n      {us_b_open_event_dlg ? (\n        <Suspense fallback={<></>}>\n          <CalendarForm\n            selectedCompany={selectedCompany}\n            operationType={us_operationType}\n            updatedEvent={updatedEvent || null}\n            set_updatedEvent={set_updatedEvent}\n            open={us_b_open_event_dlg}\n            onCancel={handleClose}\n            fetchEventDateRange={fetchEventDateRange}\n            fetchEmployee={fetchEmployee}\n            employeesList={us_employees}\n            us_fromDate={us_fromDate}\n            us_ToDate={us_ToDate}\n          />\n        </Suspense>\n      ) : (\n        <></>\n      )}\n    </Container>\n  );\n}\n\nexport default CalendarIndex;\n"],"sourceRoot":""}