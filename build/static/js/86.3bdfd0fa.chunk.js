(this["webpackJsonp@minimal/minimal-kit-react"]=this["webpackJsonp@minimal/minimal-kit-react"]||[]).push([[86],{1810:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return X}));var a=n(9),i=n(27),c=n(6),o=n(18),l=n(3),r=n.n(l),s=n(4),d=n(1508),u=n(133),v=n(1466),j=n(701),p=n(286),b=n(145),h=n(1516),x=n(1530),O=n(1531),m=n(1535),f=n(1533),g=n(1534),w=n(1532),y=n(1499),D=n(1398),S=n(1406),k=n(1413),E=n(1414),z=n(83),I=n(287),C=n(52),M=n(69),T=n.n(M),A=n(118),U=n(68),P=n(49),F=n(134),Y=n(48),N=n(65),R=n(1527),W=n.n(R),H=n(1526),B=n.n(H),q=n(1844),L=n(472),V=n(50),J=n.n(V),K=n(72),Z=n(46),_=n(250),G=n(0),Q=Object(s.lazy)((function(){return n.e(3).then(n.bind(null,1546))}));function X(){var e,t,n,l,M,R,H,V,X,$,ee,te=Object(K.a)().user,ne=Object(Y.g)(),ae=Object(z.a)().themeStretch,ie=Object(C.b)(),ce=Object(A.b)().enqueueSnackbar,oe=Object(s.useRef)(),le=Object(s.useState)(""),re=Object(o.a)(le,2),se=re[0],de=re[1],ue=Object(s.useState)(""),ve=Object(o.a)(ue,2),je=ve[0],pe=ve[1],be=Object(s.useRef)(),he=Object(s.useRef)(),xe=Object(C.c)(L.b),Oe=xe.companyDetails,me=xe.clientDocumentObjectSelected,fe=xe.paymentDocType,ge=Object(s.useState)([]),we=Object(o.a)(ge,2),ye=we[0],De=we[1],Se=Object(s.useState)(new Date),ke=Object(o.a)(Se,2),Ee=ke[0],ze=ke[1],Ie=Object(s.useState)(new Date),Ce=Object(o.a)(Ie,2),Me=Ce[0],Te=Ce[1],Ae=Object(s.useState)(!1),Ue=Object(o.a)(Ae,2),Pe=Ue[0],Fe=Ue[1],Ye=Object(s.useState)(null),Ne=Object(o.a)(Ye,2),Re=Ne[0],We=Ne[1],He=Object(s.useState)(!1),Be=Object(o.a)(He,2),qe=Be[0],Le=Be[1],Ve=Object(s.useState)(!1),Je=Object(o.a)(Ve,2),Ke=Je[0],Ze=Je[1],_e=Object(s.useState)({expenseAmt:0,expenseDesc:""}),Ge=Object(o.a)(_e,2),Qe=Ge[0],Xe=Ge[1],$e=Object(s.useState)(null),et=Object(o.a)($e,2),tt=et[0],nt=et[1];function at(){return(at=Object(c.a)(r.a.mark((function e(){var t,n,a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===Oe||void 0===Oe||null===(t=Oe.data)||void 0===t||!t.imageUrl||""===(null===Oe||void 0===Oe||null===(n=Oe.data)||void 0===n?void 0:n.imageUrl)){e.next=6;break}return ie(Object(U.d)(!0)),e.next=4,ct(null===Oe||void 0===Oe||null===(a=Oe.data)||void 0===a?void 0:a.imageUrl);case 4:i=e.sent,de(i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(){return(it=Object(c.a)(r.a.mark((function e(){var t,n,a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===Oe||void 0===Oe||null===(t=Oe.data)||void 0===t||!t.sigUrl||""===(null===Oe||void 0===Oe||null===(n=Oe.data)||void 0===n?void 0:n.sigUrl)){e.next=6;break}return ie(Object(U.d)(!0)),e.next=4,ct(null===Oe||void 0===Oe||null===(a=Oe.data)||void 0===a?void 0:a.sigUrl);case 4:i=e.sent,pe(i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(e){return ot.apply(this,arguments)}function ot(){return(ot=Object(c.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=4;break}return e.abrupt("return","");case 4:return e.prev=4,e.next=7,fetch(t);case 7:return n=e.sent,e.next=10,n.blob();case 10:return a=e.sent,e.abrupt("return",new Promise((function(e){var t=new FileReader;t.readAsDataURL(a),t.onloadend=function(){var n=t.result;e(n)}})));case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})))).apply(this,arguments)}function lt(){return rt.apply(this,arguments)}function rt(){return(rt=Object(c.a)(r.a.mark((function e(){var t,n,i,c,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(void 0!==Ee&&""!==Ee&&void 0!==Me&&""!==Me&&Oe&&me&&fe)){e.next=17;break}if(!(new Date(Ee)>new Date(Me))){e.next=6;break}ce("Date incorrect. To Date cannot be before From Date.",{variant:"error"}),ie(Object(U.d)(!1)),e.next=15;break;case 6:return ie(Object(U.d)(!0)),t=Ee.toISOString(),n=t.split("T"),i=Me.toISOString(),c=i.split("T"),o=new Date("".concat(n[0],"T00:00:00.000Z")),l=new Date("".concat(c[0],"T23:59:59.000Z")),e.next=15,P.b.collection("company").doc(null===Oe||void 0===Oe?void 0:Oe.id).collection(fe).where("docDate",">=",F.a.firestore.Timestamp.fromDate(o)).where("docDate","<=",F.a.firestore.Timestamp.fromDate(l)).get().then((function(e){var t,n=[];(null===e||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.length)>0?(null===e||void 0===e||e.docs.forEach((function(e){var t,i;if((null===e||void 0===e||null===(t=e.data())||void 0===t?void 0:t.clientId)===(null===me||void 0===me?void 0:me.id)&&(null===e||void 0===e||null===(i=e.data())||void 0===i||!i.deleted)){var c;if("proforma"!==fe||null===e||void 0===e||null===(c=e.data())||void 0===c||!c.isProformaConverted){var o,l,r,s,d,u=Number((null===e||void 0===e||null===(o=e.data())||void 0===o?void 0:o.docRemainingPaymentAmt)||0),v=0;if(null!==e&&void 0!==e&&null!==(l=e.data())&&void 0!==l&&l.invoiceExpensetData&&(null===e||void 0===e||null===(r=e.data())||void 0===r||null===(s=r.invoiceExpensetData)||void 0===s?void 0:s.length)>0)null===e||void 0===e||null===(d=e.data())||void 0===d||d.invoiceExpensetData.forEach((function(e){v+=Number((null===e||void 0===e?void 0:e.expenseAmt)||0)}));n.push({checked:!1,id:null===e||void 0===e?void 0:e.id,data:Object(a.a)({},null===e||void 0===e?void 0:e.data()),paymentAmt:0,paymentType:"",docRemainingPaymentAmt:u,totalExpenseAmountForInvoice:v})}}})),De(n)):De([]),ie(Object(U.d)(!1))})).catch((function(e){ce("Error occured while fetching invoices: ".concat(null===e||void 0===e?void 0:e.message),{variant:"error"}),ie(Object(U.d)(!1))}));case 15:e.next=18;break;case 17:ie(Object(U.d)(!1));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(s.useEffect)((function(){be.current(),he.current()}),[Oe]),Object(s.useEffect)((function(){oe.current()}),[Ee,Me,Oe,me,fe]),be.current=function(){return at.apply(this,arguments)},he.current=function(){return it.apply(this,arguments)},oe.current=lt;var st=function(){var e=Object(c.a)(r.a.mark((function e(t,n){var c,o,l,s,d,u,v,j,p,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(t.target.files&&t.target.files.length>0)){e.next=24;break}return ie(Object(U.d)(!0)),o="",l=new Date,s=l.toISOString(),d="/screenshot/".concat(null===Oe||void 0===Oe?void 0:Oe.id,"/").concat(null===Re||void 0===Re||null===(c=Re.invoiceData)||void 0===c?void 0:c.docType,"/").concat(s),u=t.target.files[0],v=P.c.storage().ref(),j=v.child(d),e.next=12,j.put(u);case 12:return e.next=14,j.getDownloadURL();case 14:if(!(o=e.sent)){e.next=22;break}return(b=Object(i.a)((null===Re||void 0===Re?void 0:Re.invoiceScreenshotData)||[])).push({dateString:s,screenshotUrl:o,screenshotStoragePath:d,timestamp:F.a.firestore.Timestamp.fromDate(new Date)}),e.next=20,P.b.collection("company").doc(null===Oe||void 0===Oe?void 0:Oe.id).collection(null===Re||void 0===Re||null===(p=Re.invoiceData)||void 0===p?void 0:p.docType).doc(null===Re||void 0===Re?void 0:Re.invoiceId).set({invoiceScreenshotData:b},{merge:!0}).then((function(){We(Object(a.a)(Object(a.a)({},Re),{},{invoiceScreenshotData:b})),ce("Sreenshot uploaded successfully"),ie(Object(U.d)(!1)),lt()})).catch((function(e){ce("Error occured while uploading screenshot: ".concat((null===e||void 0===e?void 0:e.message)||""),{variant:"error"}),ie(Object(U.d)(!1))}));case 20:e.next=24;break;case 22:ce("Error occured while getting screenshot storage url",{variant:"error"}),ie(Object(U.d)(!1));case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function dt(){return(dt=Object(c.a)(r.a.mark((function e(t){var n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t||!t.screenshotStoragePath){e.next=6;break}return ie(Object(U.d)(!0)),n=P.c.storage().ref(),o=n.child(null===t||void 0===t?void 0:t.screenshotStoragePath),e.next=6,o.delete().then(Object(c.a)(r.a.mark((function e(){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=(c=Object(i.a)((null===Re||void 0===Re?void 0:Re.invoiceScreenshotData)||[])).filter((function(e){return(null===e||void 0===e?void 0:e.screenshotStoragePath)!==(null===t||void 0===t?void 0:t.screenshotStoragePath)})),e.next=4,P.b.collection("company").doc(null===Oe||void 0===Oe?void 0:Oe.id).collection(null===Re||void 0===Re||null===(n=Re.invoiceData)||void 0===n?void 0:n.docType).doc(null===Re||void 0===Re?void 0:Re.invoiceId).set({invoiceScreenshotData:c},{merge:!0}).then((function(){We(Object(a.a)(Object(a.a)({},Re),{},{invoiceScreenshotData:c})),ce("Sreenshot deleted successfully"),ie(Object(U.d)(!1)),lt()})).catch((function(e){ce("Error occured while deleting screenshot: ".concat((null===e||void 0===e?void 0:e.message)||""),{variant:"error"}),ie(Object(U.d)(!1))}));case 4:case"end":return e.stop()}}),e)})))).catch((function(e){ce("Error occured while deleting screenshot: ".concat((null===e||void 0===e?void 0:e.message)||""),{variant:"error"}),ie(Object(U.d)(!1))}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(){return(ut=Object(c.a)(r.a.mark((function e(){var t,n,c,o,l,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie(Object(U.d)(!0)),c="",o=Object(i.a)((null===tt||void 0===tt||null===(t=tt.invoiceData)||void 0===t?void 0:t.invoiceExpensetData)||[]),null===Qe||void 0===Qe||!Qe.expenseStoragePath){e.next=11;break}return l=P.c.storage().ref(),s=l.child(null===Qe||void 0===Qe?void 0:Qe.expenseStoragePath),e.next=8,s.put(null===Qe||void 0===Qe?void 0:Qe.expenseFile);case 8:return e.next=10,s.getDownloadURL();case 10:c=e.sent;case 11:return c?o.push({dateString:null===Qe||void 0===Qe?void 0:Qe.dateString,expenseAmt:null===Qe||void 0===Qe?void 0:Qe.expenseAmt,expenseDesc:null===Qe||void 0===Qe?void 0:Qe.expenseDesc,expenseUrl:c,expenseStoragePath:null===Qe||void 0===Qe?void 0:Qe.expenseStoragePath,timestamp:F.a.firestore.Timestamp.fromDate(new Date)}):o.push({dateString:"",expenseAmt:null===Qe||void 0===Qe?void 0:Qe.expenseAmt,expenseDesc:null===Qe||void 0===Qe?void 0:Qe.expenseDesc,expenseUrl:"",expenseStoragePath:"",timestamp:F.a.firestore.Timestamp.fromDate(new Date)}),e.next=14,P.b.collection("company").doc(null===Oe||void 0===Oe?void 0:Oe.id).collection(null===tt||void 0===tt||null===(n=tt.invoiceData)||void 0===n?void 0:n.docType).doc(null===tt||void 0===tt?void 0:tt.invoiceId).set({invoiceExpensetData:o},{merge:!0}).then((function(){nt(Object(a.a)(Object(a.a)({},tt),{},{invoiceData:Object(a.a)(Object(a.a)({},null===tt||void 0===tt?void 0:tt.invoiceData),{},{invoiceExpensetData:o})})),lt(),ce("Expense uploaded successfully"),Ze(!1),ie(Object(U.d)(!1))})).catch((function(e){ce("Error occured while uploading expense: ".concat((null===e||void 0===e?void 0:e.message)||""),{variant:"error"}),ie(Object(U.d)(!1))}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vt(){return(vt=Object(c.a)(r.a.mark((function e(t,n){var i,o,l,s,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie(Object(U.d)(!0)),null===t||void 0===t||!t.expenseStoragePath){e.next=6;break}return l=P.c.storage().ref(),s=l.child(null===t||void 0===t?void 0:t.expenseStoragePath),e.next=6,s.delete().then(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ce("Image Url deleted successfully"),ie(Object(U.d)(!1));case 2:case"end":return e.stop()}}),e)})))).catch((function(e){ce("Error occured while deleting expense: ".concat((null===e||void 0===e?void 0:e.message)||""),{variant:"error"}),ie(Object(U.d)(!1))}));case 6:return ie(Object(U.d)(!0)),d=[],null===tt||void 0===tt||null===(i=tt.invoiceData)||void 0===i||i.invoiceExpensetData.forEach((function(e){(null===e||void 0===e?void 0:e.expenseDesc)!==(null===t||void 0===t?void 0:t.expenseDesc)&&(e.timestamp&&T()(e.timestamp.toDate()).format("DD-MM-YYYY, HH:MM:ss")||"")!==(t.timestamp&&T()(t.timestamp.toDate()).format("DD-MM-YYYY, HH:MM:ss")||"")&&d.push(Object(a.a)({},t))})),e.next=11,P.b.collection("company").doc(null===Oe||void 0===Oe?void 0:Oe.id).collection(null===tt||void 0===tt||null===(o=tt.invoiceData)||void 0===o?void 0:o.docType).doc(null===tt||void 0===tt?void 0:tt.invoiceId).set({invoiceExpensetData:d},{merge:!0}).then((function(){nt(Object(a.a)(Object(a.a)({},tt),{},{invoiceData:Object(a.a)(Object(a.a)({},null===tt||void 0===tt?void 0:tt.invoiceData),{},{invoiceExpensetData:d})})),lt(),ce("Expense deleted successfully"),ie(Object(U.d)(!1))})).catch((function(e){ce("Error occured while deleting expense: ".concat((null===e||void 0===e?void 0:e.message)||""),{variant:"error"}),ie(Object(U.d)(!1))}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(G.jsxs)(I.a,{title:"Payment/Expense",children:[Object(G.jsx)(d.a,{maxWidth:!ae&&"xl",children:Object(G.jsxs)(u.a,{container:!0,spacing:3,children:[Object(G.jsx)(u.a,{item:!0,xs:12,md:12,children:Object(G.jsxs)(v.a,{spacing:3,direction:"row",alignItems:"center",children:[Object(G.jsx)(j.a,{startIcon:Object(G.jsx)(W.a,{}),variant:"outlined",color:"primary",onClick:function(){return ne(N.b.general.app1)},children:"Back"}),Object(G.jsx)(p.a,{variant:"h3",children:"Expense section"})]})}),Object(G.jsx)(s.Suspense,{fallback:Object(G.jsx)(G.Fragment,{}),children:Object(G.jsx)(Q,{type:"expense"})}),Object(G.jsx)("br",{}),Object(G.jsx)("br",{}),Oe&&me&&fe&&Object(G.jsx)(G.Fragment,{children:Object(G.jsx)(u.a,{item:!0,xs:12,md:12,children:Object(G.jsxs)(v.a,{spacing:3,children:[Object(G.jsx)("hr",{}),Object(G.jsx)(p.a,{children:"Please choose any invoices and insert an expense amount"}),Object(G.jsxs)(v.a,{direction:"row",spacing:3,alignItems:"center",children:[Object(G.jsx)(q.a,{label:"From",value:Ee||"",onChange:function(e){ze(e)},renderInput:function(e){return Object(G.jsx)(b.a,Object(a.a)(Object(a.a)({},e),{},{size:"small"}))},inputFormat:"dd/MM/yyyy"}),Object(G.jsx)(q.a,{label:"To",value:Me||"",onChange:function(e){Te(e)},renderInput:function(e){return Object(G.jsx)(b.a,Object(a.a)(Object(a.a)({},e),{},{size:"small"}))},inputFormat:"dd/MM/yyyy"})]}),Object(G.jsx)(h.a,{children:Object(G.jsx)(v.a,{style:{padding:"10px"},children:Object(G.jsx)(x.a,{children:Object(G.jsxs)(O.a,{border:1,children:[Object(G.jsx)(m.a,{children:Object(G.jsxs)(f.a,{children:[Object(G.jsx)(g.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:"Add/update/delete Expense"}),Object(G.jsx)(g.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:"View/Download"}),Object(G.jsx)(g.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:"Invoice Number"}),Object(G.jsx)(g.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:"Datetime created"}),Object(G.jsx)(g.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:"Bill to"}),Object(G.jsx)(g.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:"Invoice amount"})]})}),Object(G.jsx)(w.a,{children:ye&&(null===ye||void 0===ye?void 0:ye.length)>0&&(null===ye||void 0===ye?void 0:ye.map((function(e,t){var n,i,c,o;return Object(G.jsxs)(f.a,{children:[Object(G.jsx)(g.a,{size:"small",align:"center",style:{whiteSpace:"nowrap",background:Number((null===e||void 0===e?void 0:e.totalExpenseAmountForInvoice)||0)>=Number((null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.docTotal)||0)?"#FEC3BE":"transparent"},children:Object(G.jsxs)(v.a,{spacing:2,direction:"row",alignItems:"center",children:[Object(G.jsx)(J.a,{value:Math.round(Number((null===e||void 0===e?void 0:e.totalExpenseAmountForInvoice)||0)),displayType:"text",thousandSeparator:!0}),Object(G.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){Le(!0),nt({invoiceId:null===e||void 0===e?void 0:e.id,invoiceData:Object(a.a)({},null===e||void 0===e?void 0:e.data),totalExpenseAmountForInvoice:(null===e||void 0===e?void 0:e.totalExpenseAmountForInvoice)||0})},style:{whiteSpace:"nowrap"},children:"Show expense"})]})}),Object(G.jsx)(g.a,{align:"center",size:"small",style:{whiteSpace:"nowrap"},children:Object(G.jsxs)(v.a,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,children:[Object(G.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(){return Object(_.n)(Oe,me,e,se,je,"view")},children:Object(G.jsx)(Z.a,{icon:"carbon:view"})}),Object(G.jsx)(y.a,{variant:"contained",color:"primary",onClick:function(){return Object(_.n)(Oe,me,e,se,je,"download")},children:Object(G.jsx)(Z.a,{icon:"eva:download-fill"})})]})}),Object(G.jsx)(g.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.docString}),Object(G.jsx)(g.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:T()(null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.docDate.toDate()).format("DD-MM-YYYY, HH:MM:ss")}),Object(G.jsx)(g.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:(null===me||void 0===me?void 0:me.name)||""}),Object(G.jsx)(g.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:Object(G.jsx)(J.a,{value:Math.round(Number((null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.docTotal)||0)),displayType:"text",thousandSeparator:!0})})]},t)})))})]})})})})]})})})]})}),Pe?Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(D.a,{open:Pe,onClose:function(){Fe(!1),We(null)},fullWidth:!0,maxWidth:"md",children:[Object(G.jsx)(S.a,{children:"Payment screenshots"}),Object(G.jsxs)(k.a,{children:[Object(G.jsx)("br",{}),Object(G.jsxs)(p.a,{children:["Upload Screenshot"," ",Object(G.jsx)("span",{style:{color:"red"},children:"(Max Size of 25 KB)"}),":"," "]}),Object(G.jsx)(b.a,{className:"uploadInput",variant:"outlined",size:"small",fullWidth:!0,name:"image",type:"file",id:"image",accept:".png,.jpeg",onChange:function(e){return st(e)}}),Object(G.jsx)("br",{}),Object(G.jsx)("br",{}),Object(G.jsx)(x.a,{children:Object(G.jsxs)(O.a,{border:1,children:[Object(G.jsx)(m.a,{children:Object(G.jsxs)(f.a,{children:[Object(G.jsx)(g.a,{size:"small",children:"Date"}),Object(G.jsx)(g.a,{size:"small",children:"View"}),Object(G.jsx)(g.a,{size:"small",children:"Delete"})]})}),Object(G.jsx)(w.a,{children:(null===Re||void 0===Re?void 0:Re.invoiceScreenshotData)&&(null===Re||void 0===Re||null===(e=Re.invoiceScreenshotData)||void 0===e?void 0:e.length)>0&&(null===Re||void 0===Re||null===(t=Re.invoiceScreenshotData)||void 0===t?void 0:t.map((function(e,t){return Object(G.jsxs)(f.a,{children:[Object(G.jsx)(g.a,{size:"small",children:(null===e||void 0===e?void 0:e.dateString)||""}),Object(G.jsx)(g.a,{size:"small",children:null!==e&&void 0!==e&&e.screenshotUrl&&""!==(null===e||void 0===e?void 0:e.screenshotUrl)?Object(G.jsx)(j.a,{variant:"contained",color:"primary",href:"".concat(null===e||void 0===e?void 0:e.screenshotUrl),target:"_blank",children:"open"}):Object(G.jsx)(p.a,{children:"No url found"})}),Object(G.jsx)(g.a,{size:"small",children:Object(G.jsx)(j.a,{variant:"contained",color:"error",onClick:function(){return function(e){return dt.apply(this,arguments)}(e)},children:"delete"})})]},t)})))})]})})]}),Object(G.jsx)(E.a,{children:Object(G.jsx)(j.a,{onClick:function(){Fe(!1),We(null)},variant:"contained",color:"error",children:"Close"})})]})}):Object(G.jsx)(G.Fragment,{}),qe?Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(D.a,{open:qe,onClose:function(){Le(!1),Ze(!1),nt(null)},fullWidth:!0,maxWidth:"md",children:[Object(G.jsx)(S.a,{children:"Expenses"}),Object(G.jsxs)(k.a,{children:[Object(G.jsx)("br",{}),!Ke&&Object(G.jsx)(j.a,{onClick:function(){return Ze(!0)},variant:"contained",color:"primary",disabled:!(null!==te&&void 0!==te&&null!==(n=te.permissions)&&void 0!==n&&null!==(l=n.addExpense)&&void 0!==l&&null!==(M=l.assignedCompanyId)&&void 0!==M&&M.includes(null===Oe||void 0===Oe?void 0:Oe.id)),children:"Add expense"}),Ke&&Object(G.jsxs)(u.a,{container:!0,spacing:3,children:[Object(G.jsx)(u.a,{item:!0,xs:12,md:12,children:Object(G.jsx)(b.a,{variant:"outlined",size:"small",fullWidth:!0,name:"expenseAmount",type:"text",id:"expenseAmount",label:"Expense amount",onChange:function(e){Xe(Object(a.a)(Object(a.a)({},Qe),{},{expenseAmt:e.target.value}))},required:!0})}),Object(G.jsx)(u.a,{item:!0,xs:12,md:12,children:Object(G.jsx)(b.a,{variant:"outlined",size:"small",fullWidth:!0,name:"expenseDesc",type:"text",id:"expenseDesc",label:"Expense description",onChange:function(e){Xe(Object(a.a)(Object(a.a)({},Qe),{},{expenseDesc:e.target.value}))},required:!0})}),Object(G.jsxs)(u.a,{item:!0,xs:12,md:12,children:[Object(G.jsxs)(p.a,{children:["Upload expense"," ",Object(G.jsx)("span",{style:{color:"red"},children:"(Max Size of 25 KB)"}),":"," "]}),Object(G.jsx)(b.a,{className:"uploadInput",variant:"outlined",size:"small",fullWidth:!0,name:"image",type:"file",id:"image",accept:".png,.jpeg,.pdf",onChange:function(e){return function(e){if(e.target.files&&e.target.files.length>0){var t,n=(new Date).toISOString(),i="/expense/".concat(null===Oe||void 0===Oe?void 0:Oe.id,"/").concat(null===tt||void 0===tt||null===(t=tt.invoiceData)||void 0===t?void 0:t.docType,"/").concat(n),c=e.target.files[0];Xe(Object(a.a)(Object(a.a)({},Qe),{},{dateString:n,expenseStoragePath:i,expenseFile:c}))}}(e)}})]}),Object(G.jsx)(u.a,{item:!0,xs:12,md:12,children:Object(G.jsx)(j.a,{onClick:function(){return function(){return ut.apply(this,arguments)}()},variant:"contained",color:"primary",disabled:!(null!==Qe&&void 0!==Qe&&Qe.expenseAmt)||!(null!==Qe&&void 0!==Qe&&Qe.expenseDesc)||!(null!==te&&void 0!==te&&null!==(R=te.permissions)&&void 0!==R&&R.addExpense),children:"add expense"})})]}),Object(G.jsx)("br",{}),Object(G.jsx)("br",{}),Object(G.jsx)(x.a,{children:Object(G.jsxs)(O.a,{border:1,children:[Object(G.jsx)(m.a,{children:Object(G.jsxs)(f.a,{children:[Object(G.jsx)(g.a,{size:"small",style:{whiteSpace:"nowrap"},children:"Date"}),Object(G.jsx)(g.a,{size:"small",style:{whiteSpace:"nowrap"},children:"Amount"}),Object(G.jsx)(g.a,{size:"small",style:{whiteSpace:"nowrap"},children:"Description"}),Object(G.jsx)(g.a,{size:"small",style:{whiteSpace:"nowrap"},children:"View uploaded image"}),Object(G.jsx)(g.a,{size:"small",style:{whiteSpace:"nowrap"},children:"Delete"})]})}),Object(G.jsx)(w.a,{children:(null===tt||void 0===tt||null===(H=tt.invoiceData)||void 0===H?void 0:H.invoiceExpensetData)&&(null===tt||void 0===tt||null===(V=tt.invoiceData)||void 0===V||null===(X=V.invoiceExpensetData)||void 0===X?void 0:X.length)>0&&(null===tt||void 0===tt||null===($=tt.invoiceData)||void 0===$||null===(ee=$.invoiceExpensetData)||void 0===ee?void 0:ee.map((function(e,t){var n,a,i;return Object(G.jsxs)(f.a,{children:[Object(G.jsx)(g.a,{size:"small",style:{whiteSpace:"nowrap"},children:(null===e||void 0===e?void 0:e.dateString)||e.timestamp&&T()(e.timestamp.toDate()).format("DD-MM-YYYY, HH:MM:ss")||""}),Object(G.jsx)(g.a,{size:"small",style:{whiteSpace:"nowrap"},children:Object(G.jsx)(J.a,{value:Math.round(Number((null===e||void 0===e?void 0:e.expenseAmt)||0)),displayType:"text",thousandSeparator:!0})}),Object(G.jsx)(g.a,{size:"small",style:{whiteSpace:"nowrap"},children:(null===e||void 0===e?void 0:e.expenseDesc)||""}),Object(G.jsx)(g.a,{size:"small",style:{whiteSpace:"nowrap"},children:null!==e&&void 0!==e&&e.expenseUrl&&""!==(null===e||void 0===e?void 0:e.expenseUrl)?Object(G.jsx)(j.a,{variant:"contained",color:"primary",href:"".concat(null===e||void 0===e?void 0:e.expenseUrl),target:"_blank",children:"open"}):Object(G.jsx)(p.a,{children:"No url found"})}),Object(G.jsx)(g.a,{size:"small",style:{whiteSpace:"nowrap"},children:Object(G.jsx)(y.a,{color:"error",onClick:function(){!function(e,t){vt.apply(this,arguments)}(e,t)},disabled:!(null!==te&&void 0!==te&&null!==(n=te.permissions)&&void 0!==n&&null!==(a=n.deleteExpense)&&void 0!==a&&null!==(i=a.assignedCompanyId)&&void 0!==i&&i.includes(null===Oe||void 0===Oe?void 0:Oe.id)),children:Object(G.jsx)(B.a,{})})})]},t)})))})]})})]}),Object(G.jsx)(E.a,{children:Object(G.jsx)(j.a,{onClick:function(){Le(!1),Ze(!1),nt(null)},variant:"contained",color:"error",children:"Close"})})]})}):Object(G.jsx)(G.Fragment,{})]})}}}]);
//# sourceMappingURL=86.3bdfd0fa.chunk.js.map