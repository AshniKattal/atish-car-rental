{"version":3,"sources":["pages/car-rental-atish/car-rental/vehicle-detail/ProductNewForm.js","pages/car-rental-atish/car-rental/vehicle-detail/CreateUpdateVehicleDialog.js"],"names":["TRANMISSION_OPTION","LabelStyle","styled","Typography","theme","typography","subtitle2","color","palette","text","secondary","marginBottom","spacing","ProductNewForm","isEdit","currentProduct","addVehicle","updateVehicle","handleCloseDialog","setImagesListChanged","NewProductSchema","Yup","shape","name","required","featuredImage","min","description","plateNumber","price","moreThan","passengers","doors","defaultValues","useMemo","serviceCategory","luggage","transmission","airConditioning","methods","useForm","resolver","yupResolver","reset","watch","setValue","getValues","values","handleSubmit","useEffect","submitForm","a","handleDrop","useCallback","acceptedFiles","acceptedFilesList","map","file","Object","assign","preview","URL","createObjectURL","newFilesList","Grid","container","item","xs","md","label","Autocomplete","ListboxProps","style","maxHeight","size","id","options","serviceName","value","renderInput","params","TextField","fullWidth","onChange","e","getOptionLabel","option","multiple","simple","showPreview","accept","maxSize","onDrop","onRemove","filteredItems","filter","_file","onRemoveAll","placeholder","event","target","InputLabelProps","shrink","InputProps","startAdornment","InputAdornment","position","process","type","reason","Button","variant","onClick","CreateUpdateVehicleDialog","dialogType","openDialog","vehicleDetails","initialiseVehicles","setVehicleDetails","enqueueSnackbar","useSnackbar","dispatch","useDispatch","useState","imagesListChanged","setLoading","length","checkForImagesUpdates","uploadedImages","db","collection","add","dateTimeCreated","firebase","firestore","Timestamp","fromDate","Date","then","catch","error","message","doc","set","merge","Promise","resolve","uploadedImagesFiles","promises","storageImageRef","firebaseApp","storage","ref","forEach","imageFile","index","push","resolveImage","fileImageRef","child","put","getDownloadURL","downloadURL","imageObject","url","all","allImagesDownloadUrls","imagesList","image","Dialog","open","onClose","maxWidth","DialogTitle","DialogContent","paddingTop"],"mappings":"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","file":"static/js/80.95b79a0e.chunk.js","sourcesContent":["import PropTypes from \"prop-types\";\nimport * as Yup from \"yup\";\n\nimport { useCallback, useEffect, useMemo } from \"react\";\n// form\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\n// @mui\nimport { styled } from \"@mui/material/styles\";\nimport { LoadingButton } from \"@mui/lab\";\nimport {\n  Card,\n  Chip,\n  Grid,\n  Stack,\n  TextField,\n  Typography,\n  Autocomplete,\n  InputAdornment,\n  Button,\n} from \"@mui/material\";\n// components\nimport {\n  FormProvider,\n  RHFSwitch,\n  RHFSelect,\n  RHFEditor,\n  RHFTextField,\n  RHFRadioGroup,\n  RHFUploadMultiFile,\n} from \"../../../../components/hook-form\";\n\n// ----------------------------------------------------------------------\n\nconst TRANMISSION_OPTION = [\"Automatic\", \"Manual\"];\n\nconst LabelStyle = styled(Typography)(({ theme }) => ({\n  ...theme.typography.subtitle2,\n  color: theme.palette.text.secondary,\n  marginBottom: theme.spacing(1),\n}));\n\n// ----------------------------------------------------------------------\n\nProductNewForm.propTypes = {\n  isEdit: PropTypes.bool,\n  currentProduct: PropTypes.object,\n};\n\nexport default function ProductNewForm({\n  isEdit,\n  currentProduct,\n  addVehicle,\n  updateVehicle,\n  handleCloseDialog,\n  setImagesListChanged,\n}) {\n  const serviceCategoryList = [\n    {\n      id: \"category01\",\n      serviceName: \"Small Compact\",\n    },\n    {\n      id: \"category02\",\n      serviceName: \"Saloon\",\n    },\n    {\n      id: \"category03\",\n      serviceName: \"4x4\",\n    },\n    {\n      id: \"category04\",\n      serviceName: \"7 Seater\",\n    },\n    {\n      id: \"category05\",\n      serviceName: \"SUV\",\n    },\n  ];\n\n  const NewProductSchema = Yup.object().shape({\n    name: Yup.string().required(\"Name is required\"),\n    featuredImage: Yup.array().min(\n      1,\n      \"Featured images is required, at least one image\"\n    ),\n    description: Yup.string().required(\"Description is required\"),\n    plateNumber: Yup.string().required(\"Plate number is required\"),\n    price: Yup.number().moreThan(0, \"Price should not be 0\"),\n    passengers: Yup.number().moreThan(0, \"Passengers should not be 0\"),\n    doors: Yup.number().moreThan(0, \"Doors should not be 0\"),\n    // transmission: Yup.string().required(\"Transmission is required\"),\n  });\n\n  const defaultValues = useMemo(\n    () => ({\n      featuredImage: currentProduct?.featuredImage || [],\n      name: currentProduct?.name || \"\",\n      description: currentProduct?.description || \"\",\n      serviceCategory: currentProduct?.serviceCategory || [],\n      plateNumber: currentProduct?.plateNumber || \"\",\n      price: currentProduct?.price || 0,\n      passengers: currentProduct?.passengers || 0,\n      luggage: currentProduct?.luggage || false,\n      doors: currentProduct?.doors || 0,\n      transmission: currentProduct?.transmission || null,\n      airConditioning: currentProduct?.airConditioning || false,\n    }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [currentProduct]\n  );\n\n  const methods = useForm({\n    resolver: yupResolver(NewProductSchema),\n    defaultValues,\n  });\n\n  const { reset, watch, setValue, getValues, handleSubmit } = methods;\n\n  const values = watch();\n\n  useEffect(() => {\n    if (isEdit && currentProduct) {\n      reset(defaultValues);\n    }\n    if (!isEdit) {\n      reset(defaultValues);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isEdit, currentProduct]);\n\n  const submitForm = async () => {\n    if (isEdit) {\n      updateVehicle(values);\n    } else {\n      addVehicle(values);\n    }\n  };\n\n  const handleDrop = useCallback(\n    (acceptedFiles) => {\n      setImagesListChanged(true);\n\n      let acceptedFilesList = acceptedFiles.map((file) =>\n        Object.assign(file, {\n          preview: URL.createObjectURL(file),\n        })\n      );\n\n      let newFilesList = [\n        ...(values.featuredImage || []),\n        ...acceptedFilesList,\n      ];\n\n      setValue(\n        \"featuredImage\",\n        newFilesList\n        /* newFilesList.map((file) =>\n          Object.assign(file, {\n            preview: URL.createObjectURL(file),\n          })\n        ) */\n      );\n    },\n    [setValue]\n  );\n\n  const handleRemoveAll = () => {\n    setImagesListChanged(true);\n    setValue(\"featuredImage\", []);\n  };\n\n  const handleRemove = (file) => {\n    setImagesListChanged(true);\n    const filteredItems = values.featuredImage?.filter(\n      (_file) => _file?.preview !== file?.preview\n    );\n    setValue(\"featuredImage\", filteredItems);\n  };\n\n  return (\n    <FormProvider methods={methods}>\n      <Grid container spacing={3}>\n        <Grid item xs={12} md={12}>\n          <RHFTextField name=\"name\" label=\"Vehicle Name\" />\n        </Grid>\n\n        <Grid item xs={12} md={12}>\n          <Autocomplete\n            ListboxProps={{ style: { maxHeight: \"70vh\" } }}\n            size=\"small\"\n            label=\"Please choose a category\"\n            id=\"category-drop-down\"\n            options={serviceCategoryList}\n            value={values?.serviceCategory || []}\n            renderInput={(params) => (\n              <TextField\n                {...params}\n                label=\"Please choose a category\"\n                fullWidth\n                size=\"large\"\n              />\n            )}\n            onChange={(e, value) => {\n              setValue(\"serviceCategory\", value);\n            }}\n            getOptionLabel={(option) => option.serviceName}\n            multiple={true}\n          />\n        </Grid>\n\n        <Grid item xs={12} md={12}>\n          <RHFTextField name=\"plateNumber\" label=\"Plate number\" />\n        </Grid>\n\n        <Grid item xs={12} md={12}>\n          <div>\n            <LabelStyle>Description</LabelStyle>\n            <RHFEditor simple name=\"description\" />\n          </div>\n        </Grid>\n\n        <Grid item xs={12} md={12}>\n          <div>\n            <LabelStyle>Featured images</LabelStyle>\n            <RHFUploadMultiFile\n              name=\"featuredImage\"\n              showPreview\n              accept=\"image/*\"\n              maxSize={3145728}\n              onDrop={handleDrop}\n              onRemove={handleRemove}\n              onRemoveAll={handleRemoveAll}\n            />\n          </div>\n        </Grid>\n\n        <Grid item xs={12} md={6}>\n          <RHFTextField\n            name=\"price\"\n            label=\"Regular Price\"\n            placeholder=\"0.00\"\n            value={getValues(\"price\") === 0 ? \"\" : getValues(\"price\")}\n            onChange={(event) => setValue(\"price\", event.target.value)}\n            InputLabelProps={{ shrink: true }}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  {process.env.REACT_APP_CURRENCY_USED}\n                </InputAdornment>\n              ),\n              type: \"text\",\n            }}\n          />\n        </Grid>\n\n        {/*    <Grid item xs={12} md={6}>\n          <RHFSwitch name=\"taxes\" label=\"Price includes taxes\" />\n        </Grid> */}\n\n        <Grid item xs={12} md={6}>\n          <RHFTextField name=\"passengers\" label=\"Number of passenger seats\" />\n        </Grid>\n\n        <Grid item xs={12} md={6}>\n          <RHFSwitch name=\"luggage\" label=\"Luggage\" />\n        </Grid>\n\n        <Grid item xs={12} md={6}>\n          <RHFTextField name=\"doors\" label=\"Number of doors\" />\n        </Grid>\n\n        {/*   <Grid item xs={12} md={6}>\n          <RHFSelect\n            name=\"transmission\"\n            label=\"Transmission\"\n            value={values?.transmission || \"\"}\n          >\n            {TRANMISSION_OPTION.map((category, index) => (\n              <option key={index} value={category}>\n                {category}\n              </option>\n            ))}\n          </RHFSelect>\n        </Grid>\n */}\n        <Grid item xs={12} md={6}>\n          <Autocomplete\n            ListboxProps={{ style: { maxHeight: \"70vh\" } }}\n            size=\"small\"\n            label=\"Transmission\"\n            id=\"transmission-drop-down\"\n            options={TRANMISSION_OPTION}\n            value={values?.transmission || null}\n            renderInput={(params) => (\n              <TextField\n                {...params}\n                label=\"Transmission\"\n                fullWidth\n                size=\"large\"\n              />\n            )}\n            onChange={(e, value, reason) => {\n              if (reason !== \"removeOption\" && reason !== \"clear\" && value) {\n                setValue(\"transmission\", value);\n              } else if (reason === \"removeOption\" || reason === \"clear\") {\n                setValue(\"transmission\", null);\n              }\n            }}\n            getOptionLabel={(option) => option}\n          />\n        </Grid>\n\n        <Grid item xs={12} md={6}>\n          <RHFSwitch name=\"airConditioning\" label=\"Air conditioning\" />\n        </Grid>\n\n        <Grid item xs={12} md={12}>\n          <Grid container spacing={3}>\n            <Grid item xs={12} md={6}>\n              <Button\n                variant=\"contained\"\n                color=\"success\"\n                onClick={() => submitForm()}\n                size=\"large\"\n                fullWidth\n              >\n                {!isEdit ? \"Create Product\" : \"Save Changes\"}\n              </Button>\n            </Grid>\n\n            <Grid item xs={12} md={6}>\n              <Button\n                variant=\"outlined\"\n                color=\"error\"\n                onClick={() => handleCloseDialog()}\n                size=\"large\"\n                fullWidth\n              >\n                Close\n              </Button>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n    </FormProvider>\n  );\n}\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n} from \"@mui/material\";\nimport { useSnackbar } from \"notistack\";\nimport { useDispatch } from \"react-redux\";\nimport { setLoading } from \"../../../../features/globalSlice\";\nimport db, { firebaseApp } from \"../../../../firebase\";\nimport ProductNewForm from \"./ProductNewForm\";\nimport firebase from \"firebase/compat\";\nimport { useState } from \"react\";\n\nexport default function CreateUpdateVehicleDialog({\n  dialogType,\n  openDialog,\n  handleCloseDialog,\n  vehicleDetails,\n  setVehicleDetails,\n  initialiseVehicles,\n}) {\n  const { enqueueSnackbar } = useSnackbar();\n  const dispatch = useDispatch();\n\n  const [imagesListChanged, setImagesListChanged] = useState(false);\n\n  const addVehicle = async (values) => {\n    dispatch(setLoading(true));\n\n    if (\n      !values?.name ||\n      // !values?.plateNumber ||\n      !values?.price ||\n      !values?.passengers ||\n      !values?.doors ||\n      !values?.transmission ||\n      // !values?.airConditioning ||\n      values?.featuredImage?.length === 0\n    ) {\n      enqueueSnackbar(\"Please fill in all the inputs\", { variant: \"error\" });\n      dispatch(setLoading(false));\n    } else {\n      let uploadedImages = await checkForImagesUpdates(values);\n\n      if (uploadedImages) {\n        await db\n          .collection(process.env.REACT_APP_COLLECTION_VEHICLES)\n          .add({\n            // ...values,\n            name: values?.name || \"\",\n            plateNumber: values?.plateNumber || \"\",\n            price: values?.price || \"\",\n            passengers: values?.passengers || \"\",\n            doors: values?.doors || \"\",\n            transmission: values?.transmission || null,\n            airConditioning: values?.airConditioning || \"\",\n            featuredImage: uploadedImages || [],\n            serviceCategory: values?.serviceCategory || null,\n            dateTimeCreated: firebase.firestore.Timestamp.fromDate(new Date()),\n          })\n          .then(async () => {\n            enqueueSnackbar(\"Vehicle created successfully\", {\n              variant: \"success\",\n            });\n            initialiseVehicles();\n            dispatch(setLoading(false));\n            handleCloseDialog();\n          })\n          .catch((error) => {\n            enqueueSnackbar(\n              `Error occured while creating Vehicle. Error: ${error?.message}`,\n              { variant: \"error\" }\n            );\n            dispatch(setLoading(false));\n          });\n      }\n    }\n  };\n\n  const updateVehicle = async (values) => {\n    dispatch(setLoading(true));\n    if (\n      !values?.name ||\n      // !values?.plateNumber ||\n      !values?.price ||\n      !values?.passengers ||\n      !values?.doors ||\n      !values?.transmission ||\n      // !values?.airConditioning ||\n      values?.featuredImage?.length === 0\n    ) {\n      enqueueSnackbar(\"Please fill in all the inputs\", { variant: \"error\" });\n      dispatch(setLoading(false));\n    } else {\n      let uploadedImages = await checkForImagesUpdates(values);\n\n      if (uploadedImages) {\n        await db\n          .collection(process.env.REACT_APP_COLLECTION_VEHICLES)\n          .doc(vehicleDetails?.id)\n          .set(\n            {\n              // ...values,\n              name: values?.name || \"\",\n              plateNumber: values?.plateNumber || \"\",\n              price: values?.price || \"\",\n              passengers: values?.passengers || \"\",\n              doors: values?.doors || \"\",\n              transmission: values?.transmission || \"\",\n              airConditioning: values?.airConditioning || \"\",\n              featuredImage: uploadedImages || [],\n              serviceCategory: values?.serviceCategory || null,\n            },\n            { merge: true }\n          )\n          .then(async () => {\n            enqueueSnackbar(\"Vehicle updated successfully\");\n            initialiseVehicles();\n            dispatch(setLoading(false));\n            handleCloseDialog();\n          })\n          .catch((error) => {\n            enqueueSnackbar(\n              `Error occured while creating Vehicle. Error: ${error?.message}`,\n              { variant: \"error\" }\n            );\n            dispatch(setLoading(false));\n          });\n      } else {\n        await db\n          .collection(process.env.REACT_APP_COLLECTION_VEHICLES)\n          .doc(vehicleDetails?.id)\n          .set(\n            {\n              name: values?.name || \"\",\n              plateNumber: values?.plateNumber || \"\",\n              price: values?.price || \"\",\n              passengers: values?.passengers || \"\",\n              doors: values?.doors || \"\",\n              transmission: values?.transmission || \"\",\n              airConditioning: values?.airConditioning || \"\",\n              serviceCategory: values?.serviceCategory || null,\n            },\n            { merge: true }\n          )\n          .then(async () => {\n            enqueueSnackbar(\"Vehicle updated successfully\");\n            initialiseVehicles();\n            dispatch(setLoading(false));\n            handleCloseDialog();\n          })\n          .catch((error) => {\n            enqueueSnackbar(\n              `Error occured while creating Vehicle. Error: ${error?.message}`,\n              { variant: \"error\" }\n            );\n            dispatch(setLoading(false));\n          });\n      }\n    }\n  };\n\n  async function checkForImagesUpdates(values) {\n    return await new Promise(async (resolve) => {\n      if (imagesListChanged) {\n        //upload images if present\n        const uploadedImagesFiles = values?.featuredImage;\n\n        let storageRef = `car-rental-vehicles-images`;\n\n        const promises = [];\n\n        let storageImageRef = firebaseApp\n          .storage()\n          .ref(`${storageRef}/${values?.name}/`);\n\n        uploadedImagesFiles.forEach((imageFile, index) => {\n          promises.push(\n            new Promise(async (resolveImage) => {\n              // upload other images in storage\n              let fileImageRef = storageImageRef.child(`image${index + 1}`);\n              await fileImageRef\n                .put(imageFile)\n                .then(() => {\n                  // get other images download url\n                  fileImageRef\n                    .getDownloadURL()\n                    .then((downloadURL) => {\n                      resolveImage({\n                        error: false,\n                        imageObject: {\n                          name: `image${index + 1}`,\n                          url: downloadURL,\n                        },\n                      });\n                    })\n                    .catch((error) => {\n                      resolveImage({\n                        error: true,\n                        message: `Error occured while retrieving the download url: ${error?.message}`,\n                      });\n                    });\n                })\n                .catch((error) => {\n                  resolveImage({\n                    error: true,\n                    message: `Error occured while uploading the file in the storage folder: ${error?.message}`,\n                  });\n                });\n            })\n          );\n        });\n\n        Promise.all(promises).then(async (allImagesDownloadUrls) => {\n          let imagesList = [];\n          if (allImagesDownloadUrls && allImagesDownloadUrls?.length > 0) {\n            allImagesDownloadUrls.forEach((image) => {\n              if (!image?.error) {\n                imagesList.push({\n                  downloadURL: image?.imageObject?.url,\n                  preview: image?.imageObject?.url,\n                  name: image?.imageObject?.name,\n                });\n              }\n            });\n\n            resolve(imagesList);\n          }\n        });\n      } else {\n        resolve(null);\n      }\n    });\n  }\n\n  return (\n    <>\n      <Dialog\n        open={openDialog}\n        onClose={handleCloseDialog}\n        fullWidth\n        maxWidth={\"md\"}\n      >\n        <DialogTitle id=\"alert-dialog-title\">\n          {dialogType && dialogType === \"add\"\n            ? \"Create vehicle\"\n            : \"Update vehicle\"}\n        </DialogTitle>\n        <DialogContent style={{ paddingTop: \"1em\" }}>\n          <ProductNewForm\n            isEdit={dialogType === \"add\" ? false : true}\n            currentProduct={vehicleDetails}\n            addVehicle={addVehicle}\n            updateVehicle={updateVehicle}\n            handleCloseDialog={handleCloseDialog}\n            setImagesListChanged={setImagesListChanged}\n          />\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n"],"sourceRoot":""}