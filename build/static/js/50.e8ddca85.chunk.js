(this["webpackJsonp@minimal/minimal-kit-react"]=this["webpackJsonp@minimal/minimal-kit-react"]||[]).push([[50],{1535:function(e,l,o){"use strict";var t=o(23);Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=t(o(119)),d=o(0);l.default=(0,i.default)((0,d.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},1565:function(e,l,o){"use strict";var t=o(23);Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var i=t(o(119)),d=o(0);l.default=(0,i.default)((0,d.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},1885:function(e,l,o){"use strict";o.r(l),o.d(l,"default",(function(){return J}));var t=o(9),i=o(7),d=o(18),n=o(3),a=o.n(n),c=o(705),r=o(1402),s=o(1410),u=o(1418),v=o(1473),j=o(1497),b=o(147),x=o(1536),h=o(1537),m=o(1541),y=o(1539),O=o(1540),p=o(1538),T=o(1505),f=o(1419),g=o(130),w=o(1565),C=o.n(w),N=o(4),S=o(52),V=o(77),B=o(472),P=o(48),D=o(156),k=o(68),E=o.n(k),L=o(120),A=o(46),z=o(479),F=o(2),I=o(1535),R=o.n(I),M=o(72),U=o(1584),W=o(50),Y=o.n(W),H=o(15),Q=o(328),_=o(0);function G(e){var l,o,t,i,d,n,a,c,r,s,u,v,j,b,x,h,m,y,O,p=e.companyChosenObj,T=e.clientChosenObj,f=e.invDetails,g=e.logo,w=e.sigImage;return Object(_.jsx)(F.Document,{children:Object(_.jsxs)(F.Page,{size:"A4",style:H.a.page,children:[null!==f&&void 0!==f&&f.docType&&("invoice"===(null===f||void 0===f?void 0:f.docType)||"vat_invoice"===(null===f||void 0===f?void 0:f.docType))&&null!==f&&void 0!==f&&f.paymentStatus&&"Paid"===(null===f||void 0===f?void 0:f.paymentStatus)?Object(_.jsx)(F.Image,{source:Q.a,style:H.a.background}):Object(_.jsx)(F.View,{}),Object(_.jsxs)(F.View,{children:[Object(_.jsxs)(F.View,{style:[H.a.gridContainer,H.a.gridContainerMainTitle,H.a.mb15],children:[Object(_.jsx)(F.View,{style:H.a.col6,children:Object(_.jsx)(F.Text,{style:H.a.h3,children:Object(_.jsx)("b",{children:(null===p||void 0===p||null===(l=p.data)||void 0===l?void 0:l.name)||""})})}),Object(_.jsx)(F.View,{style:[H.a.col6,H.a.alignRight],children:Object(_.jsx)(F.Text,{style:H.a.h3,align:"right",children:Object(_.jsx)("b",{children:null!==f&&void 0!==f&&f.docTitle&&""!==(null===f||void 0===f?void 0:f.docTitle)?null===f||void 0===f?void 0:f.docTitle.toUpperCase():""})})})]}),Object(_.jsxs)(F.View,{style:[H.a.gridContainer,H.a.mb15],children:[void 0!==g&&null!==g&&""!==g&&Object(_.jsx)(F.View,{style:[H.a.col6,H.a.imageContainer],children:Object(_.jsx)(F.Image,{source:g,style:{width:"125px",height:"50px"}})}),Object(_.jsxs)(F.View,{style:[H.a.col6],children:[Object(_.jsxs)(F.Text,{style:H.a.body3,children:["Tel: ",(null===p||void 0===p||null===(o=p.data)||void 0===o?void 0:o.contactNumber)||""]}),Object(_.jsxs)(F.Text,{style:H.a.body3,children:["Mob: ",null!==p&&void 0!==p&&null!==(t=p.data)&&void 0!==t&&t.mobileNumber?"".concat(null===p||void 0===p||null===(i=p.data)||void 0===i?void 0:i.mobileNumber):""]}),Object(_.jsxs)(F.Text,{style:H.a.body3,children:["Email: ",null!==p&&void 0!==p&&null!==(d=p.data)&&void 0!==d&&d.email?"".concat(null===p||void 0===p||null===(n=p.data)||void 0===n?void 0:n.email):""]})]})]}),Object(_.jsxs)(F.View,{style:[H.a.gridContainer,H.a.mb15],children:[Object(_.jsxs)(F.View,{style:H.a.col6,children:[Object(_.jsx)(F.Text,{style:H.a.h6,children:"Bill To: "}),f.docBillTo&&Object(_.jsx)(F.Text,{style:H.a.body3,children:(null===f||void 0===f?void 0:f.docBillTo)||""}),!f.docBillTo&&Object(_.jsx)(F.Text,{style:H.a.body3,children:"".concat((null===T||void 0===T||null===(a=T.data)||void 0===a?void 0:a.address)||"")}),!f.docBillTo&&Object(_.jsx)(F.Text,{style:H.a.body3,children:"Vat no: Vat".concat((null===T||void 0===T||null===(c=T.data)||void 0===c?void 0:c.tan)||"")}),!f.docBillTo&&Object(_.jsx)(F.Text,{style:H.a.body3,children:"BRN: ".concat((null===T||void 0===T||null===(r=T.data)||void 0===r?void 0:r.brn)||"")})]}),Object(_.jsxs)(F.View,{style:H.a.col6,children:[Object(_.jsx)(F.Text,{style:H.a.h6,children:"From: "}),Object(_.jsx)(F.Text,{style:H.a.body3Bold,children:(null===p||void 0===p||null===(s=p.data)||void 0===s?void 0:s.name)||""}),Object(_.jsx)(F.Text,{style:H.a.body3,children:(null===p||void 0===p||null===(u=p.data)||void 0===u?void 0:u.address)||""}),!(null!==p&&void 0!==p&&null!==(v=p.data)&&void 0!==v&&v.tan)&&Object(_.jsx)(F.Text,{style:H.a.body3,children:"Vat no: Vat".concat((null===p||void 0===p||null===(j=p.data)||void 0===j?void 0:j.tan)||"")}),!(null!==p&&void 0!==p&&null!==(b=p.data)&&void 0!==b&&b.brn)&&Object(_.jsx)(F.Text,{style:H.a.body3,children:"BRN: ".concat((null===p||void 0===p||null===(x=p.data)||void 0===x?void 0:x.brn)||"")})]})]}),Object(_.jsxs)(F.View,{style:[H.a.gridContainer,H.a.mb15],children:[Object(_.jsx)(F.View,{style:H.a.col4,children:Object(_.jsxs)(F.Text,{style:H.a.body3,children:[Object(_.jsx)("span",{style:H.a.body3Bold,children:"Date: "})," ".concat(void 0!==(null===f||void 0===f?void 0:f.invDate)&&null!==(null===f||void 0===f?void 0:f.invDate)&&(null===f||void 0===f?void 0:f.invDate)||"")]})}),Object(_.jsx)(F.View,{style:H.a.col8}),Object(_.jsxs)(F.View,{style:H.a.col4,children:[Object(_.jsxs)(F.Text,{style:H.a.body3,children:[Object(_.jsx)("span",{style:H.a.body3Bold,children:"INV NUM: "})," ".concat(void 0!==(null===f||void 0===f?void 0:f.invoiceString)&&null!==(null===f||void 0===f?void 0:f.invoiceString)?null===f||void 0===f?void 0:f.invoiceString:"")]}),f&&f.docQuoteNumber?Object(_.jsxs)(F.Text,{style:H.a.body3,children:[Object(_.jsx)("span",{style:H.a.body3Bold,children:"Quotation #: "})," ".concat((null===f||void 0===f?void 0:f.docQuoteNumber)||"")]}):Object(_.jsx)(F.View,{}),f&&f.docQuoteNumber?Object(_.jsxs)(F.Text,{style:H.a.body3,children:[Object(_.jsx)("span",{style:H.a.body3Bold,children:"P.O. #: "})," ".concat((null===f||void 0===f?void 0:f.docPurchaseOrderNumber)||"")]}):Object(_.jsx)(F.View,{})]})]}),Object(_.jsxs)(F.View,{style:[H.a.gridContainer,H.a.mb15],children:[Object(_.jsxs)(F.View,{style:H.a.col20,children:[Object(_.jsx)(F.Text,{style:H.a.body3Bold,children:"BL Number"}),Object(_.jsx)(F.Text,{style:H.a.body3Bold,children:"Supplier"}),Object(_.jsx)(F.Text,{style:H.a.body3Bold,children:"Container Number"}),Object(_.jsx)(F.Text,{style:H.a.body3Bold,children:"Packages"}),Object(_.jsx)(F.Text,{style:H.a.body3Bold,children:"Description"}),Object(_.jsx)(F.Text,{style:H.a.body3Bold,children:"Gross Weight"}),Object(_.jsx)(F.Text,{style:H.a.body3Bold,children:"Volume"}),Object(_.jsx)(F.Text,{style:H.a.body3Bold,children:"Port Of Loading"})]}),Object(_.jsxs)(F.View,{style:H.a.col30,children:[Object(_.jsx)(F.Text,{style:H.a.body3,children:(null===f||void 0===f?void 0:f.docBLNumber)||""}),Object(_.jsx)(F.Text,{style:H.a.body3,children:(null===f||void 0===f?void 0:f.docSupplier)||""}),Object(_.jsx)(F.Text,{style:H.a.body3,children:(null===f||void 0===f?void 0:f.docContainerNumber)||""}),Object(_.jsx)(F.Text,{style:H.a.body3,children:(null===f||void 0===f?void 0:f.docPackages)||""}),Object(_.jsx)(F.Text,{style:H.a.body3,children:(null===f||void 0===f?void 0:f.docDescription)||""}),Object(_.jsx)(F.Text,{style:H.a.body3,children:(null===f||void 0===f?void 0:f.docGrossWeight)||""}),Object(_.jsx)(F.Text,{style:H.a.body3,children:(null===f||void 0===f?void 0:f.docVolume)||""}),Object(_.jsx)(F.Text,{style:H.a.body3,children:(null===f||void 0===f?void 0:f.docPortOfLoading)||""})]}),Object(_.jsxs)(F.View,{style:H.a.col20,children:[Object(_.jsx)(F.Text,{style:H.a.body3Bold,children:"ETA"}),Object(_.jsx)(F.Text,{style:H.a.body3Bold,children:"Vessel Name"}),Object(_.jsx)(F.Text,{style:H.a.body3Bold,children:"RoE"}),Object(_.jsx)(F.Text,{style:H.a.body3Bold,children:"Place Of Landing"})]}),Object(_.jsxs)(F.View,{style:H.a.col30,children:[Object(_.jsx)(F.Text,{style:H.a.body3,children:(null===f||void 0===f?void 0:f.docETA)||""}),Object(_.jsx)(F.Text,{style:H.a.body3,children:(null===f||void 0===f?void 0:f.docVesselName)||""}),Object(_.jsx)(F.Text,{style:H.a.body3,children:(null===f||void 0===f?void 0:f.docRoE)||""}),Object(_.jsx)(F.Text,{style:H.a.body3,children:(null===f||void 0===f?void 0:f.docPlaceOfLanding)||""})]})]}),Object(_.jsx)(F.View,{children:Object(_.jsxs)(F.View,{style:[H.a.tableAutoWidth,H.a.middleTableHeight],children:[Object(_.jsxs)(F.View,{style:[H.a.rowNewTable,H.a.boldNewTable,H.a.headerNewTable],children:[Object(_.jsx)(F.Text,{style:H.a.headerColumn,children:"DETAILS"}),Object(_.jsx)(F.Text,{style:H.a.headerColumn,children:"CHARGEABLE"}),Object(_.jsx)(F.Text,{style:H.a.headerColumn,children:"CURRENCY"}),Object(_.jsx)(F.Text,{style:H.a.headerColumn,children:"UNIT"}),Object(_.jsx)(F.Text,{style:H.a.headerColumn,children:"AMOUNT MUR"}),Object(_.jsx)(F.Text,{style:H.a.headerColumn,children:"VAT"}),Object(_.jsx)(F.Text,{style:H.a.headerColumn,children:"TOTAL MUR"})]}),(null===f||void 0===f?void 0:f.invParticulars)&&(null===f||void 0===f||null===(h=f.invParticulars)||void 0===h?void 0:h.length)>0&&(null===f||void 0===f?void 0:f.invParticulars.map((function(e,l){return Object(_.jsxs)(F.View,{style:H.a.rowNewTable,wrap:!0,children:[Object(_.jsx)(F.Text,{style:H.a.column,children:(null===e||void 0===e?void 0:e.rowDescription)||""}),Object(_.jsx)(F.Text,{style:H.a.column,children:Object(_.jsx)(Y.a,{value:Number((null===e||void 0===e?void 0:e.rowUnitPrice)||0).toFixed(2),displayType:"text",thousandSeparator:!0})}),Object(_.jsx)(F.Text,{style:H.a.column,children:"MUR"}),Object(_.jsx)(F.Text,{style:H.a.column,children:(null===e||void 0===e?void 0:e.rowQty)||""}),Object(_.jsx)(F.Text,{style:H.a.column,children:Object(_.jsx)(Y.a,{value:Number((null===e||void 0===e?void 0:e.rowAmount)||0).toFixed(2),displayType:"text",thousandSeparator:!0})}),Object(_.jsx)(F.Text,{style:H.a.column,children:Object(_.jsx)(Y.a,{value:Number((null===e||void 0===e?void 0:e.rowVatAmount)||0).toFixed(2),displayType:"text",thousandSeparator:!0})}),Object(_.jsx)(F.Text,{style:H.a.column,children:Object(_.jsx)(Y.a,{value:Number((null===e||void 0===e?void 0:e.rowTotalAmount)||0).toFixed(2),displayType:"text",thousandSeparator:!0})})]},l)}))),Object(_.jsxs)(F.View,{style:H.a.summaryRow,wrap:!0,children:[Object(_.jsx)(F.Text,{style:H.a.summaryColumnNoBorder}),Object(_.jsx)(F.Text,{style:H.a.summaryColumnNoBorder}),Object(_.jsx)(F.Text,{style:H.a.summaryColumnNoBorder}),Object(_.jsx)(F.Text,{style:H.a.summaryColumnNoBorder}),Object(_.jsx)(F.Text,{style:H.a.summaryColumnNoBorder}),Object(_.jsx)(F.Text,{style:H.a.summaryColumnRightBorder,children:"Subtotal"}),Object(_.jsx)(F.Text,{style:H.a.summaryColumn,children:Object(_.jsx)(Y.a,{value:Number((null===f||void 0===f?void 0:f.invSubTotal)||0).toFixed(2),displayType:"text",thousandSeparator:!0})})]}),Object(_.jsxs)(F.View,{style:H.a.summaryRow,wrap:!0,children:[Object(_.jsx)(F.Text,{style:H.a.summaryColumnNoBorder}),Object(_.jsx)(F.Text,{style:H.a.summaryColumnNoBorder}),Object(_.jsx)(F.Text,{style:H.a.summaryColumnNoBorder}),Object(_.jsx)(F.Text,{style:H.a.summaryColumnNoBorder}),Object(_.jsx)(F.Text,{style:H.a.summaryColumnNoBorder}),Object(_.jsx)(F.Text,{style:H.a.summaryColumnRightBorder,children:"Total VAT"}),Object(_.jsx)(F.Text,{style:H.a.summaryColumn,children:Object(_.jsx)(Y.a,{value:Number((null===f||void 0===f?void 0:f.invVatFee)||0).toFixed(2),displayType:"text",thousandSeparator:!0})})]}),Object(_.jsxs)(F.View,{style:H.a.summaryRow,wrap:!0,children:[Object(_.jsx)(F.Text,{style:H.a.summaryColumnNoBorder}),Object(_.jsx)(F.Text,{style:H.a.summaryColumnNoBorder}),Object(_.jsx)(F.Text,{style:H.a.summaryColumnNoBorder}),Object(_.jsx)(F.Text,{style:H.a.summaryColumnNoBorder}),Object(_.jsx)(F.Text,{style:H.a.summaryColumnNoBorder}),Object(_.jsx)(F.Text,{style:H.a.summaryColumnRightBorder,children:"Total Amount"}),Object(_.jsx)(F.Text,{style:H.a.summaryColumn,children:Object(_.jsx)(Y.a,{value:Number((null===f||void 0===f?void 0:f.invTotal)||0).toFixed(2),displayType:"text",thousandSeparator:!0})})]})]})}),Object(_.jsxs)(F.View,{style:H.a.mb15,children:[Object(_.jsx)(F.Text,{style:H.a.subtitle2,children:"Terms and conditions"}),Object(_.jsx)(F.Text,{style:H.a.body3,children:(null===f||void 0===f?void 0:f.docTermsAndCondition)||""})]}),Object(_.jsx)(F.View,{style:{width:"100%",display:"flex",flexDirection:"row"},children:Object(_.jsx)(F.View,{style:H.a.col6,children:Object(_.jsxs)(F.View,{style:[H.a.alignLeft],children:[Object(_.jsx)(F.Text,{style:H.a.footerTitle,children:"Bank details"}),Object(_.jsxs)(F.Text,{style:H.a.footerTxt,children:["Beneficiary name:","  ",Object(_.jsx)("span",{style:{fontWeight:900},children:(null===p||void 0===p||null===(m=p.data)||void 0===m?void 0:m.beneficiaryName)||""})]}),Object(_.jsxs)(F.Text,{style:H.a.footerTxt,children:["Bank:","  ",Object(_.jsx)("span",{style:{fontWeight:900},children:(null===p||void 0===p||null===(y=p.data)||void 0===y?void 0:y.bankName)||""})]}),Object(_.jsxs)(F.Text,{style:H.a.footerTxt,children:["Account number:","  ",Object(_.jsx)("span",{style:{fontWeight:900},children:(null===p||void 0===p||null===(O=p.data)||void 0===O?void 0:O.bankAccNo)||""})]})]})})}),void 0!==w&&null!==w&&""!==w&&Object(_.jsx)(F.View,{style:[H.a.gridContainer,H.a.mt20],children:Object(_.jsx)(F.Text,{style:[H.a.subtitle2,H.a.lineHeightMain],children:Object(_.jsx)("b",{children:"Signature: "})})}),void 0!==w&&null!==w&&""!==w&&Object(_.jsx)(F.View,{style:[H.a.gridContainer,H.a.mb15],children:Object(_.jsx)(F.Image,{source:w,style:{width:"150px",height:"90px"}})})]})]})})}var q=o(251);function J(){var e=Object(M.a)().user,l=Object(L.b)().enqueueSnackbar,o=Object(S.b)(),n=Object(S.c)(B.b).documents,w=Object(S.c)(D.c).companyList,k=Object(N.useState)(null),I=Object(d.a)(k,2),W=I[0],H=I[1],Q=Object(N.useState)(null),J=Object(d.a)(Q,2),K=J[0],X=J[1],Z=Object(N.useState)(!1),$=Object(d.a)(Z,2),ee=$[0],le=$[1],oe=Object(N.useState)([]),te=Object(d.a)(oe,2),ie=te[0],de=te[1],ne=Object(N.useState)(!1),ae=Object(d.a)(ne,2),ce=ae[0],re=ae[1],se=Object(N.useState)(""),ue=Object(d.a)(se,2),ve=ue[0],je=ue[1],be=Object(N.useState)([]),xe=Object(d.a)(be,2),he=xe[0],me=xe[1];var ye=function(){var e=Object(i.a)(a.a.mark((function e(l,o,t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.preventDefault(),"removeOption"===t||"clear"===t||!o){e.next=7;break}return H(o),e.next=5,pe(o.id);case 5:e.next=8;break;case 7:"removeOption"!==t&&"clear"!==t||H(null);case 8:case"end":return e.stop()}}),e)})));return function(l,o,t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(i.a)(a.a.mark((function e(l,o,t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.preventDefault(),"removeOption"!==t&&"clear"!==t&&o?X(o):"removeOption"!==t&&"clear"!==t||X(null);case 2:case"end":return e.stop()}}),e)})));return function(l,o,t){return e.apply(this,arguments)}}();function pe(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(i.a)(a.a.mark((function e(i){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(Object(V.d)(!0)),e.next=3,P.b.collection("company").doc("5HAEgHE1kKox9ZdweP3I").collection("client").orderBy("name","asc").get().then((function(e){var l;if((null===e||void 0===e||null===(l=e.docs)||void 0===l?void 0:l.length)>0){var i=[];null===e||void 0===e||e.docs.forEach((function(e){var l;i.push({id:null===e||void 0===e?void 0:e.id,name:null===e||void 0===e||null===(l=e.data())||void 0===l?void 0:l.name,data:Object(t.a)({},null===e||void 0===e?void 0:e.data())})})),de(i),o(Object(V.d)(!1))}else de([]),o(Object(V.d)(!1))})).catch((function(e){l("Error occured while fetching clients: ".concat(null===e||void 0===e?void 0:e.message)),o(Object(V.d)(!1))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return ge.apply(this,arguments)}function ge(){return ge=Object(i.a)(a.a.mark((function e(){var d,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ve&&(o(Object(V.d)(!0)),(d=ve.split(" "))&&(null===d||void 0===d?void 0:d.length)>0&&(c=[],K?c.push(new Promise(function(){var e=Object(i.a)(a.a.mark((function e(l){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.b.collection("company").doc(null===W||void 0===W?void 0:W.id).collection(null===K||void 0===K?void 0:K.id).where("keywords","array-contains-any",d).limit(25).get().then((function(e){var o;if(null!==e&&void 0!==e&&e.docs&&(null===e||void 0===e||null===(o=e.docs)||void 0===o?void 0:o.length)>0){var i=[];null===e||void 0===e||e.docs.forEach((function(e){var l;i.push({id:null===e||void 0===e?void 0:e.id,documentType:document,documentNumber:null===e||void 0===e||null===(l=e.data())||void 0===l?void 0:l.docString,data:Object(t.a)({},null===e||void 0===e?void 0:e.data())})})),i.sort(Object(q.f)("documentNumber")),l(i)}else l([])}));case 2:case"end":return e.stop()}}),e)})));return function(l){return e.apply(this,arguments)}}())):n.forEach((function(e){c.push(new Promise(function(){var l=Object(i.a)(a.a.mark((function l(o){return a.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,P.b.collection("company").doc(null===W||void 0===W?void 0:W.id).collection(null===e||void 0===e?void 0:e.id).where("keywords","array-contains-any",d).limit(25).get().then((function(l){var i;if(null!==l&&void 0!==l&&l.docs&&(null===l||void 0===l||null===(i=l.docs)||void 0===i?void 0:i.length)>0){var d=[];null===l||void 0===l||l.docs.forEach((function(l){var o;d.push({id:null===l||void 0===l?void 0:l.id,documentType:e,documentNumber:null===l||void 0===l||null===(o=l.data())||void 0===o?void 0:o.docString,data:Object(t.a)({},null===l||void 0===l?void 0:l.data())})})),d.sort(Object(q.f)("documentNumber")),o(d)}else o([])}));case 2:case"end":return l.stop()}}),l)})));return function(e){return l.apply(this,arguments)}}()))})),Promise.all(c).then((function(e){var i=[];e&&(null===e||void 0===e?void 0:e.length)>0&&e.forEach((function(e){e&&(null===e||void 0===e?void 0:e.length)>0&&e.forEach((function(e){i.push(Object(t.a)({},e))}))})),0===(null===i||void 0===i?void 0:i.length)&&l("No document found",{variant:"warning"}),me(i),o(Object(V.d)(!1))}))));case 1:case"end":return e.stop()}}),e)}))),ge.apply(this,arguments)}var we=function(e){o(Object(B.j)(void 0)),le(!1),e&&fe()},Ce=function(){var e=Object(i.a)(a.a.mark((function e(l,o){var t,i,d,n,c,r,s,u,v,j,b,x;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ne(null===W||void 0===W||null===(t=W.data)||void 0===t?void 0:t.imageUrl);case 3:return d=e.sent,e.next=6,Ne(null===W||void 0===W||null===(i=W.data)||void 0===i?void 0:i.sigUrl);case 6:return n=e.sent,c=null!==W&&void 0!==W&&W.id&&'["9VNEXj9ahhngQ3U8oQ4i"]'.includes(null===W||void 0===W?void 0:W.id)?Object(_.jsx)(G,{companyChosenObj:l.companyChosenObj,clientChosenObj:l.clientChosenObj,invDetails:l.invDetails,logo:d||"",sigImage:n||""}):Object(_.jsx)(z.a,{companyChosenObj:l.companyChosenObj,clientChosenObj:l.clientChosenObj,invDetails:l.invDetails,logo:d||"",sigImage:n||""}),(r=Object(F.pdf)(c)).updateContainer(c),e.next=12,r.toBlob();case 12:s=e.sent,console.log(s),s&&((u=document.createElement("a")).href=window.URL.createObjectURL(s),"download"===o?(u.download="".concat(null===l||void 0===l||null===(v=l.invDetails)||void 0===v?void 0:v.docTitle,"_").concat(null===l||void 0===l||null===(j=l.invDetails)||void 0===j?void 0:j.invoiceString,"_Bill_to_").concat(null===l||void 0===l||null===(b=l.clientChosenObj)||void 0===b||null===(x=b.data)||void 0===x?void 0:x.name,".pdf"),u.click()):"view"===o&&window.open(u.href,"_blank")),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0),alert("Error generating PDF");case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(l,o){return e.apply(this,arguments)}}();function Ne(e){return Se.apply(this,arguments)}function Se(){return(Se=Object(i.a)(a.a.mark((function e(l){var o,t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==l){e.next=4;break}return e.abrupt("return","");case 4:return e.prev=4,e.next=7,fetch(l);case 7:return o=e.sent,e.next=10,o.blob();case 10:return t=e.sent,e.abrupt("return",new Promise((function(e){var l=new FileReader;l.readAsDataURL(t),l.onloadend=function(){var o=l.result;e(o)}})));case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})))).apply(this,arguments)}return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(c.a,{startIcon:Object(_.jsx)(C.a,{}),variant:"outlined",color:"primary",onClick:function(){return re(!0)},children:"Search document"}),Object(_.jsxs)(r.a,{open:ce,onClose:function(){re(!1)},fullWidth:!0,maxWidth:"lg",children:[Object(_.jsx)(s.a,{children:"Search document"}),Object(_.jsxs)(u.a,{style:{minHeight:"70vh"},children:[Object(_.jsx)("hr",{}),Object(_.jsx)("br",{}),Object(_.jsxs)(v.a,{spacing:3,children:[Object(_.jsx)(j.a,{ListboxProps:{style:{maxHeight:"70vh"}},size:"small",label:"Please choose a company",id:"company-drop-down",options:w,value:W||null,sx:{width:300},renderInput:function(e){return Object(_.jsx)(b.a,Object(t.a)(Object(t.a)({},e),{},{label:"Please choose a company",InputLabelProps:{required:!0}}))},required:!0,onChange:function(e,l,o){return ye(e,l,o)},getOptionLabel:function(e){return e.name}}),Object(_.jsx)(j.a,{ListboxProps:{style:{maxHeight:"70vh"}},size:"small",label:"Select type of document",id:"document-drop-down",options:n,value:K||null,sx:{width:300},renderInput:function(e){return Object(_.jsx)(b.a,Object(t.a)(Object(t.a)({},e),{},{label:"Select type of document",InputLabelProps:{required:!1}}))},onChange:function(e,l,o){return Oe(e,l,o)},getOptionLabel:function(e){return(null===e||void 0===e?void 0:e.title)||""}}),Object(_.jsxs)(v.a,{spacing:3,direction:"row",alignItems:"center",children:[Object(_.jsx)(b.a,{variant:"outlined",required:!0,fullWidth:!0,name:"searchInput",label:"Search",type:"text",id:"searchInput",size:"small",value:ve||"",onChange:function(e){je(e.target.value)},disabled:!W,onKeyUp:function(e){"Enter"===e.key&&(ve?fe():l("Wrong search input",{variant:"error"}))}}),Object(_.jsx)(c.a,{variant:"contained",color:"primary",onClick:function(){return fe()},disabled:!W||!ve,children:"search"})]}),he&&(null===he||void 0===he?void 0:he.length)>0?Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(x.a,{children:Object(_.jsxs)(h.a,{border:1,children:[Object(_.jsx)(m.a,{children:Object(_.jsxs)(y.a,{children:[Object(_.jsx)(O.a,{align:"center",size:"small",children:"View/download"}),Object(_.jsx)(O.a,{align:"center",size:"small",children:"Update"}),Object(_.jsx)(O.a,{align:"center",size:"small",children:"Customer"}),Object(_.jsx)(O.a,{align:"center",size:"small",children:"Document"}),Object(_.jsx)(O.a,{align:"center",size:"small",children:"Number"}),Object(_.jsx)(O.a,{align:"center",size:"small",children:"Date"}),Object(_.jsx)(O.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:"Vat amount"}),Object(_.jsx)(O.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:"Subtotal amount"}),Object(_.jsx)(O.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:"Total amount"}),Object(_.jsx)(O.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:"Proforma Status"})]})}),Object(_.jsx)(p.a,{children:null===he||void 0===he?void 0:he.map((function(l){var i,d,a,c,r,s,u,j,b,x,h,m,p,f,g,w,C,N,S,V,P;return Object(_.jsxs)(y.a,{children:[Object(_.jsx)(O.a,{align:"center",size:"small",style:{whiteSpace:"nowrap"},children:Object(_.jsxs)(v.a,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,children:[Object(_.jsx)(T.a,{variant:"contained",color:"primary",onClick:function(){var e,o,i,d,n,a,c,r,s,u,v,j,b,x,h,m,y,O,p,T,f,g,w,C,N,S,V,B,P,D,k,L;return Ce({companyChosenObj:{id:null!==W&&void 0!==W&&W.id&&""!==(null===W||void 0===W?void 0:W.id)?null===W||void 0===W?void 0:W.id:"",data:Object(t.a)({},null===W||void 0===W?void 0:W.data)},clientChosenObj:{data:Object(t.a)({},(null===ie||void 0===ie||null===(e=ie.find((function(e){var o;return(null===e||void 0===e?void 0:e.id)===(null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.clientId)})))||void 0===e?void 0:e.data)||{})},invDetails:{docTitle:(null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.docTitle)||"",docType:(null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.docType)||"",docQuoteNumber:(null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.docQuoteNumber)||"",docPurchaseOrderNumber:(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.docPurchaseOrderNumber)||"",docBillTo:(null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.docBillTo)||"",docShipTo:(null===l||void 0===l||null===(c=l.data)||void 0===c?void 0:c.docShipTo)||"",docTermsAndCondition:(null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.docTermsAndCondition)||"",invDate:E()(null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.docDate.toDate()).format("DD-MM-YYYY")||"",invParticulars:(null===l||void 0===l||null===(u=l.data)||void 0===u?void 0:u.docParticulars)||[],invTotal:(null===l||void 0===l||null===(v=l.data)||void 0===v?void 0:v.docTotal)||0,invoiceString:(null===l||void 0===l||null===(j=l.data)||void 0===j?void 0:j.docString)||"",invVatFee:(null===l||void 0===l||null===(b=l.data)||void 0===b?void 0:b.docVatFee)||0,invSubTotal:(null===l||void 0===l||null===(x=l.data)||void 0===x?void 0:x.docSubTotal)||0,paymentStatus:(null===l||void 0===l||null===(h=l.data)||void 0===h?void 0:h.paymentStatus)||"",docBLNumber:(null===l||void 0===l||null===(m=l.data)||void 0===m?void 0:m.docBLNumber)||"",docSupplier:(null===l||void 0===l||null===(y=l.data)||void 0===y?void 0:y.docSupplier)||"",docContainerNumber:(null===l||void 0===l||null===(O=l.data)||void 0===O?void 0:O.docContainerNumber)||"",docPackages:(null===l||void 0===l||null===(p=l.data)||void 0===p?void 0:p.docPackages)||"",docDescription:(null===l||void 0===l||null===(T=l.data)||void 0===T?void 0:T.docDescription)||"",docGrossWeight:(null===l||void 0===l||null===(f=l.data)||void 0===f?void 0:f.docGrossWeight)||"",docVolume:(null===l||void 0===l||null===(g=l.data)||void 0===g?void 0:g.docVolume)||"",docPortOfLoading:(null===l||void 0===l||null===(w=l.data)||void 0===w?void 0:w.docPortOfLoading)||"",docETA:(null===l||void 0===l||null===(C=l.data)||void 0===C?void 0:C.docETA)||"",docVesselName:(null===l||void 0===l||null===(N=l.data)||void 0===N?void 0:N.docVesselName)||"",docRoE:(null===l||void 0===l||null===(S=l.data)||void 0===S?void 0:S.docRoE)||"",docPlaceOfLanding:(null===l||void 0===l||null===(V=l.data)||void 0===V?void 0:V.docPlaceOfLanding)||"",docShipper:(null===l||void 0===l||null===(B=l.data)||void 0===B?void 0:B.docShipper)||"",docMarkNos:(null===l||void 0===l||null===(P=l.data)||void 0===P?void 0:P.docMarkNos)||"",docCommodity:(null===l||void 0===l||null===(D=l.data)||void 0===D?void 0:D.docCommodity)||"",docHbl:(null===l||void 0===l||null===(k=l.data)||void 0===k?void 0:k.docHbl)||"",docDepot:(null===l||void 0===l||null===(L=l.data)||void 0===L?void 0:L.docDepot)||""}},"view")},children:Object(_.jsx)(A.a,{icon:"carbon:view"})}),Object(_.jsx)(T.a,{variant:"contained",color:"primary",onClick:function(){var e,o,i,d,n,a,c,r,s,u,v,j,b,x,h,m,y,O,p,T,f,g,w,C,N,S,V,B,P,D,k,L;return Ce({companyChosenObj:{id:null!==W&&void 0!==W&&W.id&&""!==(null===W||void 0===W?void 0:W.id)?null===W||void 0===W?void 0:W.id:"",data:Object(t.a)({},null===W||void 0===W?void 0:W.data)},clientChosenObj:{data:Object(t.a)({},(null===ie||void 0===ie||null===(e=ie.find((function(e){var o;return(null===e||void 0===e?void 0:e.id)===(null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.clientId)})))||void 0===e?void 0:e.data)||{})},invDetails:{docTitle:(null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.docTitle)||"",docType:(null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.docType)||"",docQuoteNumber:(null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.docQuoteNumber)||"",docPurchaseOrderNumber:(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.docPurchaseOrderNumber)||"",docBillTo:(null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.docBillTo)||"",docShipTo:(null===l||void 0===l||null===(c=l.data)||void 0===c?void 0:c.docShipTo)||"",docTermsAndCondition:(null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.docTermsAndCondition)||"",invDate:E()(null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.docDate.toDate()).format("DD-MM-YYYY")||"",invParticulars:(null===l||void 0===l||null===(u=l.data)||void 0===u?void 0:u.docParticulars)||[],invTotal:(null===l||void 0===l||null===(v=l.data)||void 0===v?void 0:v.docTotal)||0,invoiceString:(null===l||void 0===l||null===(j=l.data)||void 0===j?void 0:j.docString)||"",invVatFee:(null===l||void 0===l||null===(b=l.data)||void 0===b?void 0:b.docVatFee)||0,invSubTotal:(null===l||void 0===l||null===(x=l.data)||void 0===x?void 0:x.docSubTotal)||0,paymentStatus:(null===l||void 0===l||null===(h=l.data)||void 0===h?void 0:h.paymentStatus)||"",docBLNumber:(null===l||void 0===l||null===(m=l.data)||void 0===m?void 0:m.docBLNumber)||"",docSupplier:(null===l||void 0===l||null===(y=l.data)||void 0===y?void 0:y.docSupplier)||"",docContainerNumber:(null===l||void 0===l||null===(O=l.data)||void 0===O?void 0:O.docContainerNumber)||"",docPackages:(null===l||void 0===l||null===(p=l.data)||void 0===p?void 0:p.docPackages)||"",docDescription:(null===l||void 0===l||null===(T=l.data)||void 0===T?void 0:T.docDescription)||"",docGrossWeight:(null===l||void 0===l||null===(f=l.data)||void 0===f?void 0:f.docGrossWeight)||"",docVolume:(null===l||void 0===l||null===(g=l.data)||void 0===g?void 0:g.docVolume)||"",docPortOfLoading:(null===l||void 0===l||null===(w=l.data)||void 0===w?void 0:w.docPortOfLoading)||"",docETA:(null===l||void 0===l||null===(C=l.data)||void 0===C?void 0:C.docETA)||"",docVesselName:(null===l||void 0===l||null===(N=l.data)||void 0===N?void 0:N.docVesselName)||"",docRoE:(null===l||void 0===l||null===(S=l.data)||void 0===S?void 0:S.docRoE)||"",docPlaceOfLanding:(null===l||void 0===l||null===(V=l.data)||void 0===V?void 0:V.docPlaceOfLanding)||"",docShipper:(null===l||void 0===l||null===(B=l.data)||void 0===B?void 0:B.docShipper)||"",docMarkNos:(null===l||void 0===l||null===(P=l.data)||void 0===P?void 0:P.docMarkNos)||"",docCommodity:(null===l||void 0===l||null===(D=l.data)||void 0===D?void 0:D.docCommodity)||"",docHbl:(null===l||void 0===l||null===(k=l.data)||void 0===k?void 0:k.docHbl)||"",docDepot:(null===l||void 0===l||null===(L=l.data)||void 0===L?void 0:L.docDepot)||""}},"download")},children:Object(_.jsx)(A.a,{icon:"eva:download-fill"})})]})}),Object(_.jsx)(O.a,{align:"center",size:"small",style:{whiteSpace:"nowrap"},children:Object(_.jsx)(T.a,{onClick:function(){var e,i,d;o(Object(B.j)(Object(t.a)(Object(t.a)({},l),{},{documentTypeId:null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.docType,documentTypeTitle:null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.docTitle,keywords:(null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.keywords)||[]}))),le(!0)},disabled:!(null!==e&&void 0!==e&&null!==(i=e.permissions[n.find((function(e){var o;return e.id===(null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.docType)}))])&&void 0!==i&&null!==(d=i.assignedCompanyId)&&void 0!==d&&d.includes(null===W||void 0===W?void 0:W.id))||(null===l||void 0===l?void 0:l.data)&&(null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.isProformaConverted)&&"proforma"===(null===l||void 0===l||null===(c=l.data)||void 0===c?void 0:c.docType),children:Object(_.jsx)(R.a,{color:"primary"})})}),Object(_.jsx)(O.a,{align:"center",size:"small",style:{whiteSpace:"nowrap"},children:null!==l&&void 0!==l&&null!==(r=l.data)&&void 0!==r&&r.clientId?null===ie||void 0===ie||null===(s=ie.find((function(e){var o;return(null===e||void 0===e?void 0:e.id)===(null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.clientId)})))||void 0===s?void 0:s.name:""}),Object(_.jsx)(O.a,{align:"center",size:"small",style:{whiteSpace:"nowrap"},children:(null===l||void 0===l||null===(u=l.data)||void 0===u?void 0:u.docTitle)||""}),Object(_.jsx)(O.a,{align:"center",size:"small",style:{whiteSpace:"nowrap"},children:(null===l||void 0===l||null===(j=l.data)||void 0===j?void 0:j.docString)||""}),Object(_.jsx)(O.a,{align:"center",size:"small",style:{whiteSpace:"nowrap"},children:null!==l&&void 0!==l&&null!==(b=l.data)&&void 0!==b&&b.docDate?E()(null===l||void 0===l||null===(x=l.data)||void 0===x?void 0:x.docDate.toDate()).format("DD-MM-YYYY"):""}),Object(_.jsx)(O.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:"invoice"===(null===l||void 0===l||null===(h=l.data)||void 0===h?void 0:h.docType)?"Not applicable":Object(_.jsx)(Y.a,{value:Number((null===l||void 0===l||null===(m=l.data)||void 0===m?void 0:m.docVatFee)||0).toFixed(2),displayType:"text",thousandSeparator:!0})}),Object(_.jsx)(O.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:Object(_.jsx)(Y.a,{value:Number((null===l||void 0===l||null===(p=l.data)||void 0===p?void 0:p.docSubTotal)||0).toFixed(2),displayType:"text",thousandSeparator:!0})}),Object(_.jsx)(O.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:Object(_.jsx)(Y.a,{value:Number((null===l||void 0===l||null===(f=l.data)||void 0===f?void 0:f.docTotal)||0).toFixed(2),displayType:"text",thousandSeparator:!0})}),Object(_.jsx)(O.a,{size:"small",align:"center",style:{whiteSpace:"nowrap",background:null!==l&&void 0!==l&&l.data&&null!==l&&void 0!==l&&null!==(g=l.data)&&void 0!==g&&g.isProformaConverted?"#FEFEBE":"transparent"},children:null!==l&&void 0!==l&&null!==(w=l.data)&&void 0!==w&&w.docType&&"proforma"===(null===l||void 0===l||null===(C=l.data)||void 0===C?void 0:C.docType)&&null!==l&&void 0!==l&&null!==(N=l.data)&&void 0!==N&&N.isProformaConverted?"Converted to ".concat(null===l||void 0===l||null===(S=l.data)||void 0===S?void 0:S.conversionDocTitle):null!==l&&void 0!==l&&null!==(V=l.data)&&void 0!==V&&V.docType&&"proforma"===(null===l||void 0===l||null===(P=l.data)||void 0===P?void 0:P.docType)?"Still Proforma":"Not applicable"})]})}))})]})})}):Object(_.jsx)(_.Fragment,{})]})]}),Object(_.jsx)(f.a,{})]}),ee?Object(_.jsxs)(r.a,{open:ee,onClose:function(){return we(!1)},maxWidth:"lg",fullWidth:!0,children:[Object(_.jsx)(s.a,{children:"Update invoice"}),Object(_.jsx)(u.a,{children:Object(_.jsx)(g.a,{container:!0,spacing:3,children:Object(_.jsx)(U.default,{action:"update",handleCloseUpdateDialog:we})})}),Object(_.jsx)(f.a,{children:Object(_.jsx)(c.a,{variant:"contained",color:"error",onClick:function(){return we(!1)},children:"close"})})]}):Object(_.jsx)(_.Fragment,{})]})}}}]);
//# sourceMappingURL=50.e8ddca85.chunk.js.map