(this["webpackJsonp@minimal/minimal-kit-react"]=this["webpackJsonp@minimal/minimal-kit-react"]||[]).push([[33],{1529:function(e,t,i){"use strict";var n=i(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(117)),o=i(0);t.default=(0,a.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},1552:function(e,t,i){"use strict";i.d(t,"a",(function(){return k}));var n=i(9),a=i(1844),o=i(133),c=i(286),r=i(1466),l=i(1492),d=i(1491),s=i(145),b=i(4),u=i(50),j=i.n(u),v=i(69),O=i.n(v),h=i(118),x=i(52),m=i(252),g=i(1565),p=i.n(g),f=i(0);function k(e){var t,i=e.product,u=e.callLocation,v=e.disableEditing,g=Object(x.b)(),k=Object(h.b)().enqueueSnackbar,y=i.name,w=i.price,S=Object(x.c)(m.b).bookingData;return Object(b.useEffect)((function(){if(null!==S&&void 0!==S&&S.bookingPickupDate&&null!==S&&void 0!==S&&S.bookingReturnDate&&O()(null===S||void 0===S?void 0:S.bookingReturnDate).format("YYYY-MM-DD")!==O()(new Date).format("YYYY-MM-DD")){var e=O()(null===S||void 0===S?void 0:S.bookingPickupDate,"YYYY-MM-DD"),t=O()(null===S||void 0===S?void 0:S.bookingReturnDate,"YYYY-MM-DD");if(t.isAfter(e)){var i=t.diff(e,"days")+1;g(Object(m.c)(Object(n.a)(Object(n.a)({},S),{},{bookingNumberOfDays:i})))}else k("Return date should be after Pickup date",{variant:"error"})}}),[null===S||void 0===S?void 0:S.bookingPickupDate,null===S||void 0===S?void 0:S.bookingReturnDate]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(o.a,{item:!0,xs:12,md:12,children:Object(f.jsx)(c.a,{variant:"h4",sx:{mt:2,mb:1,display:"block"},children:y||""})}),Object(f.jsx)(o.a,{item:!0,xs:12,md:12,children:Object(f.jsxs)(r.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(f.jsx)(l.a,{title:"Or similar models",children:Object(f.jsx)(p.a,{color:"info"})}),Object(f.jsx)(c.a,{children:"Or similar model"})]})}),Object(f.jsx)(o.a,{item:!0,xs:12,md:12,children:Object(f.jsxs)(c.a,{children:[Object(f.jsx)(j.a,{value:Number(w||0).toFixed(2),displayType:"text",thousandSeparator:!0,prefix:"".concat("\u20ac"," ")})," ","/ day"]})}),Object(f.jsx)(o.a,{item:!0,xs:12,md:12,children:Object(f.jsx)(d.a,{ListboxProps:{style:{maxHeight:"70vh"}},size:"small",label:"Pickup address",id:"pickup-drop-down",options:[{id:"ssr",title:"SSR Airport, Plaine Magnien, Mauritius"},{id:"anywhere",title:"Desired location - anywhere (+ additional cost)"}]||[],value:(null===S||void 0===S?void 0:S.bookingPickupAddress)||null,renderInput:function(e){return Object(f.jsx)(s.a,Object(n.a)(Object(n.a)({},e),{},{label:"Pickup address",InputLabelProps:{required:!0},size:"large"}))},required:!0,onChange:function(e,t,i){g("removeOption"!==i&&"clear"!==i&&t?Object(m.c)(Object(n.a)(Object(n.a)({},S),{},{bookingPickupAddress:t})):Object(m.c)(Object(n.a)(Object(n.a)({},S),{},{bookingPickupAddress:null})))},getOptionLabel:function(e){return e.title},disabled:"bookingList"===u&&v})}),"anywhere"===(null===S||void 0===S||null===(t=S.bookingPickupAddress)||void 0===t?void 0:t.id)&&Object(f.jsx)(o.a,{item:!0,xs:12,md:12,children:Object(f.jsx)(s.a,{variant:"outlined",fullWidth:!0,name:"bookingPickupAnywhereAddress",label:"Specify desired address",type:"text",id:"bookingPickupAnywhereAddress",value:(null===S||void 0===S?void 0:S.bookingPickupAnywhereAddress)||"",size:"large",onChange:function(e){g(Object(m.c)(Object(n.a)(Object(n.a)({},S),{},{bookingPickupAnywhereAddress:e.target.value})))},disabled:"bookingList"===u&&v})}),Object(f.jsx)(o.a,{item:!0,xs:12,md:6,children:Object(f.jsx)(a.a,{label:"Pickup date",value:(null===S||void 0===S?void 0:S.bookingPickupDate)||"",onChange:function(e){g(Object(m.c)(Object(n.a)(Object(n.a)({},S),{},{bookingPickupDate:e})))},renderInput:function(e){return Object(f.jsx)(s.a,Object(n.a)(Object(n.a)({},e),{},{size:"large",fullWidth:!0,disabled:"bookingList"===u&&v}))},inputFormat:"dd/MM/yyyy",disabled:"bookingList"===u&&v})}),Object(f.jsx)(o.a,{item:!0,xs:12,md:6,children:Object(f.jsx)(s.a,{variant:"outlined",fullWidth:!0,name:"bookingPickupTime",label:"Pickup time",type:"time",id:"bookingPickupTime",value:(null===S||void 0===S?void 0:S.bookingPickupTime)||"",size:"large",onChange:function(e){g(Object(m.c)(Object(n.a)(Object(n.a)({},S),{},{bookingPickupTime:e.target.value})))},disabled:"bookingList"===u&&v})}),Object(f.jsx)(o.a,{item:!0,xs:12,md:6,children:Object(f.jsx)(a.a,{label:"Return date",value:(null===S||void 0===S?void 0:S.bookingReturnDate)||"",onChange:function(e){g(Object(m.c)(Object(n.a)(Object(n.a)({},S),{},{bookingReturnDate:e})))},renderInput:function(e){return Object(f.jsx)(s.a,Object(n.a)(Object(n.a)({},e),{},{size:"large",fullWidth:!0,disabled:"bookingList"===u&&v}))},inputFormat:"dd/MM/yyyy",disabled:"bookingList"===u&&v})}),Object(f.jsx)(o.a,{item:!0,xs:12,md:6,children:Object(f.jsx)(s.a,{variant:"outlined",fullWidth:!0,name:"bookingReturnTime",label:"Return time",type:"time",id:"bookingReturnTime",value:(null===S||void 0===S?void 0:S.bookingReturnTime)||"",size:"large",onChange:function(e){g(Object(m.c)(Object(n.a)(Object(n.a)({},S),{},{bookingReturnTime:e.target.value})))},disabled:"bookingList"===u&&v})})]})}},1553:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(9),a=i(133),o=i(286),c=i(1465),r=i(1466),l=i(145),d=i(52),s=i(252),b=i(0);function u(e){var t=e.callLocation,i=e.disableEditing,u=Object(d.b)(),j=Object(d.c)(s.b).bookingData;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(a.a,{item:!0,xs:12,md:12,children:Object(b.jsx)(o.a,{variant:"h6",children:"Add extra options (Optional)"})}),Object(b.jsx)(a.a,{item:!0,xs:12,md:12,children:Object(b.jsx)(c.a,{})}),Object(b.jsx)(a.a,{item:!0,xs:12,md:8,children:Object(b.jsxs)(r.a,{spacing:1,children:[Object(b.jsx)(o.a,{variant:"subtitle1",children:"Baby Seat"}),Object(b.jsx)(o.a,{children:"Baby seat suitable for 0-13 Kg."})]})}),Object(b.jsx)(a.a,{item:!0,xs:12,md:4,children:Object(b.jsx)(l.a,{label:"Baby seat quantity",variant:"outlined",size:"large",fullWidth:!0,name:"bookingBabySeatQty",type:"number",id:"bookingBabySeatQty",value:(null===j||void 0===j?void 0:j.bookingBabySeatQty)||0,onChange:function(e){Number(e.target.value)>=0&&u(Object(s.c)(Object(n.a)(Object(n.a)({},j),{},{bookingBabySeatQty:e.target.value})))},disabled:"bookingList"===t&&i})}),Object(b.jsx)(a.a,{item:!0,xs:12,md:12,children:Object(b.jsx)(c.a,{})}),Object(b.jsx)(a.a,{item:!0,xs:12,md:8,children:Object(b.jsxs)(r.a,{spacing:1,children:[Object(b.jsx)(o.a,{variant:"subtitle1",children:"Booster Seat"}),Object(b.jsx)(o.a,{children:"Booster Seat suitable for 7-12 years old."})]})}),Object(b.jsx)(a.a,{item:!0,xs:12,md:4,children:Object(b.jsx)(l.a,{label:"Booster seat quantity",variant:"outlined",size:"large",fullWidth:!0,name:"bookingBoosterSeatQty",type:"number",id:"bookingBoosterSeatQty",value:(null===j||void 0===j?void 0:j.bookingBoosterSeatQty)||0,onChange:function(e){Number(e.target.value)>=0&&u(Object(s.c)(Object(n.a)(Object(n.a)({},j),{},{bookingBoosterSeatQty:e.target.value})))},disabled:"bookingList"===t&&i})}),Object(b.jsx)(a.a,{item:!0,xs:12,md:12,children:Object(b.jsx)(c.a,{})}),Object(b.jsx)(a.a,{item:!0,xs:12,md:8,children:Object(b.jsxs)(r.a,{spacing:1,children:[Object(b.jsx)(o.a,{variant:"subtitle1",children:"Child Seat"}),Object(b.jsx)(o.a,{children:"Child seat suitable for 9-18 Kg."})]})}),Object(b.jsx)(a.a,{item:!0,xs:12,md:4,children:Object(b.jsx)(l.a,{label:"Child seat quantity",variant:"outlined",size:"large",fullWidth:!0,name:"bookingChildSeatQty",type:"number",id:"bookingChildSeatQty",value:(null===j||void 0===j?void 0:j.bookingChildSeatQty)||0,onChange:function(e){Number(e.target.value)>=0&&u(Object(s.c)(Object(n.a)(Object(n.a)({},j),{},{bookingChildSeatQty:e.target.value})))},disabled:"bookingList"===t&&i})}),Object(b.jsx)(a.a,{item:!0,xs:12,md:12,children:Object(b.jsx)(c.a,{})})]})}},1554:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i(9),a=i(133),o=i(286),c=i(1465),r=i(1466),l=i(50),d=i.n(l),s=i(1566),b=i.n(s),u=i(4),j=i(52),v=i(252),O=i(0);function h(e){var t=e.price,i=e.bookingData,l=Object(j.b)(),s=Object(u.useRef)();return Object(u.useEffect)((function(){s.current()}),[null===i||void 0===i?void 0:i.bookingNumberOfDays,null===i||void 0===i?void 0:i.bookingBabySeatQty,null===i||void 0===i?void 0:i.bookingBoosterSeatQty,null===i||void 0===i?void 0:i.bookingChildSeatQty]),s.current=function(){var e;e=Number((null===i||void 0===i?void 0:i.bookingNumberOfDays)||0)*Number(t||0)+7*Number((null===i||void 0===i?void 0:i.bookingBabySeatQty)||0)+7*Number((null===i||void 0===i?void 0:i.bookingBoosterSeatQty)||0)+7*Number((null===i||void 0===i?void 0:i.bookingChildSeatQty)||0),l(Object(v.c)(Object(n.a)(Object(n.a)({},i),{},{bookingTotalAmount:e})))},Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(a.a,{item:!0,xs:12,md:7,children:Object(O.jsx)(o.a,{children:"Price per day"})}),Object(O.jsx)(a.a,{item:!0,xs:12,md:5,children:Object(O.jsx)(o.a,{align:"right",children:Object(O.jsx)(d.a,{value:Number(t||0).toFixed(2),displayType:"text",thousandSeparator:!0,prefix:"".concat("\u20ac"," ")})})}),Object(O.jsx)(a.a,{item:!0,xs:12,md:12,children:Object(O.jsx)(c.a,{})}),Object(O.jsx)(a.a,{item:!0,xs:12,md:7,children:Object(O.jsx)(o.a,{children:"Rental Days"})}),Object(O.jsx)(a.a,{item:!0,xs:12,md:5,children:Object(O.jsx)(o.a,{align:"right",children:(null===i||void 0===i?void 0:i.bookingNumberOfDays)||0})}),Object(O.jsx)(a.a,{item:!0,xs:12,md:12,children:Object(O.jsx)(c.a,{})}),Object(O.jsx)(a.a,{item:!0,xs:12,md:7,children:Object(O.jsx)(o.a,{children:"Rental Fee"})}),Object(O.jsx)(a.a,{item:!0,xs:12,md:5,children:Object(O.jsx)(o.a,{align:"right",children:Object(O.jsx)(d.a,{value:(Number(t||0)*Number((null===i||void 0===i?void 0:i.bookingNumberOfDays)||0)).toFixed(2),displayType:"text",thousandSeparator:!0,prefix:"".concat("\u20ac"," ")})})}),null!==i&&void 0!==i&&i.bookingBabySeatQty&&Number((null===i||void 0===i?void 0:i.bookingBabySeatQty)||0)>0?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(a.a,{item:!0,xs:12,md:12,children:Object(O.jsx)(c.a,{})}),Object(O.jsx)(a.a,{item:!0,xs:12,md:7,children:Object(O.jsxs)(r.a,{direction:"row",alignItems:"center",spacing:1,children:[Object(O.jsx)(o.a,{children:"(+) Baby Seat"}),Object(O.jsx)(b.a,{fontSize:"small"}),Object(O.jsx)(o.a,{children:Number(null===i||void 0===i?void 0:i.bookingBabySeatQty)})]})}),Object(O.jsx)(a.a,{item:!0,xs:12,md:5,children:Object(O.jsx)(o.a,{align:"right",children:Object(O.jsx)(d.a,{value:(Number(t||0)*Number((null===i||void 0===i?void 0:i.bookingBabySeatQty)||0)).toFixed(2),displayType:"text",thousandSeparator:!0,prefix:"".concat("\u20ac"," ")})})})]}):Object(O.jsx)(O.Fragment,{}),null!==i&&void 0!==i&&i.bookingBoosterSeatQty&&Number((null===i||void 0===i?void 0:i.bookingBoosterSeatQty)||0)>0?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(a.a,{item:!0,xs:12,md:12,children:Object(O.jsx)(c.a,{})}),Object(O.jsx)(a.a,{item:!0,xs:12,md:7,children:Object(O.jsxs)(r.a,{direction:"row",alignItems:"center",spacing:1,children:[Object(O.jsx)(o.a,{children:"(+) Booster Seat"}),Object(O.jsx)(b.a,{fontSize:"small"}),Object(O.jsx)(o.a,{children:Number(null===i||void 0===i?void 0:i.bookingBoosterSeatQty)})]})}),Object(O.jsx)(a.a,{item:!0,xs:12,md:5,children:Object(O.jsx)(o.a,{align:"right",children:Object(O.jsx)(d.a,{value:(Number(t||0)*Number((null===i||void 0===i?void 0:i.bookingBoosterSeatQty)||0)).toFixed(2),displayType:"text",thousandSeparator:!0,prefix:"".concat("\u20ac"," ")})})})]}):Object(O.jsx)(O.Fragment,{}),null!==i&&void 0!==i&&i.bookingChildSeatQty&&Number((null===i||void 0===i?void 0:i.bookingChildSeatQty)||0)>0?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(a.a,{item:!0,xs:12,md:12,children:Object(O.jsx)(c.a,{})}),Object(O.jsx)(a.a,{item:!0,xs:12,md:7,children:Object(O.jsxs)(r.a,{direction:"row",alignItems:"center",spacing:1,children:[Object(O.jsx)(o.a,{children:"(+) Child Seat"}),Object(O.jsx)(b.a,{fontSize:"small"}),Object(O.jsx)(o.a,{children:Number(null===i||void 0===i?void 0:i.bookingChildSeatQty)})]})}),Object(O.jsx)(a.a,{item:!0,xs:12,md:5,children:Object(O.jsx)(o.a,{align:"right",children:Object(O.jsx)(d.a,{value:(Number(t||0)*Number((null===i||void 0===i?void 0:i.bookingChildSeatQty)||0)).toFixed(2),displayType:"text",thousandSeparator:!0,prefix:"".concat("\u20ac"," ")})})})]}):Object(O.jsx)(O.Fragment,{}),Object(O.jsx)(a.a,{item:!0,xs:12,md:12,children:Object(O.jsx)(c.a,{})}),Object(O.jsx)(a.a,{item:!0,xs:12,md:7,children:Object(O.jsx)(o.a,{variant:"h6",children:"Total amount"})}),Object(O.jsx)(a.a,{item:!0,xs:12,md:5,children:Object(O.jsx)(o.a,{align:"right",children:Object(O.jsx)(d.a,{value:Number((null===i||void 0===i?void 0:i.bookingTotalAmount)||0).toFixed(2),displayType:"text",thousandSeparator:!0,prefix:"".concat("\u20ac"," ")})})})]})}},1564:function(e,t){function i(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id=1564},1577:function(e,t,i){"use strict";i.d(t,"a",(function(){return I}));var n=i(9),a=i(6),o=i(18),c=i(3),r=i.n(c),l=(i(1563),i(1398)),d=i(1406),s=i(1413),b=i(1465),u=i(133),j=i(1466),v=i(1484),O=i(1491),h=i(145),x=i(286),m=i(1414),g=i(701),p=i(118),f=i(4),k=i(52),y=i(189),w=i(252),S=i(68),D=i(49),C=i(72),P=i(1552),B=i(1553),z=i(1554),N=i(0);function I(e){var t,i,c,I=e.open,Q=e.setOpen,A=e.fetchBooking,R=e.viewOnly,T=Object(C.a)().user,F=Object(p.b)().enqueueSnackbar,Y=Object(k.b)(),L=Object(k.c)(w.b).bookingData,M=Object(f.useState)(!1),E=Object(o.a)(M,2),W=E[0],q=E[1];function U(){return(U=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(Object(S.d)(!0)),e.next=3,D.b.collection("vehiclebooking").doc(null===L||void 0===L?void 0:L.bookingId).set(Object(n.a)({},L),{merge:!0}).then(Object(a.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("confirmed"!==(null===L||void 0===L?void 0:L.status)){e.next=7;break}return e.next=3,Object(y.a)();case 3:null!==(t=e.sent)&&void 0!==t&&t.error?(F(null===t||void 0===t?void 0:t.message,{variant:"error"}),Y(Object(S.d)(!1))):"client"===(null===T||void 0===T?void 0:T.role)?V("client"):"client"!==(null===T||void 0===T?void 0:T.role)&&V("admin"),e.next=8;break;case 7:"client"===(null===T||void 0===T?void 0:T.role)?V("client"):"client"!==(null===T||void 0===T?void 0:T.role)&&V("admin");case 8:case"end":return e.stop()}}),e)})))).catch((function(e){F("Error occured while updating booking details: ".concat(null===e||void 0===e?void 0:e.message),{variant:"error"}),Y(Object(S.d)(!1))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return _.apply(this,arguments)}function _(){return(_=Object(a.a)(r.a.mark((function e(t){var i,n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.f)(null===L||void 0===L?void 0:L.bookingId,"".concat((null===T||void 0===T?void 0:T.lastName)||""," ").concat((null===T||void 0===T?void 0:T.firstName)||""),null===T||void 0===T?void 0:T.email,L,null===L||void 0===L||null===(i=L.vehicleDetails)||void 0===i?void 0:i.name,"client",t);case 2:if(null===(n=e.sent)||void 0===n||!n.error){e.next=8;break}F(null===n||void 0===n?void 0:n.message,{variant:"error"}),Y(Object(S.d)(!1)),e.next=13;break;case 8:if(null!==n&&void 0!==n&&n.error){e.next=13;break}return e.next=11,Object(y.f)(null===L||void 0===L?void 0:L.bookingId,"Admin","info@reachingheightsltd.com",L,null===L||void 0===L||null===(a=L.vehicleDetails)||void 0===a?void 0:a.name,"admin",t);case 11:null!==(o=e.sent)&&void 0!==o&&o.error?(F(null===o||void 0===o?void 0:o.message,{variant:"error"}),Y(Object(S.d)(!1))):(F(null===n||void 0===n?void 0:n.message,{variant:"success"}),F(null===o||void 0===o?void 0:o.message,{variant:"success"}),J(),A(),Y(Object(S.d)(!1)));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){Y(Object(w.c)({bookingPickupAddress:null,bookingPickupAnywhereAddress:"",bookingPickupDate:new Date,bookingPickupTime:"00:00",bookingReturnDate:new Date,bookingReturnTime:"00:00",bookingNumberOfDays:0,bookingBabySeatQty:0,bookingBoosterSeatQty:0,bookingChildSeatQty:0,bookingTotalAmount:0})),Q(!1)}Object(f.useEffect)((function(){I&&(R||"client"==(null===T||void 0===T?void 0:T.role)&&("confirmed"===(null===L||void 0===L?void 0:L.status)||"declined"===(null===L||void 0===L?void 0:L.status))?q(!0):q(!1))}),[I]);var K=function(){var e=Object(a.a)(r.a.mark((function e(t,i,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),"removeOption"!==a&&"clear"!==a&&i?Y(Object(w.c)(Object(n.a)(Object(n.a)({},L),{},{status:i}))):"removeOption"!==a&&"clear"!==a||Y(Object(w.c)(Object(n.a)(Object(n.a)({},L),{},{status:"pending"})));case 2:case"end":return e.stop()}}),e)})));return function(t,i,n){return e.apply(this,arguments)}}();return Object(N.jsxs)(l.a,{open:I,maxWidth:"md",fullWidth:!0,children:[Object(N.jsx)(d.a,{children:"Update booking"}),Object(N.jsxs)(s.a,{children:[Object(N.jsx)(b.a,{}),Object(N.jsx)("br",{}),Object(N.jsxs)(u.a,{container:!0,spacing:3,justifyContent:"flex-end",children:[Object(N.jsx)(u.a,{item:!0,xs:12,md:4,children:Object(N.jsxs)(j.a,{spacing:3,children:[Object(N.jsx)(N.Fragment,{children:"pending"===(null===L||void 0===L?void 0:L.status)?Object(N.jsx)(v.a,{severity:"warning",children:"Pending"}):"confirmed"===(null===L||void 0===L?void 0:L.status)&&"client"===(null===T||void 0===T?void 0:T.role)?Object(N.jsx)(v.a,{severity:"success",children:"Confirmed"}):"declined"===(null===L||void 0===L?void 0:L.status)?Object(N.jsx)(v.a,{severity:"error",children:"Declined"}):Object(N.jsx)(N.Fragment,{})}),T&&"client"!==(null===T||void 0===T?void 0:T.role)?Object(N.jsx)(O.a,{size:"small",label:"Please choose status",id:"client-drop-down",options:["pending","confirmed","declined"],value:(null===L||void 0===L?void 0:L.status)||null,renderInput:function(e){return Object(N.jsx)(h.a,Object(n.a)(Object(n.a)({},e),{},{label:"Please choose status",fullWidth:!0}))},onChange:function(e,t,i){return K(e,t,i)},getOptionLabel:function(e){return"pending"===e?"Pending":"confirmed"===e?"Confirmed":"declined"===e?"Declined":""},disabled:W}):Object(N.jsx)(N.Fragment,{})]})}),Object(N.jsx)(P.a,{product:{name:(null===L||void 0===L||null===(t=L.vehicleDetails)||void 0===t?void 0:t.name)||"",price:(null===L||void 0===L||null===(i=L.vehicleDetails)||void 0===i?void 0:i.price)||0},callLocation:"bookingList",disableEditing:W}),Object(N.jsx)(B.a,{callLocation:"bookingList",disableEditing:W}),Object(N.jsx)(b.a,{}),Object(N.jsx)(u.a,{item:!0,xs:12,md:12,children:Object(N.jsx)(x.a,{align:"right",variant:"h5",children:"Price summary"})}),Object(N.jsx)(u.a,{item:!0,xs:12,md:6,children:Object(N.jsx)(u.a,{container:!0,spacing:3,children:Object(N.jsx)(z.a,{price:(null===L||void 0===L||null===(c=L.vehicleDetails)||void 0===c?void 0:c.price)||0,bookingData:L})})})]})]}),Object(N.jsxs)(m.a,{children:[W?Object(N.jsx)(N.Fragment,{}):Object(N.jsx)(g.a,{variant:"contained",color:"primary",size:"large",onClick:function(){!function(){U.apply(this,arguments)}()},children:"Submit changes"}),Object(N.jsx)(g.a,{variant:"outlined",color:"error",size:"large",onClick:function(){return J()},children:"Close"})]})]})}},1854:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return X}));var n=i(9),a=i(6),o=i(18),c=i(3),r=i.n(c),l=i(76),d=i(1508),s=i(133),b=i(1466),u=i(701),j=i(286),v=i(1530),O=i(1531),h=i(1535),x=i(1533),m=i(1534),g=i(1532),p=i(1499),f=i(69),k=i.n(f),y=i(118),w=i(4),S=i(52),D=(i(37),i(13)),C=i(0);Object(D.a)("span")((function(e){var t=e.theme,i=e.ownerState,a=i.status,o=i.size;return Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)({width:10,height:10,display:"flex",borderRadius:"50%",alignItems:"center",justifyContent:"center","&:before, &:after":{content:"''",borderRadius:1,backgroundColor:t.palette.common.white}},"small"===o&&{width:8,height:8}),"large"===o&&{width:12,height:12}),"offline"===a&&{backgroundColor:"transparent"}),"away"===a&&{backgroundColor:t.palette.warning.main,"&:before":{width:2,height:4,transform:"translateX(1px) translateY(-1px)"},"&:after":{width:2,height:4,transform:"translateY(1px) rotate(125deg)"}}),"busy"===a&&{backgroundColor:t.palette.error.main,"&:before":{width:6,height:2}}),"online"===a&&{backgroundColor:t.palette.success.main}),"invisible"===a&&{backgroundColor:t.palette.text.disabled,"&:before":{width:6,height:6,borderRadius:"50%"}}),"unread"===a&&{backgroundColor:t.palette.info.main})}));var P=i(68),B=i(49),z=i(1529),N=i.n(z),I=i(287),Q=i(83),A=i(72),R=i(1527),T=i.n(R),F=i(48),Y=i(65),L=i(252),M=i(1577),E=i(1398),W=i(1406),q=i(1413),U=i(1465),V=i(1414),_=i(250),J=i(134);function K(e){var t=e.data,i=e.setData,n=e.fetchBooking,o=Object(A.a)().user,c=Object(y.b)().enqueueSnackbar,l=Object(S.b)();function d(){return d=Object(a.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(Object(P.d)(!0)),t=B.b.collection("contract").doc("documentIndex"),B.b.runTransaction((function(e){return e.get(t).then((function(i){if(!i.exists)return e.update(t,{documentIndex:1}),1;var n=Number(i.data().documentIndex)+1;return e.update(t,{documentIndex:n}),n}))})).then(function(){var e=Object(a.a)(r.a.mark((function e(t){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.h)(t);case 2:i=e.sent,(i="PC".concat(i))&&s(i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){c("Error occured while overall updating contract ID transactions: ".concat(null===e||void 0===e?void 0:e.message),{variant:"error"}),l(Object(P.d)(!1))}));case 3:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function s(e){return b.apply(this,arguments)}function b(){return(b=Object(a.a)(r.a.mark((function e(d){var s,b,u,j,v;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.b.collection("contract").doc(d).set({contractId:d,clientId:null===t||void 0===t||null===(s=t.booking)||void 0===s||null===(b=s.data)||void 0===b?void 0:b.createdByUserId,bookingId:null===t||void 0===t||null===(u=t.booking)||void 0===u?void 0:u.id,pickUpDate:null===t||void 0===t||null===(j=t.booking)||void 0===j||null===(v=j.data)||void 0===v?void 0:v.bookingPickupDate,dateCreated:J.a.firestore.Timestamp.fromDate(new Date),userCreated:null===o||void 0===o?void 0:o.id,userEmail:(null===o||void 0===o?void 0:o.email)||""},{merge:!0}).then(Object(a.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.b.collection("vehiclebooking").doc(null===t||void 0===t||null===(a=t.booking)||void 0===a?void 0:a.id).set({contractId:d},{merge:!0}).then((function(){c("Contract created successfully."),l(Object(P.d)(!1)),n(),i({open:!1})}));case 2:case"end":return e.stop()}}),e)})))).catch((function(e){c("Error occured while creating contract: ".concat(null===e||void 0===e?void 0:e.message),{variant:"error"}),l(Object(P.d)(!1))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(C.jsxs)(E.a,{open:(null===t||void 0===t?void 0:t.open)||!1,maxWidth:"md",fullWidth:!0,children:[Object(C.jsx)(W.a,{children:"Are you sure you want to create a contract ? "}),Object(C.jsxs)(q.a,{children:[Object(C.jsx)(U.a,{}),Object(C.jsx)("br",{}),Object(C.jsx)(j.a,{children:"After creating the contract, if you want to delete the contract, you need to go to the contract section."})]}),Object(C.jsxs)(V.a,{children:[Object(C.jsx)(u.a,{variant:"contained",color:"primary",onClick:function(){return function(){return d.apply(this,arguments)}()},children:"Create"}),Object(C.jsx)(u.a,{variant:"outlined",color:"error",onClick:function(){return i({open:!1})},children:"Cancel"})]})]})}var H=i(46);function X(){var e=Object(F.g)(),t=Object(A.a)().user,i=Object(l.a)(),c=Object(S.b)(),f=Object(Q.a)().themeStretch,D=Object(w.useRef)(),z=Object(y.b)().enqueueSnackbar,R=Object(w.useState)([]),E=Object(o.a)(R,2),W=E[0],q=E[1],U=Object(w.useState)(!1),V=Object(o.a)(U,2),J=V[0],X=V[1],G=Object(w.useState)(null),Z=Object(o.a)(G,2),$=Z[0],ee=Z[1];Object(w.useEffect)((function(){D.current()}),[]);var te=function(){var e=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c(Object(P.d)(!0)),!t||"client"!==(null===t||void 0===t?void 0:t.role)){e.next=6;break}return e.next=4,B.b.collection("vehiclebooking").where("createdByUserId","==",null===t||void 0===t?void 0:t.id).orderBy("dateCreated","desc").get().then((function(e){var t;if((null===e||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.length)>0){var i=[];null===e||void 0===e||e.docs.forEach((function(e){"documentIndex"!==(null===e||void 0===e?void 0:e.id)&&i.push({id:null===e||void 0===e?void 0:e.id,data:Object(n.a)({},null===e||void 0===e?void 0:e.data())})})),q(i),c(Object(P.d)(!1))}else q([]),c(Object(P.d)(!1))})).catch((function(e){z("Error occured while retrieving booking list: ".concat(null===e||void 0===e?void 0:e.message),{variant:"error"}),c(Object(P.d)(!1))}));case 4:e.next=9;break;case 6:if(!t||"client"===(null===t||void 0===t?void 0:t.role)){e.next=9;break}return e.next=9,B.b.collection("vehiclebooking").orderBy("dateCreated","desc").get().then((function(e){var t;if((null===e||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.length)>0){var i=[];null===e||void 0===e||e.docs.forEach((function(e){"documentIndex"!==(null===e||void 0===e?void 0:e.id)&&i.push({id:null===e||void 0===e?void 0:e.id,data:Object(n.a)({},null===e||void 0===e?void 0:e.data())})})),q(i),c(Object(P.d)(!1))}else q([]),c(Object(P.d)(!1))})).catch((function(e){z("Error occured while retrieving booking list: ".concat(null===e||void 0===e?void 0:e.message),{variant:"error"}),c(Object(P.d)(!1))}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return D.current=te,Object(C.jsxs)(I.a,{title:"Vehicle Booking",children:[Object(C.jsx)(d.a,{maxWidth:!f&&"xl",children:Object(C.jsxs)(s.a,{container:!0,spacing:3,children:[Object(C.jsx)(s.a,{item:!0,xs:12,md:12,children:Object(C.jsxs)(b.a,{spacing:3,direction:"row",alignItems:"center",children:[Object(C.jsx)(u.a,{startIcon:Object(C.jsx)(T.a,{}),variant:"outlined",color:"primary",onClick:function(){return e(Y.b.general.app1)},children:"Back"}),Object(C.jsx)(j.a,{variant:"h4",children:"Vehicle booking section"})]})}),Object(C.jsx)(s.a,{item:!0,xs:12,md:12,children:Object(C.jsx)(v.a,{children:Object(C.jsxs)(O.a,{border:1,children:[Object(C.jsx)(h.a,{children:Object(C.jsxs)(x.a,{children:[Object(C.jsx)(m.a,{size:"small",align:"center"}),Object(C.jsx)(m.a,{size:"small",align:"center",children:Object(C.jsx)(j.a,{children:"Update"})}),Object(C.jsx)(m.a,{size:"small",align:"center",children:Object(C.jsx)(j.a,{children:"Status"})}),Object(C.jsx)(m.a,{size:"small",align:"center",children:Object(C.jsx)(j.a,{children:"Booking ID"})}),Object(C.jsx)(m.a,{size:"small",align:"center",children:Object(C.jsx)(j.a,{children:"Contract"})}),Object(C.jsx)(m.a,{size:"small",align:"center",children:Object(C.jsx)(j.a,{children:"Client name"})}),Object(C.jsx)(m.a,{size:"small",align:"center",children:Object(C.jsx)(j.a,{children:"Vehicle"})}),Object(C.jsx)(m.a,{size:"small",align:"center",children:Object(C.jsx)(j.a,{children:"Pickup date time"})}),Object(C.jsx)(m.a,{size:"small",align:"center",children:Object(C.jsx)(j.a,{children:"Return date time"})}),Object(C.jsx)(m.a,{size:"small",align:"center",children:Object(C.jsx)(j.a,{children:"Pickup address"})})]})}),Object(C.jsx)(g.a,{children:W&&(null===W||void 0===W?void 0:W.length)>0&&(null===W||void 0===W?void 0:W.map((function(e,a){var o,r,l,d,s,v,O,h,g,f,y,w,S,D,P,B,z,I,Q;return Object(C.jsxs)(x.a,{children:[Object(C.jsx)(m.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:a+1}),Object(C.jsx)(m.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:Object(C.jsx)(p.a,{color:"primary",onClick:function(){var t,i;c(Object(L.c)(Object(n.a)(Object(n.a)({},null===e||void 0===e?void 0:e.data),{},{bookingPickupDate:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.bookingPickupDate.toDate(),bookingReturnDate:null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.bookingReturnDate.toDate()}))),X(!0)},disabled:t&&"client"===(null===t||void 0===t?void 0:t.role)&&"confirmed"===(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.status),children:Object(C.jsx)(N.a,{})})}),Object(C.jsx)(m.a,{size:"small",align:"center",style:{background:"pending"===(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.status)?i.palette.warning.main:"confirmed"===(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.status)?i.palette.success.main:"declined"===(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.status)?i.palette.error.main:"",whiteSpace:"nowrap"},children:Object(C.jsx)(j.a,{style:{textTransform:"capitalize"},children:null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.status})}),Object(C.jsx)(m.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:(null===e||void 0===e||null===(v=e.data)||void 0===v?void 0:v.bookingId)||""}),Object(C.jsx)(m.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:null!==e&&void 0!==e&&null!==(O=e.data)&&void 0!==O&&O.contractId?Object(C.jsxs)(b.a,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,children:[Object(C.jsx)(p.a,{variant:"contained",color:"info",onClick:function(){var t;Object(_.o)("view",null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.createdByUserId,e)},children:Object(C.jsx)(H.a,{icon:"carbon:view"})}),Object(C.jsx)(p.a,{variant:"contained",color:"info",onClick:function(){var t;Object(_.o)("download",null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.createdByUserId,e)},children:Object(C.jsx)(H.a,{icon:"eva:download-fill"})})]}):Object(C.jsx)(u.a,{variant:"contained",color:"info",onClick:function(){return ee({open:!0,booking:e})},children:"Create contract"})}),Object(C.jsx)(m.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:(null===e||void 0===e||null===(h=e.data)||void 0===h?void 0:h.clientName)||""}),Object(C.jsx)(m.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:(null===e||void 0===e||null===(g=e.data)||void 0===g||null===(f=g.vehicleDetails)||void 0===f?void 0:f.name)||""}),Object(C.jsx)(m.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:"".concat(k()(null===e||void 0===e||null===(y=e.data)||void 0===y?void 0:y.bookingPickupDate.toDate()).format("DD/MM/YYYY"),", ").concat(null===e||void 0===e||null===(w=e.data)||void 0===w?void 0:w.bookingPickupTime)}),Object(C.jsx)(m.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:"".concat(k()(null===e||void 0===e||null===(S=e.data)||void 0===S?void 0:S.bookingReturnDate.toDate()).format("DD/MM/YYYY"),", ").concat(null===e||void 0===e||null===(D=e.data)||void 0===D?void 0:D.bookingReturnTime)}),Object(C.jsx)(m.a,{size:"small",align:"center",style:{whiteSpace:"nowrap"},children:"anywhere"===(null===e||void 0===e||null===(P=e.data)||void 0===P||null===(B=P.bookingPickupAddress)||void 0===B?void 0:B.id)?null===e||void 0===e||null===(z=e.data)||void 0===z?void 0:z.bookingPickupAnywhereAddress:null===e||void 0===e||null===(I=e.data)||void 0===I||null===(Q=I.bookingPickupAddress)||void 0===Q?void 0:Q.title})]},a)})))})]})})})]})}),J?Object(C.jsx)(M.a,{open:J,setOpen:X,fetchBooking:te}):Object(C.jsx)(C.Fragment,{}),null!==$&&void 0!==$&&$.open?Object(C.jsx)(K,{data:$,setData:ee,fetchBooking:te}):Object(C.jsx)(C.Fragment,{})]})}}}]);
//# sourceMappingURL=33.9e3819bd.chunk.js.map