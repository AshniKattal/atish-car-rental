(this["webpackJsonp@minimal/minimal-kit-react"]=this["webpackJsonp@minimal/minimal-kit-react"]||[]).push([[45],{1536:function(e,t,i){"use strict";var n=i(6),a=i(14),l=i(4),o=(i(20),i(19)),c=i(154),r=i(27),d=i(12),s=i(118),u=i(129);function b(e){return Object(s.a)("MuiTableContainer",e)}Object(u.a)("MuiTableContainer",["root"]);var j=i(0),v=["className","component"],m=Object(d.a)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:function(e,t){return t.root}})({width:"100%",overflowX:"auto"}),O=l.forwardRef((function(e,t){var i=Object(r.a)({props:e,name:"MuiTableContainer"}),l=i.className,d=i.component,s=void 0===d?"div":d,u=Object(a.a)(i,v),O=Object(n.a)({},i,{component:s}),f=function(e){var t=e.classes;return Object(c.a)({root:["root"]},b,t)}(O);return Object(j.jsx)(m,Object(n.a)({ref:t,as:s,className:Object(o.a)(f.root,l),ownerState:O},u))}));t.a=O},1541:function(e,t,i){"use strict";var n=i(6),a=i(14),l=i(4),o=(i(20),i(19)),c=i(154),r=i(1529),d=i(27),s=i(12),u=i(118),b=i(129);function j(e){return Object(u.a)("MuiTableHead",e)}Object(b.a)("MuiTableHead",["root"]);var v=i(0),m=["className","component"],O=Object(s.a)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:function(e,t){return t.root}})({display:"table-header-group"}),f={variant:"head"},h="thead",p=l.forwardRef((function(e,t){var i=Object(d.a)({props:e,name:"MuiTableHead"}),l=i.className,s=i.component,u=void 0===s?h:s,b=Object(a.a)(i,m),p=Object(n.a)({},i,{component:u}),x=function(e){var t=e.classes;return Object(c.a)({root:["root"]},j,t)}(p);return Object(v.jsx)(r.a.Provider,{value:f,children:Object(v.jsx)(O,Object(n.a)({as:u,className:Object(o.a)(x.root,l),ref:t,role:u===h?null:"rowgroup",ownerState:p},b))})}));t.a=p},1565:function(e,t,i){"use strict";var n=i(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i(119)),l=i(0);t.default=(0,a.default)((0,l.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},1791:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return U}));var n=i(5),a=i(18),l=i(9),o=i(286),c=i(130),r=i(705),d=i(1497),s=i(147),u=i(704),b=i(54),j=i(1548),v=i(1551),m=i(4),O=i(12),f=i(206),h=i(1565),p=i.n(h),x=i(7),z=i(3),g=i.n(z),M=i(1865),y=i(1402),D=i(1410),w=i(1418),C=i(1473),S=i(1536),N=i(1537),T=i(1541),X=i(1539),k=i(1540),I=i(1538),P=i(1505),R=i(1419),q=i(120),E=i(52),F=i(77),A=i(48),H=i(155),L=i(68),V=i.n(L),W=i(46),Y=i(251),B=i(0);function J(e){var t=e.open,i=e.setOpen,n=e.companyId,d=e.collectionName,b=e.title,j=e.logo,v=e.companyDetails,O=e.setSurveyDetail,f=e.setValue,h=Object(q.b)().enqueueSnackbar,p=Object(E.b)(),z=Object(m.useState)(new Date),L=Object(a.a)(z,2),J=L[0],Z=L[1],_=Object(m.useState)(new Date),Q=Object(a.a)(_,2),G=Q[0],K=Q[1],U=Object(m.useState)([]),$=Object(a.a)(U,2),ee=$[0],te=$[1],ie=Object(m.useRef)();function ne(){return(ne=Object(x.a)(g.a.mark((function e(){var t,i,a,o,c,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&d&&J&&G)){e.next=15;break}if(p(Object(F.d)(!0)),!(new Date(J)>new Date(G))){e.next=7;break}h("Date incorrect. To Date cannot be before From Date.",{variant:"error"}),p(Object(F.d)(!1)),e.next=15;break;case 7:return t=J.toISOString(),i=t.split("T"),a=G.toISOString(),o=a.split("T"),c=new Date("".concat(i[0],"T00:00:00.000Z")),r=new Date("".concat(o[0],"T23:59:59.000Z")),e.next=15,A.b.collection("company").doc(n).collection(d).where("dateCreated",">=",H.a.firestore.Timestamp.fromDate(c)).where("dateCreated","<=",H.a.firestore.Timestamp.fromDate(r)).get().then((function(e){var t;if((null===e||void 0===e||null===(t=e.docs)||void 0===t?void 0:t.length)>0){var i=[];null===e||void 0===e||e.docs.forEach((function(e){i.push({id:null===e||void 0===e?void 0:e.id,data:Object(l.a)({},null===e||void 0===e?void 0:e.data())})})),te(i),p(Object(F.d)(!1))}else te([]),p(Object(F.d)(!1))})).catch((function(e){h("Error occured while fetching clients: ".concat(null===e||void 0===e?void 0:e.message)),p(Object(F.d)(!1))}));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return(ae=Object(x.a)(g.a.mark((function e(t){var n,a,o,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.k)();case 2:n=e.sent,a="",o=[],c=[],n.controlOfCheckboxList.forEach((function(e){var i;!0===(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.controlOf[e.name])&&o.push(null===e||void 0===e?void 0:e.title)})),n.locationTreatedCheckboxList.forEach((function(e){var i;!0===(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.locationTreated[e.name])&&c.push(null===e||void 0===e?void 0:e.title)})),o&&(null===o||void 0===o?void 0:o.length)>0&&(a+="<p>Pest to be controlled:</p><p><br></p>",a+="<ul>",o.forEach((function(e){a+="<li>".concat(e,"</li>")})),a+="</ul>"),c&&(null===c||void 0===c?void 0:c.length)>0&&(a+="<p><br></p>",a+="<p>Area to be controlled:</p><p><br></p>",a+="<ul>",c.forEach((function(e){a+="<li>".concat(e,"</li>")})),a+="</ul>"),a+="<p><br></p>",O((function(e){var i,n,o,c,r,d;return Object(l.a)(Object(l.a)({},e),{},{customerName:(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.customerName)||"",clientSigName:(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.customerName)||"",address:(null===t||void 0===t||null===(o=t.data)||void 0===o?void 0:o.address)||"",email:(null===t||void 0===t||null===(c=t.data)||void 0===c?void 0:c.email)||"",phone:(null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.phone)||"",surveyNumberSelected:null===t||void 0===t?void 0:t.id,treatmentDefinition:a,clientId:(null===t||void 0===t||null===(d=t.data)||void 0===d?void 0:d.clientId)||""})})),f&&f("treatmentDefinition",a),i(!1);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(m.useEffect)((function(){ie.current()}),[n,d,J,G]),ie.current=function(){return ne.apply(this,arguments)},Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)(y.a,{open:t,fullWidth:!0,maxWidth:"md",children:[Object(B.jsx)(D.a,{children:Object(B.jsxs)(o.a,{children:["Search ",b]})}),Object(B.jsxs)(w.a,{children:[Object(B.jsx)(u.a,{}),Object(B.jsx)("br",{}),Object(B.jsxs)(c.a,{container:!0,spacing:3,children:[Object(B.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(B.jsx)(o.a,{children:"Please choose a date"})}),Object(B.jsx)(c.a,{item:!0,xs:12,md:12,style:{width:"100%"},children:Object(B.jsxs)(C.a,{direction:"row",spacing:3,alignItems:"center",children:[Object(B.jsx)(M.a,{label:"From",value:J||"",onChange:function(e){Z(e)},renderInput:function(e){return Object(B.jsx)(s.a,Object(l.a)(Object(l.a)({},e),{},{size:"small"}))},inputFormat:"dd/MM/yyyy"}),Object(B.jsx)(M.a,{label:"To",value:G||"",onChange:function(e){K(e)},renderInput:function(e){return Object(B.jsx)(s.a,Object(l.a)(Object(l.a)({},e),{},{size:"small"}))},inputFormat:"dd/MM/yyyy"})]})})]}),ee&&(null===ee||void 0===ee?void 0:ee.length)>0?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("br",{}),Object(B.jsx)(S.a,{children:Object(B.jsxs)(N.a,{border:1,children:[Object(B.jsx)(T.a,{children:Object(B.jsxs)(X.a,{children:[Object(B.jsx)(k.a,{size:"small",align:"center",children:"Choose"}),Object(B.jsx)(k.a,{size:"small",align:"center",children:"Date Created"}),Object(B.jsxs)(k.a,{size:"small",align:"center",children:[b," number"]}),Object(B.jsx)(k.a,{size:"small",align:"center",children:"Customer name"}),Object(B.jsx)(k.a,{size:"small",align:"center",children:"View/Download PDF"})]})}),Object(B.jsx)(I.a,{children:ee&&(null===ee||void 0===ee?void 0:ee.length)>0&&(null===ee||void 0===ee?void 0:ee.map((function(e,t){var i,n,a;return Object(B.jsxs)(X.a,{children:[Object(B.jsx)(k.a,{size:"small",align:"center",children:Object(B.jsx)(r.a,{variant:"contained",color:"primary",onClick:function(){return function(e){return ae.apply(this,arguments)}(e)},children:"Choose"})}),Object(B.jsx)(k.a,{size:"small",align:"center",children:null!==e&&void 0!==e&&null!==(i=e.data)&&void 0!==i&&i.dateCreated?V()(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.dateCreated.toDate()).format("DD-MM-YYYY HH:mm:ss"):""}),Object(B.jsx)(k.a,{size:"small",align:"center",children:(null===e||void 0===e?void 0:e.id)||""}),Object(B.jsx)(k.a,{size:"small",align:"center",children:(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.customerName)||""}),Object(B.jsx)(k.a,{size:"small",align:"center",children:Object(B.jsxs)(C.a,{spacing:2,direction:"row",alignItems:"center",justifyContent:"center",children:[Object(B.jsx)(P.a,{color:"primary",onClick:function(){return Object(Y.p)(v,"view",null===e||void 0===e?void 0:e.data,d,j)},children:Object(B.jsx)(W.a,{icon:"carbon:view"})}),Object(B.jsx)(P.a,{color:"primary",onClick:function(){return Object(Y.p)("download",null===e||void 0===e?void 0:e.data,d,j)},children:Object(B.jsx)(W.a,{icon:"eva:download-fill"})})]})})]},t)})))})]})})]}):Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("br",{}),Object(B.jsx)(o.a,{children:"No data found for the selected date"})]})]}),Object(B.jsx)(R.a,{children:Object(B.jsx)(r.a,{variant:"contained",color:"error",onClick:function(){i(!1)},children:"Close"})})]})})}var Z=Object(O.a)(o.a)((function(e){var t=e.theme;return Object(l.a)(Object(l.a)({},t.typography.subtitle1),{},{color:t.palette.text.secondary,marginBottom:t.spacing(1)})})),_=[{id:"customerName",label:"The Customer",sizeXs:12,sizeMd:12},{id:"nic",label:"ID",sizeXs:12,sizeMd:4},{id:"brn",label:"BRN",sizeXs:12,sizeMd:4},{id:"tan",label:"VAT",sizeXs:12,sizeMd:4},{id:"address",label:"Address",sizeXs:12,sizeMd:12},{id:"contactNumber",label:"Phone number",sizeXs:12,sizeMd:6},{id:"email",label:"Email address",sizeXs:12,sizeMd:6},{id:"representative",label:"Representative",sizeXs:12,sizeMd:6},{id:"designation",label:"Designation",sizeXs:12,sizeMd:6},{id:"quoteRef",label:"Quote Ref",sizeXs:12,sizeMd:12},{id:"siteAddress",label:"Site address",sizeXs:12,sizeMd:12}],Q=[{id:"commencementPeriod",label:"Commencement period",sizeXs:12,sizeMd:12},{id:"terms",label:"Terms",sizeXs:12,sizeMd:12},{id:"serviceType",label:"Service type",sizeXs:12,sizeMd:12},{id:"noOfIntervention",label:"No. of intervention:",sizeXs:12,sizeMd:12},{id:"installationRequirement",label:"Installation requirement",sizeXs:12,sizeMd:12},{id:"additional",label:"Additionals",sizeXs:12,sizeMd:12}],G=[{id:"annualTotalAmt",label:"Annual Total amount",sizeXs:12,sizeMd:12},{id:"termsOfPayment",label:"Terms of Payment",sizeXs:12,sizeMd:12}],K=[{id:"treatmentDefinition",label:"Description of treatment",sizeXs:12,sizeMd:12}];function U(e){var t=e.clientList,i=e.clientDocumentObjectSelected,O=e.setClientDocumentObjectSelected,h=e.companyId,x=e.dialogType,z=e.surveyDetail,g=e.setSurveyDetail,M=e.logo,y=e.companyDetails,D=Object(m.useRef)(),w=Object(m.useState)(!1),C=Object(a.a)(w,2),S=C[0],N=C[1],T=j.d().shape({treatmentDefinition:j.e().required("Description of treatment is required"),specialMentions:j.e().required("Special mentions is required")}),X=Object(m.useMemo)((function(){return{treatmentDefinition:"update"===x||"view"===x?null===z||void 0===z?void 0:z.treatmentDefinition:"",specialMentions:"update"===x||"view"===x?null===z||void 0===z?void 0:z.specialMentions:""}}),[]),k=Object(b.f)({resolver:Object(v.a)(T),defaultValues:X}),I=k.watch,P=k.setValue,R=I();return Object(m.useEffect)((function(){D.current()}),[R.treatmentDefinition,R.specialMentions]),D.current=function(){R&&R.treatmentDefinition?g((function(e){return Object(l.a)(Object(l.a)({},e),{},{treatmentDefinition:R.treatmentDefinition})})):R&&""===R.treatmentDefinition&&g((function(e){return Object(l.a)(Object(l.a)({},e),{},{treatmentDefinition:""})})),R&&R.specialMentions?g((function(e){return Object(l.a)(Object(l.a)({},e),{},{specialMentions:R.specialMentions})})):R&&""===R.specialMentions&&g((function(e){return Object(l.a)(Object(l.a)({},e),{},{specialMentions:""})}))},Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(c.a,{container:!0,spacing:3,children:[Object(B.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(B.jsx)(r.a,{variant:"contained",color:"primary",onClick:function(){return N(!0)},size:"large",startIcon:Object(B.jsx)(p.a,{}),children:"Search existing Survey"})}),Object(B.jsx)(c.a,{item:!0,xs:12,md:4,children:Object(B.jsx)(d.a,{ListboxProps:{style:{maxHeight:"70vh"}},size:"small",label:"Please choose a client",id:"client-drop-down",options:t||[],value:i||null,renderInput:function(e){return Object(B.jsx)(s.a,Object(l.a)(Object(l.a)({},e),{},{label:"Please choose a client",size:"large"}))},onChange:function(e,t,i){if(e.preventDefault(),"removeOption"!==i&&"clear"!==i&&t){var n,a,o,c,r,d,s="";if(null!==t&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.contactNumber&&null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.mobileNumber)s="".concat(null===t||void 0===t||null===(o=t.data)||void 0===o?void 0:o.contactNumber," / ").concat(null===t||void 0===t||null===(c=t.data)||void 0===c?void 0:c.mobileNumber);else s=(null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.contactNumber)||(null===t||void 0===t||null===(d=t.data)||void 0===d?void 0:d.mobileNumber)||"";g((function(e){var i,n,a,o;return Object(l.a)(Object(l.a)({},e),{},{customerName:(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.name)||"",clientSigName:(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.name)||"",address:(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.address)||"",email:(null===t||void 0===t||null===(o=t.data)||void 0===o?void 0:o.email)||"",phone:s||""})})),O(t)}else"removeOption"!==i&&"clear"!==i||(g((function(e){return Object(l.a)(Object(l.a)({},e),{},{customerName:"",clientSigName:"",address:"",email:"",phone:""})})),O(null))},getOptionLabel:function(e){return(null===e||void 0===e?void 0:e.name)||""}})}),Object(B.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(B.jsx)(o.a,{variant:"h5",children:"Definitions"})}),_&&(null===_||void 0===_?void 0:_.map((function(e,t){return Object(B.jsx)(c.a,{item:!0,xs:null===e||void 0===e?void 0:e.sizeXs,md:null===e||void 0===e?void 0:e.sizeMd,children:Object(B.jsx)(s.a,{variant:"outlined",name:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.label,id:null===e||void 0===e?void 0:e.id,type:"text",value:z[null===e||void 0===e?void 0:e.id]||"",size:"large",fullWidth:!0,onChange:function(t){g((function(i){return Object(l.a)(Object(l.a)({},i),{},Object(n.a)({},null===e||void 0===e?void 0:e.id,t.target.value))}))},disabled:"view"===x})},t)}))),Object(B.jsxs)(c.a,{item:!0,xs:12,md:12,children:[Object(B.jsx)("br",{}),Object(B.jsx)(u.a,{}),Object(B.jsx)("br",{}),Object(B.jsx)(o.a,{variant:"h5",children:"Period of Contract and frequency of Services"})]}),Q&&(null===Q||void 0===Q?void 0:Q.map((function(e,t){return Object(B.jsx)(c.a,{item:!0,xs:null===e||void 0===e?void 0:e.sizeXs,md:null===e||void 0===e?void 0:e.sizeMd,children:Object(B.jsx)(s.a,{variant:"outlined",name:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.label,id:null===e||void 0===e?void 0:e.id,type:"text",value:z[null===e||void 0===e?void 0:e.id]||"",size:"large",fullWidth:!0,onChange:function(t){g((function(i){return Object(l.a)(Object(l.a)({},i),{},Object(n.a)({},null===e||void 0===e?void 0:e.id,t.target.value))}))},disabled:"view"===x})},t)}))),Object(B.jsxs)(c.a,{item:!0,xs:12,md:12,children:[Object(B.jsx)("br",{}),Object(B.jsx)(u.a,{}),Object(B.jsx)("br",{}),Object(B.jsx)(o.a,{variant:"h5",children:"Cost"})]}),G&&(null===G||void 0===G?void 0:G.map((function(e,t){return Object(B.jsx)(c.a,{item:!0,xs:null===e||void 0===e?void 0:e.sizeXs,md:null===e||void 0===e?void 0:e.sizeMd,children:Object(B.jsx)(s.a,{variant:"outlined",name:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.label,id:null===e||void 0===e?void 0:e.id,type:"text",value:z[null===e||void 0===e?void 0:e.id]||"",size:"large",fullWidth:!0,onChange:function(t){g((function(i){return Object(l.a)(Object(l.a)({},i),{},Object(n.a)({},null===e||void 0===e?void 0:e.id,t.target.value))}))},disabled:"view"===x})},t)}))),Object(B.jsxs)(c.a,{item:!0,xs:12,md:12,children:[Object(B.jsx)("br",{}),Object(B.jsx)(u.a,{}),Object(B.jsx)("br",{}),Object(B.jsx)(o.a,{variant:"h5",children:"Description of treatment"})]}),Object(B.jsx)(c.a,{item:!0,xs:12,md:12,children:Object(B.jsx)(f.a,{methods:k,children:Object(B.jsx)(c.a,{container:!0,spacing:3,children:K&&(null===K||void 0===K?void 0:K.map((function(e,t){return Object(B.jsxs)(c.a,{item:!0,xs:null===e||void 0===e?void 0:e.sizeXs,md:null===e||void 0===e?void 0:e.sizeMd,children:[Object(B.jsx)(Z,{children:null===e||void 0===e?void 0:e.label}),Object(B.jsx)(f.c,{simple:!1,name:null===e||void 0===e?void 0:e.id,disabled:"view"===x})]},t)})))})})})]}),S&&Object(B.jsx)(J,{companyId:h,open:S,setOpen:N,title:"Survey",collectionName:"survey",logo:M,companyDetails:y,setSurveyDetail:g,setValue:P})]})}}}]);
//# sourceMappingURL=45.7a7fae88.chunk.js.map