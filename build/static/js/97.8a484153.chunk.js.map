{"version":3,"sources":["pages/dashboard/manage-super-admin/CreateOrUpdateSuperAdmin.js"],"names":["CreateOrUpdateSuperAdmin","dialogType","openDialog","handleCloseDialog","adminDetails","setAdminDetails","init_admin_list","id","firstName","lastName","contactNumber","email","password","role","access","sysFunc","a_comp","enqueueSnackbar","useSnackbar","dispatch","useDispatch","useState","step","setStep","selectedCompanies","set_selectedCompanies","submitChanges","e","preventDefault","setLoading","ValidateEmptyInput","ValidateEmail","ValidatePassword","performAdd","performUpdate","variant","a","functions","httpsCallable","createUserByAdmin","then","result","data","catch","err","message","updateUserByAdmin","msg","open","onClose","maxWidth","fullWidth","type","spacing","direction","onClick","color"],"mappings":"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","file":"static/js/97.8a484153.chunk.js","sourcesContent":["import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Stack,\n  Divider,\n} from \"@mui/material\";\n\nimport { useState } from \"react\";\nimport { functions } from \"../../../firebase\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  ValidateEmail,\n  ValidatePassword,\n  ValidateEmptyInput,\n} from \"../../../components/core-functions/SelectionCoreFunctions\";\nimport { setLoading } from \"../../../features/globalSlice\";\nimport { useSnackbar } from \"notistack\";\nimport AdminStep1 from \"../manage-admin/AdminStep1\";\nimport AdminStepPermission from \"../manage-admin/AdminStepPermission\";\n\nfunction CreateOrUpdateSuperAdmin({\n  dialogType,\n  openDialog,\n  handleCloseDialog,\n  adminDetails,\n  setAdminDetails,\n  init_admin_list,\n}) {\n  const {\n    id,\n    firstName,\n    lastName,\n    contactNumber,\n    email,\n    password,\n    role,\n    access,\n    sysFunc,\n    a_comp,\n  } = adminDetails;\n  const { enqueueSnackbar } = useSnackbar();\n  const dispatch = useDispatch();\n  const [step, setStep] = useState(0);\n\n  const [selectedCompanies, set_selectedCompanies] = useState([]);\n\n  const submitChanges = (e) => {\n    e.preventDefault();\n    dispatch(setLoading(true));\n    if (\n      !ValidateEmptyInput([\n        firstName,\n        lastName,\n        contactNumber,\n        email,\n        password,\n        role,\n        access,\n      ])\n    ) {\n      enqueueSnackbar(\"Please fill in all the inputs\", { variant: \"error\" });\n      dispatch(setLoading(false));\n    } else if (!ValidateEmail(email)) {\n      enqueueSnackbar(\"You have entered an invalid email address\", {\n        variant: \"error\",\n      });\n      dispatch(setLoading(false));\n    } else if (!ValidatePassword(password)) {\n      enqueueSnackbar(\"Password must be equal or greater than 6 characters\", {\n        variant: \"error\",\n      });\n      dispatch(setLoading(false));\n    } else {\n      if (dialogType === \"add\") {\n        performAdd();\n      } else if (dialogType === \"update\") {\n        performUpdate();\n      }\n    }\n  };\n\n  async function performAdd() {\n    const createUserByAdmin = functions.httpsCallable(\"createuserbyadminnew\");\n    createUserByAdmin({\n      firstName: firstName,\n      lastName: lastName,\n      contactNumber: contactNumber,\n      email: email,\n      password: password,\n      role: role,\n      access: access,\n      sysFunc: sysFunc,\n      a_comp: a_comp,\n    })\n      .then((result) => {\n        if (init_admin_list) {\n          init_admin_list();\n        }\n        setStep(0);\n        enqueueSnackbar(result?.data?.result || \"\", { variant: \"success\" });\n        dispatch(setLoading(false));\n        handleCloseDialog();\n      })\n      .catch((err) => {\n        setStep(0);\n        enqueueSnackbar(err?.message, { variant: \"error\" });\n        dispatch(setLoading(false));\n      });\n  }\n\n  async function performUpdate() {\n    const updateUserByAdmin = functions.httpsCallable(\"updateuserbyadminnew\");\n    updateUserByAdmin({\n      id: id || \"\",\n      firstName: firstName || \"\",\n      lastName: lastName || \"\",\n      contactNumber: contactNumber || \"\",\n      // email: email,\n      password: password || \"\",\n      role: role || \"\",\n      access: access || false,\n      sysFunc: sysFunc || [],\n      a_comp: a_comp || [],\n    })\n      .then((result) => {\n        if (init_admin_list) {\n          init_admin_list();\n        }\n        enqueueSnackbar(result?.data?.result || \"\", { variant: \"success\" });\n\n        handleCloseDialog();\n        setStep(0);\n\n        dispatch(setLoading(false));\n      })\n      .catch((err) => {\n        let msg = \"\";\n        if (err.message) {\n          msg = err.message;\n        } else {\n          msg = err;\n        }\n        enqueueSnackbar(msg, { variant: \"error\" });\n\n        setStep(0);\n        handleCloseDialog();\n\n        dispatch(setLoading(false));\n      });\n  }\n\n  /*   const handleChkChange = (e, index, name) => {\n    let arr = [...sysFunc];\n    let newArr = [];\n    for (let i = 0; i < arr.length; i++) {\n      if (i === index) {\n        newArr.push({\n          ...arr[i],\n          [name]: e.target.checked,\n        });\n      } else {\n        newArr.push(arr[i]);\n      }\n    }\n    setAdminDetails({\n      ...adminDetails,\n      sysFunc: newArr,\n    });\n  }; */\n\n  /*   const assignAll = async () => {\n    let arr = await getPermissions(true);\n    setAdminDetails({\n      ...adminDetails,\n      sysFunc: arr,\n    });\n  };\n\n  const none = async () => {\n    let arr = await getPermissions(false);\n    setAdminDetails({\n      ...adminDetails,\n      sysFunc: arr,\n    });\n  }; */\n\n  return (\n    <>\n      <Dialog\n        open={openDialog}\n        onClose={handleCloseDialog}\n        maxWidth={\"lg\"}\n        fullWidth\n      >\n        <DialogTitle id=\"alert-dialog-title\">\n          {dialogType && dialogType === \"add\" ? \"Create a User\" : \"Update User\"}\n        </DialogTitle>\n        <DialogContent>\n          <Divider />\n          <br />\n          {step === 0 ? (\n            <AdminStep1\n              adminDetails={adminDetails}\n              setAdminDetails={setAdminDetails}\n              selectedCompanies={selectedCompanies}\n              set_selectedCompanies={set_selectedCompanies}\n              type=\"super-admin\"\n            />\n          ) : step === 1 ? (\n            <AdminStepPermission\n              adminDetails={adminDetails}\n              setAdminDetails={setAdminDetails}\n              type=\"super-admin\"\n              dialogType={dialogType}\n            />\n          ) : (\n            \"\"\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Stack spacing={2} direction=\"row\">\n            {step === 0 ? (\n              <Button\n                onClick={() => {\n                  setStep(1);\n                }}\n                color=\"primary\"\n                variant=\"contained\"\n              >\n                Next\n              </Button>\n            ) : step === 1 ? (\n              <>\n                <Button\n                  onClick={() => setStep(0)}\n                  color=\"secondary\"\n                  variant=\"contained\"\n                >\n                  Back\n                </Button>\n                <Button\n                  onClick={(e) => submitChanges(e)}\n                  color=\"primary\"\n                  variant=\"contained\"\n                >\n                  {dialogType && dialogType === \"add\" ? \"Add\" : \"Update\"}\n                </Button>\n              </>\n            ) : (\n              <></>\n            )}\n\n            <Button\n              onClick={handleCloseDialog}\n              color=\"error\"\n              variant=\"outlined\"\n            >\n              Cancel\n            </Button>\n          </Stack>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n\nexport default CreateOrUpdateSuperAdmin;\n"],"sourceRoot":""}